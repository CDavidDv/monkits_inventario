import{T as N,c as B,w as m,o as f,a as e,t as a,b as l,f as p,u as s,i as _,n as d,p as A,j as x,k as U,v as y,d as v,e as b,z as $}from"./app-DwDI59q_.js";import{_ as q}from"./AppLayout-CCrStt77.js";import{_ as u}from"./InputLabel-CnLUcmbS.js";import{_ as k}from"./TextInput-ZqEeRacd.js";import{_ as c}from"./InputError-Be8KzcIm.js";import{_ as z}from"./PrimaryButton-M9ST1RCB.js";import{_ as P}from"./SecondaryButton-CQXy8ZPl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"flex justify-between items-center"},O={class:"font-semibold text-xl text-gray-800 leading-tight"},H={class:"flex space-x-2"},K={class:"py-12"},R={class:"max-w-3xl mx-auto sm:px-6 lg:px-8"},T={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},G={class:"p-6"},L={class:"mb-6 p-4 bg-blue-50 rounded-lg"},Q={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},F={class:"text-lg"},I={class:"text-lg"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},W={class:"md:col-span-2"},X={class:"md:col-span-2"},Y={key:0,class:"mt-1 text-sm"},Z={class:"text-orange-600"},ee={key:0,class:"mt-6 p-4 bg-gray-50 rounded-lg"},te={class:"flex items-center space-x-4"},oe={class:"flex-1"},se={class:"w-full bg-gray-200 rounded-full h-2"},le={class:"mt-2 text-xs text-gray-500 flex justify-between"},ne={class:"flex items-center justify-end mt-6 space-x-3"},re={key:0,class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},fe={__name:"Edit",props:{element:Object},setup(i){const n=i,t=N({name:n.element.name,description:n.element.description||"",category:n.element.category,unit:n.element.unit,min_stock:n.element.min_stock,max_stock:n.element.max_stock,current_stock:n.element.current_stock,location:n.element.location||""}),w=()=>{t.put(route("elements.update",n.element.id),{onSuccess:()=>{}})},S=()=>n.element.current_stock<=0?"text-red-600":n.element.current_stock<=n.element.min_stock?"text-yellow-600":n.element.current_stock>=n.element.max_stock?"text-purple-600":"text-green-600",V=()=>n.element.current_stock<=0?"Agotado":n.element.current_stock<=n.element.min_stock?"Stock Bajo":n.element.current_stock>=n.element.max_stock?"Sobre Stock":"Normal",C=()=>n.element.current_stock<=0?"bg-red-100 text-red-800":n.element.current_stock<=n.element.min_stock?"bg-yellow-100 text-yellow-800":n.element.current_stock>=n.element.max_stock?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800",M=()=>!t.max_stock||t.max_stock===0?0:Math.min(t.current_stock/t.max_stock*100,100),E=()=>t.current_stock<=0?"Agotado":t.current_stock<=t.min_stock?"Stock Bajo":t.current_stock>=t.max_stock?"Sobre Stock":"Normal",h=()=>t.current_stock<=0?"bg-red-500":t.current_stock<=t.min_stock?"bg-yellow-500":t.current_stock>=t.max_stock?"bg-purple-500":"bg-green-500",j=()=>t.current_stock<=0?"bg-red-100 text-red-800":t.current_stock<=t.min_stock?"bg-yellow-100 text-yellow-800":t.current_stock>=t.max_stock?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800";return(g,o)=>(f(),B(q,{title:"Editar Elemento"},{header:m(()=>[e("div",D,[e("h2",O," Editar Elemento: "+a(i.element.name),1),e("div",H,[l(s(_),{href:g.route("elements.show",i.element.id),class:"text-blue-600 hover:text-blue-800"},{default:m(()=>o[9]||(o[9]=[p(" Ver Detalles ")])),_:1},8,["href"]),l(s(_),{href:g.route("elements.index"),class:"text-blue-600 hover:text-blue-800"},{default:m(()=>o[10]||(o[10]=[p(" ← Volver a la lista ")])),_:1},8,["href"])])])]),default:m(()=>[e("div",K,[e("div",R,[e("div",T,[e("div",G,[e("div",L,[o[15]||(o[15]=e("h3",{class:"text-lg font-medium text-blue-900 mb-2"},"Estado Actual",-1)),e("div",Q,[e("div",null,[o[11]||(o[11]=e("span",{class:"text-blue-700 font-medium"},"Stock Actual:",-1)),e("div",{class:d(["text-2xl font-bold",S()])},a(i.element.current_stock)+" "+a(i.element.unit),3)]),e("div",null,[o[12]||(o[12]=e("span",{class:"text-blue-700 font-medium"},"Stock Mínimo:",-1)),e("div",F,a(i.element.min_stock),1)]),e("div",null,[o[13]||(o[13]=e("span",{class:"text-blue-700 font-medium"},"Stock Máximo:",-1)),e("div",I,a(i.element.max_stock),1)]),e("div",null,[o[14]||(o[14]=e("span",{class:"text-blue-700 font-medium"},"Estado:",-1)),e("div",null,[e("span",{class:d(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",C()])},a(V()),3)])])])]),e("form",{onSubmit:A(w,["prevent"])},[e("div",J,[e("div",W,[l(u,{for:"name",value:"Nombre del Elemento *"}),l(k,{id:"name",modelValue:s(t).name,"onUpdate:modelValue":o[0]||(o[0]=r=>s(t).name=r),type:"text",class:"mt-1 block w-full",required:"",placeholder:"Ej: Resistencia 1K Ohm"},null,8,["modelValue"]),l(c,{class:"mt-2",message:s(t).errors.name},null,8,["message"])]),e("div",X,[l(u,{for:"description",value:"Descripción"}),x(e("textarea",{id:"description","onUpdate:modelValue":o[1]||(o[1]=r=>s(t).description=r),rows:"3",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Descripción detallada del elemento..."},null,512),[[U,s(t).description]]),l(c,{class:"mt-2",message:s(t).errors.description},null,8,["message"])]),e("div",null,[l(u,{for:"category",value:"Categoría *"}),x(e("select",{id:"category","onUpdate:modelValue":o[2]||(o[2]=r=>s(t).category=r),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",required:""},o[16]||(o[16]=[e("option",{value:""},"Seleccionar categoría",-1),e("option",{value:"Electrónicos"},"Electrónicos",-1),e("option",{value:"Mecánicos"},"Mecánicos",-1),e("option",{value:"Químicos"},"Químicos",-1),e("option",{value:"Herramientas"},"Herramientas",-1),e("option",{value:"Materiales"},"Materiales",-1),e("option",{value:"Consumibles"},"Consumibles",-1),e("option",{value:"Otros"},"Otros",-1)]),512),[[y,s(t).category]]),l(c,{class:"mt-2",message:s(t).errors.category},null,8,["message"])]),e("div",null,[l(u,{for:"unit",value:"Unidad de Medida *"}),x(e("select",{id:"unit","onUpdate:modelValue":o[3]||(o[3]=r=>s(t).unit=r),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",required:""},o[17]||(o[17]=[e("option",{value:""},"Seleccionar unidad",-1),e("option",{value:"Pieza"},"Pieza",-1),e("option",{value:"Metro"},"Metro",-1),e("option",{value:"Kilogramo"},"Kilogramo",-1),e("option",{value:"Gramo"},"Gramo",-1),e("option",{value:"Litro"},"Litro",-1),e("option",{value:"Mililitro"},"Mililitro",-1),e("option",{value:"Caja"},"Caja",-1),e("option",{value:"Paquete"},"Paquete",-1),e("option",{value:"Rollo"},"Rollo",-1)]),512),[[y,s(t).unit]]),l(c,{class:"mt-2",message:s(t).errors.unit},null,8,["message"])]),e("div",null,[l(u,{for:"min_stock",value:"Stock Mínimo *"}),l(k,{id:"min_stock",modelValue:s(t).min_stock,"onUpdate:modelValue":o[4]||(o[4]=r=>s(t).min_stock=r),type:"number",class:"mt-1 block w-full",min:"0",required:"",placeholder:"0"},null,8,["modelValue"]),l(c,{class:"mt-2",message:s(t).errors.min_stock},null,8,["message"]),o[18]||(o[18]=e("p",{class:"mt-1 text-sm text-gray-500"}," Se generará una alerta cuando el stock esté por debajo de este valor ",-1))]),e("div",null,[l(u,{for:"max_stock",value:"Stock Máximo *"}),l(k,{id:"max_stock",modelValue:s(t).max_stock,"onUpdate:modelValue":o[5]||(o[5]=r=>s(t).max_stock=r),type:"number",class:"mt-1 block w-full",min:"0",required:"",placeholder:"0"},null,8,["modelValue"]),l(c,{class:"mt-2",message:s(t).errors.max_stock},null,8,["message"]),o[19]||(o[19]=e("p",{class:"mt-1 text-sm text-gray-500"}," Se generará una alerta cuando el stock supere este valor ",-1))]),e("div",null,[l(u,{for:"current_stock",value:"Stock Actual *"}),l(k,{id:"current_stock",modelValue:s(t).current_stock,"onUpdate:modelValue":o[6]||(o[6]=r=>s(t).current_stock=r),type:"number",class:"mt-1 block w-full",min:"0",required:"",placeholder:"0"},null,8,["modelValue"]),l(c,{class:"mt-2",message:s(t).errors.current_stock},null,8,["message"]),s(t).current_stock!=i.element.current_stock?(f(),v("div",Y,[e("span",Z," ⚠️ Cambio de stock: "+a(i.element.current_stock)+" → "+a(s(t).current_stock)+" ("+a(s(t).current_stock-i.element.current_stock>0?"+":"")+a(s(t).current_stock-i.element.current_stock)+") ",1)])):b("",!0)]),e("div",null,[l(u,{for:"location",value:"Ubicación"}),l(k,{id:"location",modelValue:s(t).location,"onUpdate:modelValue":o[7]||(o[7]=r=>s(t).location=r),type:"text",class:"mt-1 block w-full",placeholder:"Ej: Estante A1, Almacén B"},null,8,["modelValue"]),l(c,{class:"mt-2",message:s(t).errors.location},null,8,["message"])])]),s(t).min_stock&&s(t).max_stock&&s(t).current_stock?(f(),v("div",ee,[o[20]||(o[20]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Vista Previa del Nuevo Estado de Stock:",-1)),e("div",te,[e("div",oe,[e("div",se,[e("div",{class:d(["h-2 rounded-full transition-all duration-300",h()]),style:$(`width: ${M()}%`)},null,6)])]),e("div",null,[e("span",{class:d(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",j()])},a(E()),3)])]),e("div",le,[e("span",null,"Mín: "+a(s(t).min_stock),1),e("span",null,"Actual: "+a(s(t).current_stock),1),e("span",null,"Máx: "+a(s(t).max_stock),1)])])):b("",!0),e("div",ne,[l(P,{type:"button",onClick:o[8]||(o[8]=r=>g.$inertia.visit(g.route("elements.show",i.element.id)))},{default:m(()=>o[21]||(o[21]=[p(" Cancelar ")])),_:1}),l(z,{class:d({"opacity-25":s(t).processing}),disabled:s(t).processing},{default:m(()=>[s(t).processing?(f(),v("svg",re,o[22]||(o[22]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):b("",!0),o[23]||(o[23]=p(" Actualizar Elemento "))]),_:1},8,["class","disabled"])])],32)])])])])]),_:1}))}};export{fe as default};
