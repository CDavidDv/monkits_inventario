import{T as z,h as V,c as E,w as x,o,a as e,t as i,b as u,f as m,u as n,i as B,d as a,n as v,e as c,p as U,j as A,v as D}from"./app-BGSGR9N6.js";import{_ as H}from"./AppLayout-zJCsKXdi.js";import{_ as k}from"./InputLabel-DLNuKxC2.js";import{_ as j}from"./TextInput-BvlQmvMm.js";import{_}from"./InputError-BL_jD_5_.js";import{_ as R}from"./PrimaryButton-BLC9AArS.js";import{_ as q}from"./SecondaryButton-f8yfzgoY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"flex justify-between items-center"},L={class:"font-semibold text-xl text-gray-800 leading-tight"},T={class:"flex space-x-2"},X={class:"py-12"},G={class:"max-w-3xl mx-auto sm:px-6 lg:px-8"},O={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},J={class:"p-6"},K={class:"mb-6 p-4 bg-blue-50 rounded-lg"},Q={class:"flex items-center justify-between"},W={class:"text-right"},Y={class:"text-sm font-medium text-blue-900"},Z={class:"text-xs text-blue-700"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},te={class:"p-4 bg-gray-50 rounded-lg"},se={class:"text-sm space-y-1"},le={class:"p-4 bg-gray-50 rounded-lg"},ie={class:"text-sm space-y-1"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},re={class:"mt-1 relative rounded-md shadow-sm"},oe={key:0,class:"mt-1 text-sm text-orange-600"},ae={class:"mt-1 relative rounded-md shadow-sm"},ce={key:0,class:"mt-1 text-sm text-orange-600"},de={key:0,class:"mt-1 text-sm text-orange-600"},ue={key:0,class:"mt-6 p-4 bg-orange-50 rounded-lg"},me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},pe={class:"space-y-2 text-sm"},ge={class:"flex justify-between"},xe={class:"font-medium"},ve={class:"flex justify-between"},fe={class:"font-medium"},ye={key:0,class:"flex justify-between"},be={key:1,class:"flex justify-between"},he={class:"font-medium"},Pe={class:"space-y-2 text-sm"},we={class:"flex justify-between"},ke={class:"font-medium"},_e={class:"flex justify-between"},Fe={class:"font-medium"},Ce={key:0,class:"flex justify-between"},Me={key:1,class:"flex justify-between"},$e={class:"font-medium"},Ve={key:1,class:"mt-6 p-4 bg-gray-50 rounded-lg"},je={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},Ne={class:"text-lg font-bold text-green-600"},Se={class:"text-lg font-bold text-purple-600"},ze={key:2,class:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},Ee={class:"flex items-center justify-end mt-6 space-x-3"},Be={key:0,class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Te={__name:"Edit",props:{elementPrice:Object},setup(l){const d=l,s=z({purchase_price:d.elementPrice.purchase_price||"",selling_price:d.elementPrice.selling_price||"",currency:d.elementPrice.currency}),h=V(()=>s.purchase_price!=d.elementPrice.purchase_price||s.selling_price!=d.elementPrice.selling_price||s.currency!==d.elementPrice.currency),N=V(()=>{if(!h.value)return!1;const r=parseFloat(d.elementPrice.purchase_price||0),t=parseFloat(s.purchase_price||0),g=parseFloat(d.elementPrice.selling_price||0),f=parseFloat(s.selling_price||0),y=Math.abs(t-r)/(r||1),b=Math.abs(f-g)/(g||1);return y>.1||b>.1}),P=()=>{const r=parseFloat(d.elementPrice.purchase_price||0),t=parseFloat(d.elementPrice.selling_price||0);return!r||!t?0:(t-r)/r*100},w=()=>{const r=parseFloat(s.purchase_price||0),t=parseFloat(s.selling_price||0);return!r||!t?0:(t-r)/r*100},F=()=>{const r=P();return r>=30?"text-green-600":r>=15?"text-blue-600":r>=5?"text-yellow-600":"text-red-600"},C=()=>{const r=w();return r>=30?"text-green-600":r>=15?"text-blue-600":r>=5?"text-yellow-600":"text-red-600"},S=()=>{s.put(route("element-prices.update",d.elementPrice.id),{onSuccess:()=>{}})};return(r,t)=>(o(),E(H,{title:"Editar Precio"},{header:x(()=>[e("div",I,[e("h2",L," Editar Precio: "+i(l.elementPrice.element.name)+" - "+i(l.elementPrice.supplier.name),1),e("div",T,[u(n(B),{href:r.route("element-prices.index"),class:"text-blue-600 hover:text-blue-800"},{default:x(()=>t[4]||(t[4]=[m(" ← Volver a la lista ")])),_:1},8,["href"])])])]),default:x(()=>{var g,f,y,b,M,$;return[e("div",X,[e("div",G,[e("div",O,[e("div",J,[e("div",K,[t[6]||(t[6]=e("h3",{class:"text-lg font-medium text-blue-900 mb-3"},"Relación Actual",-1)),e("div",Q,[t[5]||(t[5]=e("div",{class:"flex items-center space-x-4"},[e("div",{class:"text-center"},[e("div",{class:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center text-white font-bold"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])]),e("div",{class:"text-xs text-blue-700 mt-1"},"Elemento")]),e("div",{class:"text-blue-600"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])]),e("div",{class:"text-center"},[e("div",{class:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center text-white font-bold"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])]),e("div",{class:"text-xs text-green-700 mt-1"},"Proveedor")])],-1)),e("div",W,[e("div",Y,i(l.elementPrice.element.name)+" ← "+i(l.elementPrice.supplier.name),1),e("div",Z,i(l.elementPrice.currency)+" $"+i(((g=l.elementPrice.purchase_price)==null?void 0:g.toFixed(2))||"0.00")+" → $"+i(((f=l.elementPrice.selling_price)==null?void 0:f.toFixed(2))||"0.00"),1),l.elementPrice.purchase_price&&l.elementPrice.selling_price?(o(),a("div",{key:0,class:v(["text-xs font-medium",F()])}," Margen actual: "+i(P().toFixed(1))+"% ",3)):c("",!0)])])]),e("div",ee,[e("div",te,[t[11]||(t[11]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Información del Elemento",-1)),e("div",se,[e("div",null,[t[7]||(t[7]=e("strong",null,"Nombre:",-1)),m(" "+i(l.elementPrice.element.name),1)]),e("div",null,[t[8]||(t[8]=e("strong",null,"Categoría:",-1)),m(" "+i(l.elementPrice.element.category),1)]),e("div",null,[t[9]||(t[9]=e("strong",null,"Stock actual:",-1)),m(" "+i(l.elementPrice.element.current_stock)+" "+i(l.elementPrice.element.unit),1)]),e("div",null,[t[10]||(t[10]=e("strong",null,"Stock mínimo:",-1)),m(" "+i(l.elementPrice.element.min_stock),1)])])]),e("div",le,[t[16]||(t[16]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Información del Proveedor",-1)),e("div",ie,[e("div",null,[t[12]||(t[12]=e("strong",null,"Nombre:",-1)),m(" "+i(l.elementPrice.supplier.name),1)]),e("div",null,[t[13]||(t[13]=e("strong",null,"País:",-1)),m(" "+i(l.elementPrice.supplier.country),1)]),e("div",null,[t[14]||(t[14]=e("strong",null,"Contacto:",-1)),m(" "+i(l.elementPrice.supplier.contact||"No especificado"),1)]),e("div",null,[t[15]||(t[15]=e("strong",null,"Email:",-1)),m(" "+i(l.elementPrice.supplier.email||"No especificado"),1)])])])]),e("form",{onSubmit:U(S,["prevent"])},[e("div",ne,[e("div",null,[u(k,{for:"purchase_price",value:"Precio de Compra"}),e("div",re,[t[17]||(t[17]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),u(j,{id:"purchase_price",modelValue:n(s).purchase_price,"onUpdate:modelValue":t[0]||(t[0]=p=>n(s).purchase_price=p),type:"number",step:"0.01",min:"0",class:"pl-7 block w-full",placeholder:"0.00"},null,8,["modelValue"])]),u(_,{class:"mt-2",message:n(s).errors.purchase_price},null,8,["message"]),n(s).purchase_price!=l.elementPrice.purchase_price?(o(),a("div",oe," ⚠️ Cambio: $"+i(((y=l.elementPrice.purchase_price)==null?void 0:y.toFixed(2))||"0.00")+" → $"+i(parseFloat(n(s).purchase_price).toFixed(2)),1)):c("",!0)]),e("div",null,[u(k,{for:"selling_price",value:"Precio de Venta"}),e("div",ae,[t[18]||(t[18]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),u(j,{id:"selling_price",modelValue:n(s).selling_price,"onUpdate:modelValue":t[1]||(t[1]=p=>n(s).selling_price=p),type:"number",step:"0.01",min:"0",class:"pl-7 block w-full",placeholder:"0.00"},null,8,["modelValue"])]),u(_,{class:"mt-2",message:n(s).errors.selling_price},null,8,["message"]),n(s).selling_price!=l.elementPrice.selling_price?(o(),a("div",ce," ⚠️ Cambio: $"+i(((b=l.elementPrice.selling_price)==null?void 0:b.toFixed(2))||"0.00")+" → $"+i(parseFloat(n(s).selling_price).toFixed(2)),1)):c("",!0)]),e("div",null,[u(k,{for:"currency",value:"Moneda *"}),A(e("select",{id:"currency","onUpdate:modelValue":t[2]||(t[2]=p=>n(s).currency=p),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",required:""},t[19]||(t[19]=[e("option",{value:"MXN"},"MXN - Peso Mexicano",-1),e("option",{value:"USD"},"USD - Dólar Americano",-1),e("option",{value:"EUR"},"EUR - Euro",-1)]),512),[[D,n(s).currency]]),u(_,{class:"mt-2",message:n(s).errors.currency},null,8,["message"]),n(s).currency!==l.elementPrice.currency?(o(),a("div",de," ⚠️ Cambio de moneda: "+i(l.elementPrice.currency)+" → "+i(n(s).currency),1)):c("",!0)])]),h.value?(o(),a("div",ue,[t[30]||(t[30]=e("h4",{class:"text-sm font-medium text-orange-700 mb-3"},"Comparación de Cambios:",-1)),e("div",me,[e("div",null,[t[24]||(t[24]=e("h5",{class:"text-sm font-medium text-gray-700 mb-2"},"Valores Actuales:",-1)),e("div",pe,[e("div",ge,[t[20]||(t[20]=e("span",null,"Precio Compra:",-1)),e("span",xe,"$"+i(((M=l.elementPrice.purchase_price)==null?void 0:M.toFixed(2))||"0.00"),1)]),e("div",ve,[t[21]||(t[21]=e("span",null,"Precio Venta:",-1)),e("span",fe,"$"+i((($=l.elementPrice.selling_price)==null?void 0:$.toFixed(2))||"0.00"),1)]),l.elementPrice.purchase_price&&l.elementPrice.selling_price?(o(),a("div",ye,[t[22]||(t[22]=e("span",null,"Margen:",-1)),e("span",{class:v(["font-medium",F()])},i(P().toFixed(1))+"%",3)])):c("",!0),l.elementPrice.purchase_price?(o(),a("div",be,[t[23]||(t[23]=e("span",null,"Valor Stock:",-1)),e("span",he,"$"+i((l.elementPrice.element.current_stock*l.elementPrice.purchase_price).toFixed(2)),1)])):c("",!0)])]),e("div",null,[t[29]||(t[29]=e("h5",{class:"text-sm font-medium text-gray-700 mb-2"},"Nuevos Valores:",-1)),e("div",Pe,[e("div",we,[t[25]||(t[25]=e("span",null,"Precio Compra:",-1)),e("span",ke,"$"+i(parseFloat(n(s).purchase_price||0).toFixed(2)),1)]),e("div",_e,[t[26]||(t[26]=e("span",null,"Precio Venta:",-1)),e("span",Fe,"$"+i(parseFloat(n(s).selling_price||0).toFixed(2)),1)]),n(s).purchase_price&&n(s).selling_price?(o(),a("div",Ce,[t[27]||(t[27]=e("span",null,"Margen:",-1)),e("span",{class:v(["font-medium",C()])},i(w().toFixed(1))+"%",3)])):c("",!0),n(s).purchase_price?(o(),a("div",Me,[t[28]||(t[28]=e("span",null,"Valor Stock:",-1)),e("span",$e,"$"+i((l.elementPrice.element.current_stock*parseFloat(n(s).purchase_price)).toFixed(2)),1)])):c("",!0)])])])])):c("",!0),n(s).purchase_price&&n(s).selling_price?(o(),a("div",Ve,[t[34]||(t[34]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Cálculos Actualizados:",-1)),e("div",je,[e("div",null,[t[31]||(t[31]=e("span",{class:"text-gray-600 font-medium"},"Nuevo Margen:",-1)),e("div",{class:v(["text-lg font-bold",C()])},i(w().toFixed(2))+"% ",3)]),e("div",null,[t[32]||(t[32]=e("span",{class:"text-gray-600 font-medium"},"Ganancia por Unidad:",-1)),e("div",Ne," $"+i((parseFloat(n(s).selling_price)-parseFloat(n(s).purchase_price)).toFixed(2)),1)]),e("div",null,[t[33]||(t[33]=e("span",{class:"text-gray-600 font-medium"},"Nuevo Valor del Stock:",-1)),e("div",Se," $"+i((l.elementPrice.element.current_stock*parseFloat(n(s).purchase_price)).toFixed(2)),1)])])])):c("",!0),N.value?(o(),a("div",ze,t[35]||(t[35]=[e("div",{class:"flex"},[e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])]),e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-medium text-yellow-800"},"Cambios Significativos"),e("div",{class:"mt-2 text-sm text-yellow-700"}," Los cambios en los precios afectarán los cálculos de valor del inventario y los márgenes de ganancia. Asegúrate de que los nuevos precios sean correctos. ")])],-1)]))):c("",!0),e("div",Ee,[u(q,{type:"button",onClick:t[3]||(t[3]=p=>r.$inertia.visit(r.route("element-prices.index")))},{default:x(()=>t[36]||(t[36]=[m(" Cancelar ")])),_:1}),u(R,{class:v({"opacity-25":n(s).processing}),disabled:n(s).processing||!h.value},{default:x(()=>[n(s).processing?(o(),a("svg",Be,t[37]||(t[37]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):c("",!0),t[38]||(t[38]=m(" Actualizar Precio "))]),_:1},8,["class","disabled"])])],32)])])])])]}),_:1}))}};export{Te as default};
