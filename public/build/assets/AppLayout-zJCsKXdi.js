import{Q as ie,r as b,H as ue,o,d as l,n as u,a as e,e as v,t as x,p as R,h as J,c as V,w as m,B as O,u as w,i as ce,I as Q,q as Y,x as de,b as i,F as ve,g as he,J as Z,G as K,l as D,y as fe,Z as me,f as I,j as re,K as le}from"./app-BGSGR9N6.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ge={class:"max-w-screen-xl mx-auto py-2 px-3 sm:px-6 lg:px-8"},ye={class:"flex items-center justify-between flex-wrap"},we={class:"w-0 flex-1 flex items-center min-w-0"},xe={key:0,class:"h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},be={key:1,class:"h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},_e={class:"ms-3 font-medium text-sm text-white truncate"},ke={class:"shrink-0 sm:ms-3"},$e={__name:"Banner",setup(p){const h=ie(),s=b(!0),c=b("success"),g=b("");return ue(async()=>{var y,f;c.value=((y=h.props.jetstream.flash)==null?void 0:y.bannerStyle)||"success",g.value=((f=h.props.jetstream.flash)==null?void 0:f.banner)||"",s.value=!0}),(y,f)=>(o(),l("div",null,[s.value&&g.value?(o(),l("div",{key:0,class:u({"bg-indigo-500":c.value=="success","bg-red-700":c.value=="danger"})},[e("div",ge,[e("div",ye,[e("div",we,[e("span",{class:u(["flex p-2 rounded-lg",{"bg-indigo-600":c.value=="success","bg-red-600":c.value=="danger"}])},[c.value=="success"?(o(),l("svg",xe,f[1]||(f[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):v("",!0),c.value=="danger"?(o(),l("svg",be,f[2]||(f[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"},null,-1)]))):v("",!0)],2),e("p",_e,x(g.value),1)]),e("div",ke,[e("button",{type:"button",class:u(["-me-1 flex p-2 rounded-md focus:outline-none sm:-me-2 transition",{"hover:bg-indigo-600 focus:bg-indigo-600":c.value=="success","hover:bg-red-600 focus:bg-red-600":c.value=="danger"}]),"aria-label":"Dismiss",onClick:f[0]||(f[0]=R(k=>s.value=!1,["prevent"]))},f[3]||(f[3]=[e("svg",{class:"h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]),2)])])])],2)):v("",!0)]))}},L={__name:"NavLink",props:{href:String,active:Boolean,class:String},setup(p){const h=p,s=J(()=>{const c=h.active?"px-3 py-2 text-white w-full hover:rounded-lg  inline-flex items-center text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-orange-700 transition duration-150 ease-in-out bg-gray-700 rounded-lg overflow-hidden":"px-3 py-2 text-white w-full hover:rounded-xl inline-flex items-center text-sm font-medium leading-5 hover:bg-slate-100/30 hover:text-white hover:text-gray-700 hover:border-orange-300 focus:outline-none focus:border-yellow-300 transition overflow-hidden duration-900 ease-in-out",g=h.class?h.class:"";return`${c} ${g}`.trim()});return(c,g)=>(o(),V(w(ce),{href:p.href,class:u(s.value)},{default:m(()=>[O(c.$slots,"default")]),_:3},8,["href","class"]))}},N={__name:"ResponsiveNavLink",props:{active:Boolean,href:String,as:String},setup(p){const h=p,s=J(()=>h.active?"block pl-2 pe-4 py-2 border-l-4 border-indigo-600 text-start text-lg font-medium text-white bg-slate-500 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block pl-2 pe-4 py-2 border-l-4 border-transparent text-start text-lg font-medium text-white hover:text-gray-800 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(c,g)=>(o(),l("div",null,[p.as=="button"?(o(),l("button",{key:0,class:u([s.value,"w-full text-start"])},[O(c.$slots,"default")],2)):(o(),V(w(ce),{key:1,href:p.href,class:u(s.value)},{default:m(()=>[O(c.$slots,"default")]),_:3},8,["href","class"]))]))}};/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=p=>p.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var q={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=({size:p,strokeWidth:h=2,absoluteStrokeWidth:s,color:c,iconNode:g,name:y,class:f,...k},{slots:S})=>Q("svg",{...q,width:p||q.width,height:p||q.height,stroke:c||q.stroke,"stroke-width":s?Number(h)*24/Number(p):h,class:["lucide",`lucide-${Ce(y??"icon")}`],...k},[...g.map(E=>Q(...E)),...S.default?[S.default()]:[]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=(p,h)=>(s,{slots:c})=>Q(Me,{...s,iconNode:h,name:p},c);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=_("ArrowUpIcon",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=_("CarIcon",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=_("ChartColumnIcon",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=_("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=_("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=_("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=_("HistoryIcon",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=_("LogOutIcon",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=_("MenuIcon",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=_("MessageCircleIcon",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=_("PackageOpenIcon",[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=_("PackageIcon",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=_("ShieldIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=_("UserIcon",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=_("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Pe={class:"relative"},Ue={key:0,class:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-white bg-red-500 rounded-full min-w-[18px]"},qe={key:0,class:"absolute right-0 z-50 mt-2 w-96 bg-white rounded-md shadow-lg overflow-hidden ring-1 ring-black ring-opacity-5"},Re={class:"px-4 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between"},Ze={class:"flex items-center"},Je={key:0,class:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},Fe={class:"flex items-center space-x-2"},We={class:"max-h-96 overflow-y-auto"},Ge={key:0,class:"px-4 py-8 text-center text-gray-500"},Ke={key:1,class:"divide-y divide-gray-200"},Xe=["onClick"],Qe={class:"flex items-start"},Ye={class:"flex-shrink-0"},et={key:0,"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},tt={key:1,"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},st={key:2,"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},at={class:"ml-3 flex-1 min-w-0"},ot={class:"flex items-center justify-between"},rt={class:"text-sm font-medium text-gray-900"},lt={class:"text-xs text-gray-500"},nt={class:"text-sm text-gray-600 mt-1"},it={key:0,class:"mt-2 space-x-2"},ct={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},dt={key:0,class:"flex-shrink-0 ml-2"},ut={key:0,class:"px-4 py-3 bg-gray-50 border-t border-gray-200"},vt={key:0,class:"fixed top-4 right-4 z-50 max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden"},ht={class:"p-4"},ft={class:"flex items-start"},mt={class:"flex-shrink-0"},pt={class:"ml-3 w-0 flex-1 pt-0.5"},gt={class:"text-sm font-medium text-gray-900"},yt={class:"mt-1 text-sm text-gray-500"},ne={__name:"NotificationCenter",props:{initialNotifications:{type:Array,default:()=>[]}},setup(p){const s=b(p.initialNotifications||[]),c=b(!1),g=b(!1),y=b(null),f=b(5),k=J(()=>s.value.filter(a=>!a.read).length),S=()=>{c.value=!c.value},E=()=>{c.value=!1},F=a=>{var d;if(!a.read){a.read=!0;let r=a.id;a.id.toString().startsWith("alert_")&&(r=a.id.replace("alert_","")),((d=a.data)!=null&&d.alert_id||r!==a.id)&&K.post(`/api/notifications/${r}/mark-read`).catch(M=>{console.error("Error al marcar notificación como leída:",M),a.read=!1})}T(a)},A=()=>{const a=s.value.filter(d=>!d.read);a.forEach(d=>d.read=!0),K.post("/api/notifications/mark-all-read").catch(d=>{console.error("Error al marcar todas las notificaciones como leídas:",d),a.forEach(r=>r.read=!1)})},T=a=>{var d,r;E(),(d=a.data)!=null&&d.item_id?D.visit(`/items/${a.data.item_id}`):(r=a.data)!=null&&r.item?D.visit(`/items/${a.data.item.id}`):D.visit("/inventario")},$=async()=>{try{const a=await K.get("/api/notifications");a.data.success&&(s.value=a.data.data)}catch(a){console.error("Error cargando notificaciones:",a)}},P=()=>{D.visit("/notifications")},H=a=>{s.value.unshift(a),y.value=a,g.value=!0,setTimeout(()=>{g.value=!1},5e3),j()},W=()=>{g.value=!1},j=()=>{try{const a=new Audio("/sound/videoplayback.mp3");a.volume=.3,a.play().catch(d=>{console.log("No se pudo reproducir el sonido de notificación:",d)})}catch(a){console.log("Error al reproducir sonido:",a)}},U=a=>{switch(a.type){case"stock_alert":return"bg-red-100";case"success":return"bg-green-100";case"warning":return"bg-yellow-100";case"info":default:return"bg-blue-100"}},t=a=>{switch(a.type){case"stock_alert":return"text-red-600";case"success":return"text-green-600";case"warning":return"text-yellow-600";case"info":default:return"text-blue-600"}},n=a=>{const d=new Date,r=new Date(a),M=Math.floor((d-r)/(1e3*60));if(M<1)return"Ahora";if(M<60)return`${M}m`;const B=Math.floor(M/60);return B<24?`${B}h`:`${Math.floor(B/24)}d`};let C=null;return Y(async()=>{await $(),C=setInterval($,3e4),window.Echo&&window.Echo.channel("stock-alerts").listen(".stock.alert",a=>{const d={id:Date.now(),type:"stock_alert",title:"Alerta de Stock",message:a.alert.message,data:{element:a.alert.element,alert_type:a.alert.alert_type},read:!1,created_at:a.timestamp};H(d)})}),de(()=>{C&&clearInterval(C),window.Echo&&window.Echo.leaveChannel("stock-alerts")}),Y(()=>{document.addEventListener("click",a=>{a.target.closest(".relative")||(c.value=!1)})}),(a,d)=>(o(),l("div",Pe,[e("button",{onClick:S,class:"relative flex items-center justify-center w-8 h-8 text-gray-100 md:text-gray-700 hover:text-gray-500 md:hover:text-green-500 focus:outline-none focus:text-gray-700"},[i(w(Te),{class:"w-6 h-6"}),k.value>0?(o(),l("span",Ue,x(k.value>99?"99+":k.value),1)):v("",!0)]),i(Z,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:m(()=>[c.value?(o(),l("div",qe,[e("div",Re,[e("div",Ze,[d[0]||(d[0]=e("h3",{class:"text-lg font-medium text-gray-900"},"Notificaciones",-1)),k.value>0?(o(),l("span",Je,x(k.value)+" nuevas ",1)):v("",!0)]),e("div",Fe,[s.value.length>0?(o(),l("button",{key:0,onClick:A,class:"text-sm text-blue-600 hover:text-blue-800"}," Marcar todas como leídas ")):v("",!0),e("button",{onClick:E,class:"text-gray-400 hover:text-gray-600"},d[1]||(d[1]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])]),e("div",We,[s.value.length===0?(o(),l("div",Ge,d[2]||(d[2]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),e("p",{class:"text-sm"},"No hay notificaciones",-1)]))):(o(),l("div",Ke,[(o(!0),l(ve,null,he(s.value.slice(0,f.value),r=>(o(),l("div",{key:r.id,class:u(["px-4 py-3 hover:bg-gray-50 cursor-pointer transition-colors duration-150",{"bg-blue-50":!r.read}]),onClick:M=>F(r)},[e("div",Qe,[e("div",Ye,[e("div",{class:u(["w-8 h-8 rounded-full flex items-center justify-center",U(r)])},[(o(),l("svg",{class:u(["w-4 h-4",t(r)]),fill:"currentColor",viewBox:"0 0 20 20"},[r.type==="stock_alert"?(o(),l("path",et)):r.type==="info"?(o(),l("path",tt)):(o(),l("path",st))],2))],2)]),e("div",at,[e("div",ot,[e("p",rt,x(r.title),1),e("p",lt,x(n(r.created_at)),1)]),e("p",nt,x(r.message),1),r.data?(o(),l("div",it,[r.data.item?(o(),l("span",ct,x(r.data.item.name),1)):v("",!0),r.data.current_stock!==void 0?(o(),l("span",{key:1,class:u(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",{"bg-red-100 text-red-800":r.data.current_stock===0,"bg-orange-100 text-orange-800":r.data.current_stock>0&&r.data.current_stock<=r.data.min_stock*.5,"bg-yellow-100 text-yellow-800":r.data.current_stock>r.data.min_stock*.5&&r.data.current_stock<=r.data.min_stock}])}," Stock: "+x(r.data.current_stock)+" / "+x(r.data.min_stock),3)):v("",!0),r.data.alert_type?(o(),l("span",{key:2,class:u(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",{"bg-red-100 text-red-800":r.data.alert_type==="Agotado","bg-orange-100 text-orange-800":r.data.alert_type==="Crítico","bg-yellow-100 text-yellow-800":r.data.alert_type==="Mínimo","bg-blue-100 text-blue-800":r.data.alert_type==="Máximo"}])},x(r.data.alert_type),3)):v("",!0)])):v("",!0)]),r.read?v("",!0):(o(),l("div",dt,d[3]||(d[3]=[e("div",{class:"w-2 h-2 bg-blue-500 rounded-full"},null,-1)])))])],10,Xe))),128))]))]),s.value.length>f.value?(o(),l("div",ut,[e("button",{onClick:P,class:"w-full text-center text-sm text-blue-600 hover:text-blue-800 font-medium"}," Ver todas las notificaciones ("+x(s.value.length)+") ",1)])):v("",!0)])):v("",!0)]),_:1}),i(Z,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"transform translate-y-2 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform translate-y-2 opacity-0"},{default:m(()=>[g.value&&y.value?(o(),l("div",vt,[e("div",ht,[e("div",ft,[e("div",mt,[e("div",{class:u(["w-8 h-8 rounded-full flex items-center justify-center",U(y.value)])},[(o(),l("svg",{class:u(["w-4 h-4",t(y.value)]),fill:"currentColor",viewBox:"0 0 20 20"},d[4]||(d[4]=[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]),2))],2)]),e("div",pt,[e("p",gt,x(y.value.title),1),e("p",yt,x(y.value.message),1)]),e("div",{class:"ml-4 flex-shrink-0 flex"},[e("button",{onClick:W,class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none"},d[5]||(d[5]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):v("",!0)]),_:1})]))}},wt={},xt={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function bt(p,h){return o(),l("svg",xt,h[0]||(h[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1)]))}const _t=pe(wt,[["render",bt]]),kt={class:"flex h-screen bg-slate-800"},$t={class:"hidden md:block bg-white border-b border-gray-100 no-print"},Ct={class:"flex flex-col h-full"},Mt={class:"flex items-center justify-center"},zt=["title"],jt={class:"flex items-center justify-center"},Lt={class:"justify-between mt-4"},St={class:"pt-2 h gap-2"},Et={class:"flex h-full justify-between flex-col flex-1"},It={class:"mt-4 mb-1"},Nt={key:0,class:"text-white"},At={class:"text-sm font-bold"},Tt={class:"text-xs font-medium capitalize"},Bt={key:1,class:"flex items-center justify-center rounded-full"},Vt={class:"w-full justify-center sm:flex mb-6"},Ht={type:"submit",class:"text-white hover:text-gray-700 transition-colors duration-200"},Dt={class:"flex items-center gap-2"},Ot={class:"flex items-center gap-3"},Pt={key:0,class:"text-white"},Ut={class:"flex items-center gap-3"},qt={key:0},Rt={class:"flex items-center gap-3"},Zt={key:0},Jt={class:"flex items-center gap-3"},Ft={key:0},Wt={class:"flex items-center gap-3"},Gt={key:0},Kt={class:"flex items-center gap-3"},Xt={key:0},Qt={class:"flex items-center gap-3"},Yt={key:0},es={key:0,class:"pb-6"},ts={type:"submit",class:"w-full p-3 text-white hover:bg-white/20 rounded-lg transition-all duration-200 hover:scale-105 group border border-white/30",title:"Cerrar sesión"},ss={class:"flex flex-col h-full"},as={class:"flex items-center justify-between p-4 border-b border-white/20"},os={class:"flex-1"},rs={class:"p-4 border-t border-white/20"},ls={type:"submit",class:"w-full text-left text-white hover:bg-white/20 rounded-lg p-3 transition-colors duration-200"},ns={class:"flex items-center gap-3"},is={class:"flex-1 flex flex-col overflow-hidden"},cs={class:"md:hidden bg-[#80aa40] text-white px-4 py-2 border-b border-white/20 header-mobile fixed top-0 left-0 right-0 z-50"},ds={class:"flex items-center justify-between"},us={class:"text-white"},vs={class:"md:hidden fixed top-4 right-4 z-50"},hs={class:"bg-[#80aa40]/90 backdrop-blur-sm text-white p-2 rounded-full shadow-lg border border-white/20"},fs={key:0,class:"bg-white shadow-2xl border border-b-4 relative"},ms={class:"max-w-7xl mx-auto md:py-6 md:px-14 sm:px-6"},ps={class:"flex items-center justify-between"},gs={class:"flex-1"},ys={class:"hidden md:block ml-4"},bs={__name:"AppLayout",props:{title:String},setup(p){const h=b(!1),s=b(!1),c=b(!0),g=b(0),y=b(null),f=b(null),k=b(!1),S=()=>{k.value=window.innerWidth<768},E=()=>{try{const t=localStorage.getItem("sidebarCollapsed");if(t!==null){const n=JSON.parse(t);s.value=n}}catch(t){console.error("Error loading sidebar state from localStorage:",t),s.value=!1}},F=t=>{try{localStorage.setItem("sidebarCollapsed",JSON.stringify(t))}catch(n){console.error("Error saving sidebar state to localStorage:",n)}},A=()=>{const t=window.pageYOffset||document.documentElement.scrollTop;t>g.value&&t>100?c.value=!1:t<g.value&&(c.value=!0),g.value=t,y.value&&clearTimeout(y.value),y.value=setTimeout(()=>{t>100&&(c.value=!1)},3e3),T()},T=()=>{f.value&&clearTimeout(f.value),f.value=setTimeout(()=>{g.value>100&&(c.value=!1)},5e3)},$=()=>{c.value=!0,T()},P=()=>{S(),window.innerWidth>=768?(c.value=!0,window.removeEventListener("scroll",A),document.removeEventListener("touchstart",$),document.removeEventListener("mousemove",$),y.value&&clearTimeout(y.value),f.value&&clearTimeout(f.value)):(window.addEventListener("scroll",A,{passive:!0}),document.addEventListener("touchstart",$),document.addEventListener("mousemove",$),T())};Y(()=>{try{Object.keys(localStorage).forEach(n=>{if(n.includes("inertia")||n.includes("scroll"))try{const C=localStorage.getItem(n);JSON.parse(C)}catch{localStorage.removeItem(n)}})}catch(t){console.warn("Error cleaning localStorage:",t)}E(),setTimeout(()=>{E()},100),window.innerWidth<768&&(window.addEventListener("scroll",A,{passive:!0}),document.addEventListener("touchstart",$),document.addEventListener("mousemove",$),T()),window.addEventListener("resize",P),S()}),de(()=>{y.value&&clearTimeout(y.value),f.value&&clearTimeout(f.value),window.removeEventListener("scroll",A),document.removeEventListener("touchstart",$),document.removeEventListener("mousemove",$),window.removeEventListener("resize",P)}),fe(s,t=>{F(t)},{immediate:!1});const H=()=>{D.post(route("logout"))},W=()=>{s.value=!s.value},{props:j}=ie(),U=J(()=>{var t,n;try{return(n=(t=j==null?void 0:j.auth)==null?void 0:t.user)!=null&&n.roles&&Array.isArray(j.auth.user.roles)&&j.auth.user.roles.length>0?j.auth.user.roles[0]:null}catch(C){return console.warn("Error accessing user role:",C),null}});return(t,n)=>{var C,a,d,r,M,B,G,ee,te,se,ae,oe;return o(),l("div",null,[i(w(me),{title:p.title},null,8,["title"]),i($e),e("div",kt,[e("nav",$t,[e("div",{class:u(["h-full flex flex-col justify-around min-h-screen bg-[#80aa40] px-4 transition-all duration-300 ease-in-out sidebar-collapsed",s.value?"max-w-[80px] min-w-[80px]":"max-w-[300px] min-w-[300px]"])},[e("div",Ct,[e("div",Mt,[e("button",{onClick:W,class:"mt-6 p-3 text-white hover:bg-white/20 rounded-lg transition-all duration-200 border border-white/50 hover:border-white/40 group collapse-button w-full",title:s.value?"Expandir sidebar":"Colapsar sidebar"},[e("div",jt,[s.value?(o(),V(w(Ee),{key:1,class:"h-5 w-5 transform group-hover:scale-110 transition-transform"})):(o(),V(w(Se),{key:0,class:"h-5 w-5 transform group-hover:scale-110 transition-transform duration-200"}))])],8,zt)]),e("div",Lt,[e("div",St,[e("div",Et,[e("div",It,[e("div",{class:u([s.value?"":"gap-3 p-3 bg-white/10","flex h-16 justify-around items-center rounded-lg"])},[e("div",{class:u([s.value?"w-full h-12":"w-10 h-full ","bg-white/20 rounded-full flex items-center justify-center"])},[i(w(De),{class:"size-5 text-white"})],2),s.value?v("",!0):(o(),l("div",Nt,[e("p",At,x(((d=(a=(C=t.$page.props)==null?void 0:C.auth)==null?void 0:a.user)==null?void 0:d.name)||"Usuario"),1),e("p",Tt,x(((r=U.value)==null?void 0:r.name)||"Usuario"),1)])),s.value?v("",!0):(o(),l("div",Bt,[i(L,{href:t.route("profile.show"),active:t.route().current("profile.show"),class:u([s.value?"justify-center":"justify-start","text-white hover:bg-white/20 rounded-lg transition-colors duration-200"])},{default:m(()=>[i(_t,{class:"text-white"})]),_:1},8,["href","active","class"])]))],2)]),e("div",Vt,[s.value?v("",!0):(o(),l("form",{key:0,onSubmit:R(H,["prevent"])},[e("button",Ht,[e("div",Dt,[i(w(X),{class:"h-5 w-5"}),n[3]||(n[3]=e("span",null,"Cerrar sesión",-1))])])],32))]),i(L,{href:t.route("dashboard"),active:t.route().current("dashboard"),class:u([s.value?"justify-center":"justify-start","text-white hover:bg-white/20 rounded-lg transition-colors duration-200"])},{default:m(()=>[e("div",Ot,[e("div",{class:u(["text-white size-8",s.value?"mr-0":"mr-3"])},[i(w(Le),{class:"size-full text-white"})],2),s.value?v("",!0):(o(),l("span",Pt,"Dashboard"))])]),_:1},8,["href","active","class"]),i(L,{href:t.route("inventario.index"),active:t.route().current("inventario.*"),class:u([s.value?"justify-center":"justify-start","text-white hover:bg-white/20 rounded-lg transition-colors duration-200"])},{default:m(()=>[e("div",Ut,[e("div",{class:u(["text-white size-8",s.value?"mr-0":"mr-3"])},[i(w(Ve),{class:"size-full text-white"})],2),s.value?v("",!0):(o(),l("span",qt,"Inventario"))])]),_:1},8,["href","active","class"]),i(L,{href:t.route("supervisor.dashboard"),active:t.route().current("supervisor.*"),class:u([s.value?"justify-center":"justify-start","text-white hover:bg-white/20 rounded-lg transition-colors duration-200"])},{default:m(()=>[e("div",Rt,[e("div",{class:u(["text-white size-8",s.value?"mr-0":"mr-3"])},[i(w(Ie),{class:"size-full text-white"})],2),s.value?v("",!0):(o(),l("span",Zt,"Supervisor"))])]),_:1},8,["href","active","class"]),i(L,{href:t.route("production.index"),active:t.route().current("production.*"),class:u([s.value?"justify-center":"justify-start","text-white hover:bg-white/20 rounded-lg transition-colors duration-200"])},{default:m(()=>[e("div",Jt,[e("div",{class:u(["text-white size-8",s.value?"mr-0":"mr-3"])},[i(w(Be),{class:"size-full text-white"})],2),s.value?v("",!0):(o(),l("span",Ft,"Producción"))])]),_:1},8,["href","active","class"]),i(L,{href:t.route("suppliers.index"),active:t.route().current("suppliers.*"),class:u([s.value?"justify-center":"justify-start","text-white hover:bg-white/20 rounded-lg transition-colors duration-200"])},{default:m(()=>[e("div",Wt,[e("div",{class:u(["text-white size-8",s.value?"mr-0":"mr-3"])},[i(w(je),{class:"size-full text-white"})],2),s.value?v("",!0):(o(),l("span",Gt,"Distribuidores"))])]),_:1},8,["href","active","class"]),i(L,{href:t.route("inventory-movements.index"),active:t.route().current("inventory-movements.*"),class:u([s.value?"justify-center":"justify-start","text-white hover:bg-white/20 rounded-lg transition-colors duration-200"])},{default:m(()=>[e("div",Kt,[e("div",{class:u(["text-white size-8",s.value?"mr-0":"mr-3"])},[i(w(Ne),{class:"size-full text-white"})],2),s.value?v("",!0):(o(),l("span",Xt,"Movimientos"))])]),_:1},8,["href","active","class"]),(ee=(G=(B=(M=t.$page.props)==null?void 0:M.auth)==null?void 0:B.user)==null?void 0:G.roles)!=null&&ee.some(z=>(z==null?void 0:z.name)==="admin")?(o(),V(L,{key:0,href:t.route("system-logs.index"),active:t.route().current("system-logs.*"),class:u([s.value?"justify-center":"justify-start","text-white hover:bg-white/20 rounded-lg transition-colors duration-200"])},{default:m(()=>[e("div",Qt,[e("div",{class:u(["text-white size-8",s.value?"mr-0":"mr-3"])},[i(w(He),{class:"size-full text-white"})],2),s.value?v("",!0):(o(),l("span",Yt,"Auditoría"))])]),_:1},8,["href","active","class"])):v("",!0)])])])]),s.value?(o(),l("div",es,[e("form",{onSubmit:R(H,["prevent"])},[e("button",ts,[i(w(X),{class:"h-6 w-6 mx-auto group-hover:translate-x-1 transition-transform duration-200"})])],32)])):v("",!0)],2)]),h.value?(o(),l("div",{key:0,class:"fixed inset-0 z-40 md:hidden sidebar-overlay",onClick:n[0]||(n[0]=z=>h.value=!1)},n[4]||(n[4]=[e("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75"},null,-1)]))):v("",!0),e("div",{class:u(["fixed inset-y-0 left-0 z-50 w-64 bg-[#80aa40] transform transition-transform duration-300 ease-in-out md:hidden sidebar-mobile",h.value?"translate-x-0":"-translate-x-full"])},[e("div",ss,[e("div",as,[e("button",{onClick:n[1]||(n[1]=z=>h.value=!1),class:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors duration-200"},[i(w(Oe),{class:"h-6 w-6"})])]),e("div",os,[i(N,{href:t.route("profile.show"),active:t.route().current("profile.show"),class:"text-white hover:bg-white/20 rounded-lg"},{default:m(()=>n[5]||(n[5]=[I(" Perfil ")])),_:1},8,["href","active"]),i(N,{href:t.route("dashboard"),active:t.route().current("dashboard"),class:"text-white hover:bg-white/20 rounded-lg"},{default:m(()=>n[6]||(n[6]=[I(" Dashboard ")])),_:1},8,["href","active"]),i(N,{href:t.route("inventario.index"),active:t.route().current("inventario.*"),class:"text-white hover:bg-white/20 rounded-lg"},{default:m(()=>n[7]||(n[7]=[I(" Inventario ")])),_:1},8,["href","active"]),i(N,{href:t.route("supervisor.dashboard"),active:t.route().current("supervisor.*"),class:"text-white hover:bg-white/20 rounded-lg"},{default:m(()=>n[8]||(n[8]=[I(" Supervisor ")])),_:1},8,["href","active"]),i(N,{href:t.route("production.index"),active:t.route().current("production.*"),class:"text-white hover:bg-white/20 rounded-lg"},{default:m(()=>n[9]||(n[9]=[I(" Producción ")])),_:1},8,["href","active"]),i(N,{href:t.route("inventory-movements.index"),active:t.route().current("inventory-movements.*"),class:"text-white hover:bg-white/20 rounded-lg"},{default:m(()=>n[10]||(n[10]=[I(" Movimientos ")])),_:1},8,["href","active"]),(oe=(ae=(se=(te=t.$page.props)==null?void 0:te.auth)==null?void 0:se.user)==null?void 0:ae.roles)!=null&&oe.some(z=>(z==null?void 0:z.name)==="admin")?(o(),V(N,{key:0,href:t.route("system-logs.index"),active:t.route().current("system-logs.*"),class:"text-white hover:bg-white/20 rounded-lg"},{default:m(()=>n[11]||(n[11]=[I(" Auditoría ")])),_:1},8,["href","active"])):v("",!0)]),e("div",rs,[e("form",{onSubmit:R(H,["prevent"])},[e("button",ls,[e("div",ns,[i(w(X),{class:"h-5 w-5"}),n[12]||(n[12]=e("span",null,"Cerrar sesión",-1))])])],32)])])],2),e("div",is,[i(Z,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"transform -translate-y-full opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform -translate-y-full opacity-0"},{default:m(()=>[re(e("header",cs,[e("div",ds,[e("button",{onClick:n[2]||(n[2]=z=>h.value=!0),class:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors duration-200"},[i(w(Ae),{class:"h-6 w-6"})]),e("div",us,[i(ne)])])],512),[[le,c.value]])]),_:1}),i(Z,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:m(()=>[re(e("div",vs,[e("div",hs,[i(w(ze),{class:"h-5 w-5 animate-bounce"})])],512),[[le,!c.value&&g.value>100]])]),_:1}),t.$slots.header?(o(),l("header",fs,[e("div",ms,[e("div",ps,[e("div",gs,[O(t.$slots,"header")]),e("div",ys,[i(ne)])])])])):v("",!0),e("main",{class:u(["flex-1 overflow-auto bg-gray-50 main-content",{"pt-16":c.value&&k.value}])},[O(t.$slots,"default")],2)])])])}}};export{Ie as E,Ve as P,He as S,Oe as X,bs as _,_ as c};
