import{r as N,T,c as q,w as u,o as n,a as t,t as i,u as o,i as _,f as x,e as f,b as m,n as v,d as r,g as h,F as k}from"./app-Bbm6nPfF.js";import{_ as z}from"./AppLayout-BVLftzrV.js";import{_ as P}from"./DialogModal-DMYvAiPL.js";import{_ as $}from"./InputLabel-BnPyyqhe.js";import{_ as E}from"./TextInput-3LTJMV0m.js";import{_ as S}from"./InputError-BwEQXkyc.js";import{_ as H}from"./PrimaryButton-C4b6_sBe.js";import{_ as L}from"./SecondaryButton-lqUrONvz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-BHoNVWH2.js";const M={class:"flex justify-between items-center"},R={class:"font-semibold text-xl text-gray-800 leading-tight"},I={class:"flex space-x-2"},O={class:"py-12"},U={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},G={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},J={class:"lg:col-span-2 bg-white overflow-hidden shadow-xl sm:rounded-lg"},Q={class:"p-6"},W={class:"flex items-center justify-between mb-4"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Y={class:"mt-1 text-sm text-gray-900"},Z={key:0},tt={class:"mt-1"},et={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},st={key:1,class:"md:col-span-2"},it={class:"mt-1 text-sm text-gray-900"},lt={class:"mt-1 text-sm text-gray-900"},at={class:"mt-1 text-sm text-gray-900"},nt={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},ot={class:"p-6"},dt={class:"space-y-4"},rt={class:"text-center"},mt={class:"grid grid-cols-2 gap-4 text-sm"},ut={class:"font-medium text-green-600"},ct={class:"font-medium text-blue-600"},xt={key:0,class:"pt-4 border-t"},gt={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mb-6"},ft={class:"p-6"},yt={class:"overflow-x-auto"},bt={class:"min-w-full divide-y divide-gray-200"},vt={class:"bg-white divide-y divide-gray-200"},pt={class:"px-6 py-4 whitespace-nowrap"},_t={class:"flex items-center"},ht={class:"text-sm font-medium text-gray-900"},kt={class:"text-sm text-gray-500"},wt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ct={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},qt={class:"px-6 py-4 whitespace-nowrap"},$t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Et={key:0},St={class:"text-sm font-medium text-green-600"},Vt={class:"text-xs text-gray-500"},jt={key:1,class:"text-sm text-gray-400"},At={key:0,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Dt={class:"p-6"},Ft={class:"space-y-3"},Kt={class:"font-medium"},Bt={class:"text-sm text-gray-500"},Nt={class:"text-right"},Tt={class:"font-bold text-green-600"},zt={class:"text-sm text-gray-500"},Pt={class:"space-y-4"},Ht={class:"text-center p-4 bg-gray-50 rounded-lg mb-4"},Lt={class:"text-2xl font-bold text-green-600"},Mt={class:"p-4 bg-blue-50 rounded-lg"},Rt={class:"space-y-2"},It={class:"font-medium"},Ot={class:"mt-3 pt-2 border-t border-blue-200"},Ut={class:"flex justify-between font-medium text-blue-900"},ie={__name:"Show",props:{kit:Object,recentAssemblies:Array},setup(l){const c=l,g=N(!1),d=T({quantity:1,reason:""}),V=()=>c.kit.can_be_assembled?(c.kit.max_assemblies||0)===0?"text-gray-600":"text-green-600":"text-red-600",j=()=>c.kit.can_be_assembled?(c.kit.max_assemblies||0)===0?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800":"bg-red-100 text-red-800",A=()=>c.kit.can_be_assembled?(c.kit.max_assemblies||0)===0?"Sin Stock":"Disponible":"No Disponible",D=a=>a.element.current_stock>=a.quantity?"Disponible":a.element.current_stock===0?"Agotado":"Insuficiente",F=a=>a.element.current_stock>=a.quantity?"bg-green-100 text-green-800":a.element.current_stock===0?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800",K=a=>!a.element.prices||a.element.prices.length===0?0:a.element.prices.reduce((y,b)=>y+(b.purchase_price||0),0)/a.element.prices.length*a.quantity,p=a=>new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),B=()=>{d.post(route("inventory-kits.assemble",c.kit.id),{onSuccess:()=>{g.value=!1,d.reset()}})};return(a,e)=>(n(),q(z,{title:"Detalles del Kit"},{header:u(()=>[t("div",M,[t("h2",R,i(l.kit.name),1),t("div",I,[a.$page.props.auth.user.permissions.includes("edit kits")?(n(),q(o(_),{key:0,href:a.route("inventory-kits.edit",l.kit.id),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"},{default:u(()=>e[5]||(e[5]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),x(" Editar ")])),_:1},8,["href"])):f("",!0),m(o(_),{href:a.route("inventory-kits.index"),class:"text-blue-600 hover:text-blue-800"},{default:u(()=>e[6]||(e[6]=[x(" ← Volver a la lista ")])),_:1},8,["href"])])])]),default:u(()=>{var y,b;return[t("div",O,[t("div",U,[t("div",G,[t("div",J,[t("div",Q,[t("div",W,[e[7]||(e[7]=t("h3",{class:"text-lg font-medium text-gray-900"},"Información del Kit",-1)),t("span",{class:v(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",j()])},i(A()),3)]),t("div",X,[t("div",null,[e[8]||(e[8]=t("dt",{class:"text-sm font-medium text-gray-500"},"Nombre",-1)),t("dd",Y,i(l.kit.name),1)]),l.kit.category?(n(),r("div",Z,[e[9]||(e[9]=t("dt",{class:"text-sm font-medium text-gray-500"},"Categoría",-1)),t("dd",tt,[t("span",et,i(l.kit.category),1)])])):f("",!0),l.kit.description?(n(),r("div",st,[e[10]||(e[10]=t("dt",{class:"text-sm font-medium text-gray-500"},"Descripción",-1)),t("dd",it,i(l.kit.description),1)])):f("",!0),t("div",null,[e[11]||(e[11]=t("dt",{class:"text-sm font-medium text-gray-500"},"Total Componentes",-1)),t("dd",lt,i(l.kit.kit_components.length)+" elementos",1)]),t("div",null,[e[12]||(e[12]=t("dt",{class:"text-sm font-medium text-gray-500"},"Fechas",-1)),t("dd",at," Creado: "+i(p(l.kit.created_at))+" | Actualizado: "+i(p(l.kit.updated_at)),1)])])])]),t("div",nt,[t("div",ot,[e[16]||(e[16]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Estado del Kit",-1)),t("div",dt,[t("div",rt,[t("div",{class:v(["text-3xl font-bold",V()])},i(l.kit.max_assemblies||0),3),e[13]||(e[13]=t("div",{class:"text-sm text-gray-500"},"Kits disponibles",-1))]),t("div",mt,[t("div",null,[e[14]||(e[14]=t("dt",{class:"text-gray-500"},"Costo Total",-1)),t("dd",ut,"$"+i(((y=l.kit.total_cost)==null?void 0:y.toFixed(2))||"0.00"),1)]),t("div",null,[e[15]||(e[15]=t("dt",{class:"text-gray-500"},"Precio Venta",-1)),t("dd",ct,"$"+i(((b=l.kit.total_selling_price)==null?void 0:b.toFixed(2))||"0.00"),1)])]),a.$page.props.auth.user.permissions.includes("assemble kits")&&l.kit.can_be_assembled?(n(),r("div",xt,[t("button",{onClick:e[0]||(e[0]=s=>g.value=!0),class:"w-full bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"}," Ensamblar Kit ")])):f("",!0)])])])]),t("div",gt,[t("div",ft,[e[18]||(e[18]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Componentes del Kit",-1)),t("div",yt,[t("table",bt,[e[17]||(e[17]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Elemento "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Cantidad Requerida "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Stock Disponible "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Costo ")])],-1)),t("tbody",vt,[(n(!0),r(k,null,h(l.kit.kit_components,s=>(n(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",pt,[t("div",_t,[t("div",null,[t("div",ht,[m(o(_),{href:a.route("elements.show",s.element.id),class:"text-blue-600 hover:text-blue-800"},{default:u(()=>[x(i(s.element.name),1)]),_:2},1032,["href"])]),t("div",kt,i(s.element.category),1)])])]),t("td",wt,i(s.quantity)+" "+i(s.element.unit),1),t("td",Ct,i(s.element.current_stock)+" "+i(s.element.unit),1),t("td",qt,[t("span",{class:v(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",F(s)])},i(D(s)),3)]),t("td",$t,[s.element.prices&&s.element.prices.length>0?(n(),r("div",Et,[t("div",St," $"+i(K(s).toFixed(2)),1),t("div",Vt," por "+i(s.quantity)+" "+i(s.element.unit),1)])):(n(),r("div",jt," Sin precio "))])]))),128))])])])])]),l.recentAssemblies&&l.recentAssemblies.length>0?(n(),r("div",At,[t("div",Dt,[e[19]||(e[19]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Historial de Ensamblajes Recientes",-1)),t("div",Ft,[(n(!0),r(k,null,h(l.recentAssemblies,s=>{var w,C;return n(),r("div",{key:s.id,class:"flex justify-between items-center p-3 bg-gray-50 rounded-lg"},[t("div",null,[t("div",Kt,i(s.concept||"Ensamblaje de kit"),1),t("div",Bt,i(p(s.movement_date||s.created_at))+" por "+i(((w=s.user)==null?void 0:w.name)||"Sistema"),1)]),t("div",Nt,[t("div",Tt,i(Math.abs(s.quantity))+" kits ",1),t("div",zt," $"+i(((C=s.total_cost)==null?void 0:C.toFixed(2))||"0.00"),1)])])}),128))])])])):f("",!0)])]),m(P,{show:g.value,onClose:e[4]||(e[4]=s=>g.value=!1)},{title:u(()=>[x(" Ensamblar Kit - "+i(l.kit.name),1)]),content:u(()=>[t("div",Pt,[t("div",Ht,[e[20]||(e[20]=t("div",{class:"text-sm text-gray-500"},"Kits disponibles para ensamblar",-1)),t("div",Lt,i(l.kit.max_assemblies),1)]),t("div",null,[m($,{for:"quantity",value:"Cantidad a Ensamblar"}),m(E,{id:"quantity",modelValue:o(d).quantity,"onUpdate:modelValue":e[1]||(e[1]=s=>o(d).quantity=s),type:"number",max:l.kit.max_assemblies,min:"1",class:"mt-1 block w-full",placeholder:"1"},null,8,["modelValue","max"]),m(S,{class:"mt-2",message:o(d).errors.quantity},null,8,["message"])]),t("div",null,[m($,{for:"reason",value:"Razón del Ensamblaje (Opcional)"}),m(E,{id:"reason",modelValue:o(d).reason,"onUpdate:modelValue":e[2]||(e[2]=s=>o(d).reason=s),type:"text",class:"mt-1 block w-full",placeholder:"Ej: Pedido especial, Producción programada"},null,8,["modelValue"]),m(S,{class:"mt-2",message:o(d).errors.reason},null,8,["message"])]),t("div",Mt,[e[22]||(e[22]=t("h4",{class:"font-medium text-blue-900 mb-2"},"Componentes que se utilizarán:",-1)),t("div",Rt,[(n(!0),r(k,null,h(l.kit.kit_components,s=>(n(),r("div",{key:s.id,class:"flex justify-between text-sm"},[t("span",null,i(s.element.name),1),t("span",It,i(s.quantity*(o(d).quantity||1))+" "+i(s.element.unit),1)]))),128))]),t("div",Ot,[t("div",Ut,[e[21]||(e[21]=t("span",null,"Costo Total:",-1)),t("span",null,"$"+i(((l.kit.total_cost||0)*(o(d).quantity||1)).toFixed(2)),1)])])])])]),footer:u(()=>[m(L,{onClick:e[3]||(e[3]=s=>g.value=!1)},{default:u(()=>e[23]||(e[23]=[x(" Cancelar ")])),_:1}),m(H,{class:v(["ml-3",{"opacity-25":o(d).processing}]),onClick:B,disabled:o(d).processing},{default:u(()=>e[24]||(e[24]=[x(" Ensamblar ")])),_:1},8,["class","disabled"])]),_:1},8,["show"])]}),_:1}))}};export{ie as default};
