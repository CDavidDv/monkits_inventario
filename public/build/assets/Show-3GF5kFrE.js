import{r as N,T as E,c as h,w as u,o as d,a as e,t as s,u as i,i as b,f as x,e as f,b as m,n as g,d as a,z as D,F as _,g as k}from"./app-BGSGR9N6.js";import{_ as P}from"./AppLayout-zJCsKXdi.js";import{_ as U}from"./DialogModal-BUEMMMIU.js";import{_ as p}from"./InputLabel-DLNuKxC2.js";import{_ as w}from"./TextInput-BvlQmvMm.js";import{_ as j}from"./InputError-BL_jD_5_.js";import{_ as F}from"./PrimaryButton-BLC9AArS.js";import{_ as q}from"./SecondaryButton-f8yfzgoY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-B1_DHglY.js";const H={class:"flex justify-between items-center"},I={class:"font-semibold text-xl text-gray-800 leading-tight"},L={class:"flex space-x-2"},R={class:"py-12"},T={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},O={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},G={class:"lg:col-span-2 bg-white overflow-hidden shadow-xl sm:rounded-lg"},J={class:"p-6"},K={class:"flex items-center justify-between mb-4"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},W={class:"mt-1 text-sm text-gray-900"},X={class:"mt-1"},Y={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},Z={key:0,class:"md:col-span-2"},ee={class:"mt-1 text-sm text-gray-900"},te={class:"mt-1 text-sm text-gray-900"},se={key:1},ne={class:"mt-1 text-sm text-gray-900"},oe={class:"md:col-span-2"},le={class:"mt-1 text-sm text-gray-900"},de={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},re={class:"p-6"},ie={class:"space-y-4"},ae={class:"text-center"},ce={class:"text-sm text-gray-500"},me={class:"w-full bg-gray-200 rounded-full h-3"},ue={class:"grid grid-cols-2 gap-4 text-sm"},ge={class:"font-medium"},xe={class:"font-medium"},fe={key:0,class:"pt-4 border-t"},ve={key:0,class:"mb-6"},ye={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},_e={class:"p-6"},ke={class:"space-y-2"},he={class:"flex items-center"},be={class:"font-medium"},pe={class:"text-sm opacity-75"},we={class:"px-2 py-1 text-xs font-semibold rounded-full bg-white bg-opacity-20"},je={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ae={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Se={class:"p-6"},Ce={key:0,class:"space-y-4"},Me={class:"flex justify-between items-start mb-2"},$e={class:"font-medium"},Ve={class:"text-sm text-gray-500"},ze={class:"text-right"},Be={class:"text-sm text-gray-500"},Ne={class:"grid grid-cols-2 gap-4 text-sm"},Ee={class:"font-medium text-green-600"},De={class:"font-medium text-blue-600"},Pe={key:1,class:"text-center text-gray-500 py-4"},Ue={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Fe={class:"p-6"},qe={key:0,class:"space-y-3"},He={class:"font-medium"},Ie={class:"text-sm text-gray-500"},Le={class:"text-right"},Re={class:"text-sm text-gray-500"},Te={key:1,class:"text-center text-gray-500 py-4"},Oe={class:"mb-4"},Ge={class:"text-center p-4 bg-gray-50 rounded-lg mb-4"},Je={class:"text-2xl font-bold"},Ke={class:"space-y-4"},Qe={key:0,class:"p-3 bg-blue-50 rounded-lg"},We={class:"text-sm"},rt={__name:"Show",props:{element:Object,recentMovements:Array,recentAlerts:Array},setup(n){const o=n,v=N(!1),r=E({stock_adjustment:"",reason:""}),A=()=>o.element.current_stock<=0?"text-red-600":o.element.current_stock<=o.element.min_stock?"text-yellow-600":o.element.current_stock>=o.element.max_stock&&o.element.max_stock>0?"text-purple-600":"text-green-600",S=()=>o.element.current_stock<=0?"bg-red-100 text-red-800":o.element.current_stock<=o.element.min_stock?"bg-yellow-100 text-yellow-800":o.element.current_stock>=o.element.max_stock&&o.element.max_stock>0?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800",C=()=>o.element.current_stock<=0?"Agotado":o.element.current_stock<=o.element.min_stock?"Stock Bajo":o.element.current_stock>=o.element.max_stock&&o.element.max_stock>0?"Sobre Stock":"Normal",M=()=>o.element.current_stock<=0?"bg-red-500":o.element.current_stock<=o.element.min_stock?"bg-yellow-500":o.element.current_stock>=o.element.max_stock&&o.element.max_stock>0?"bg-purple-500":"bg-green-500",$=()=>!o.element.max_stock||o.element.max_stock===0?50:Math.min(o.element.current_stock/o.element.max_stock*100,100),V=c=>{switch(c){case"Agotado":return"bg-red-100 text-red-800";case"Crítico":return"bg-orange-100 text-orange-800";case"Mínimo":return"bg-yellow-100 text-yellow-800";case"Máximo":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},z=c=>{switch(c){case"Agotado":return"text-red-600";case"Crítico":return"text-orange-600";case"Mínimo":return"text-yellow-600";case"Máximo":return"text-purple-600";default:return"text-gray-600"}},y=c=>new Date(c).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),B=()=>{r.post(route("elements.update-stock",o.element.id),{onSuccess:()=>{v.value=!1,r.reset()}})};return(c,t)=>(d(),h(P,{title:"Detalles del Elemento"},{header:u(()=>[e("div",H,[e("h2",I,s(n.element.name),1),e("div",L,[c.$page.props.auth.user.permissions.includes("edit elements")?(d(),h(i(b),{key:0,href:c.route("elements.edit",n.element.id),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"},{default:u(()=>t[5]||(t[5]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),x(" Editar ")])),_:1},8,["href"])):f("",!0),m(i(b),{href:c.route("elements.index"),class:"text-blue-600 hover:text-blue-800"},{default:u(()=>t[6]||(t[6]=[x(" ← Volver a la lista ")])),_:1},8,["href"])])])]),default:u(()=>[e("div",R,[e("div",T,[e("div",O,[e("div",G,[e("div",J,[e("div",K,[t[7]||(t[7]=e("h3",{class:"text-lg font-medium text-gray-900"},"Información del Elemento",-1)),e("span",{class:g(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",S()])},s(C()),3)]),e("div",Q,[e("div",null,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500"},"Nombre",-1)),e("dd",W,s(n.element.name),1)]),e("div",null,[t[9]||(t[9]=e("dt",{class:"text-sm font-medium text-gray-500"},"Categoría",-1)),e("dd",X,[e("span",Y,s(n.element.category),1)])]),n.element.description?(d(),a("div",Z,[t[10]||(t[10]=e("dt",{class:"text-sm font-medium text-gray-500"},"Descripción",-1)),e("dd",ee,s(n.element.description),1)])):f("",!0),e("div",null,[t[11]||(t[11]=e("dt",{class:"text-sm font-medium text-gray-500"},"Unidad de Medida",-1)),e("dd",te,s(n.element.unit),1)]),n.element.location?(d(),a("div",se,[t[12]||(t[12]=e("dt",{class:"text-sm font-medium text-gray-500"},"Ubicación",-1)),e("dd",ne,s(n.element.location),1)])):f("",!0),e("div",oe,[t[13]||(t[13]=e("dt",{class:"text-sm font-medium text-gray-500"},"Fechas",-1)),e("dd",le," Creado: "+s(y(n.element.created_at))+" | Actualizado: "+s(y(n.element.updated_at)),1)])])])]),e("div",de,[e("div",re,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Estado del Stock",-1)),e("div",ie,[e("div",ae,[e("div",{class:g(["text-3xl font-bold",A()])},s(n.element.current_stock),3),e("div",ce,s(n.element.unit),1)]),e("div",me,[e("div",{class:g(["h-3 rounded-full transition-all duration-300",M()]),style:D(`width: ${$()}%`)},null,6)]),e("div",ue,[e("div",null,[t[14]||(t[14]=e("dt",{class:"text-gray-500"},"Mínimo",-1)),e("dd",ge,s(n.element.min_stock),1)]),e("div",null,[t[15]||(t[15]=e("dt",{class:"text-gray-500"},"Máximo",-1)),e("dd",xe,s(n.element.max_stock),1)])]),c.$page.props.auth.user.permissions.includes("manage elements stock")?(d(),a("div",fe,[e("button",{onClick:t[0]||(t[0]=l=>v.value=!0),class:"w-full bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"}," Ajustar Stock ")])):f("",!0)])])])]),n.recentAlerts&&n.recentAlerts.length>0?(d(),a("div",ve,[e("div",ye,[e("div",_e,[t[18]||(t[18]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Alertas Activas",-1)),e("div",ke,[(d(!0),a(_,null,k(n.recentAlerts,l=>(d(),a("div",{key:l.id,class:g(["flex items-center justify-between p-3 rounded-lg",V(l.alert_type)])},[e("div",he,[e("div",{class:g([z(l.alert_type),"w-5 h-5 mr-3"])},t[17]||(t[17]=[e("svg",{fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]),2),e("div",null,[e("div",be,s(l.message),1),e("div",pe,s(y(l.date)),1)])]),e("span",we,s(l.alert_type),1)],2))),128))])])])])):f("",!0),e("div",je,[e("div",Ae,[e("div",Se,[t[21]||(t[21]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Precios y Proveedores",-1)),n.element.prices&&n.element.prices.length>0?(d(),a("div",Ce,[(d(!0),a(_,null,k(n.element.prices,l=>(d(),a("div",{key:l.id,class:"border rounded-lg p-4"},[e("div",Me,[e("div",null,[e("h4",$e,s(l.supplier.name),1),e("p",Ve,s(l.supplier.contact),1)]),e("div",ze,[e("div",Be,s(l.currency),1)])]),e("div",Ne,[e("div",null,[t[19]||(t[19]=e("dt",{class:"text-gray-500"},"Precio Compra",-1)),e("dd",Ee," $"+s(l.purchase_price||"N/A"),1)]),e("div",null,[t[20]||(t[20]=e("dt",{class:"text-gray-500"},"Precio Venta",-1)),e("dd",De," $"+s(l.selling_price||"N/A"),1)])])]))),128))])):(d(),a("div",Pe," No hay precios registrados para este elemento "))])]),e("div",Ue,[e("div",Fe,[t[22]||(t[22]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Movimientos Recientes",-1)),n.recentMovements&&n.recentMovements.length>0?(d(),a("div",qe,[(d(!0),a(_,null,k(n.recentMovements,l=>(d(),a("div",{key:l.id,class:"flex justify-between items-center p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("div",He,s(l.concept||l.type),1),e("div",Ie,s(y(l.movement_date||l.created_at)),1)]),e("div",Le,[e("div",{class:g(["font-bold",l.quantity>0?"text-green-600":"text-red-600"])},s(l.quantity>0?"+":"")+s(l.quantity),3),e("div",Re,s(n.element.unit),1)])]))),128))])):(d(),a("div",Te," No hay movimientos registrados "))])])])])]),m(U,{show:v.value,onClose:t[4]||(t[4]=l=>v.value=!1)},{title:u(()=>[x(" Ajustar Stock - "+s(n.element.name),1)]),content:u(()=>[e("div",Oe,[e("div",Ge,[t[23]||(t[23]=e("div",{class:"text-sm text-gray-500"},"Stock Actual",-1)),e("div",Je,s(n.element.current_stock)+" "+s(n.element.unit),1)]),e("div",Ke,[e("div",null,[m(p,{for:"stock_adjustment",value:"Ajuste de Stock"}),m(w,{id:"stock_adjustment",modelValue:i(r).stock_adjustment,"onUpdate:modelValue":t[1]||(t[1]=l=>i(r).stock_adjustment=l),type:"number",class:"mt-1 block w-full",placeholder:"Ej: +10 o -5"},null,8,["modelValue"]),t[24]||(t[24]=e("p",{class:"mt-1 text-sm text-gray-500"}," Usar números positivos para aumentar stock, negativos para reducir ",-1)),m(j,{class:"mt-2",message:i(r).errors.stock_adjustment},null,8,["message"])]),e("div",null,[m(p,{for:"reason",value:"Razón del Ajuste"}),m(w,{id:"reason",modelValue:i(r).reason,"onUpdate:modelValue":t[2]||(t[2]=l=>i(r).reason=l),type:"text",class:"mt-1 block w-full",placeholder:"Ej: Recepción de mercancía, Corrección de inventario"},null,8,["modelValue"]),m(j,{class:"mt-2",message:i(r).errors.reason},null,8,["message"])]),i(r).stock_adjustment?(d(),a("div",Qe,[e("div",We,[t[25]||(t[25]=e("strong",null,"Vista previa:",-1)),x(" "+s(n.element.current_stock)+" "+s(n.element.unit)+" → "+s(n.element.current_stock+parseInt(i(r).stock_adjustment||0))+" "+s(n.element.unit)+" ",1),e("span",{class:g(["ml-2",i(r).stock_adjustment>0?"text-green-600":"text-red-600"])}," ("+s(i(r).stock_adjustment>0?"+":"")+s(i(r).stock_adjustment)+") ",3)])])):f("",!0)])])]),footer:u(()=>[m(q,{onClick:t[3]||(t[3]=l=>v.value=!1)},{default:u(()=>t[26]||(t[26]=[x(" Cancelar ")])),_:1}),m(F,{class:g(["ml-3",{"opacity-25":i(r).processing}]),onClick:B,disabled:i(r).processing},{default:u(()=>t[27]||(t[27]=[x(" Actualizar Stock ")])),_:1},8,["class","disabled"])]),_:1},8,["show"])]),_:1}))}};export{rt as default};
