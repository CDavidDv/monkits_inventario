import{m as F,r as w,l as y,c as v,w as d,o as n,a as t,u as x,i as h,f as c,e as m,t as r,j as _,k as D,v as M,d as a,g as C,F as S,b,n as j}from"./app-Bbm6nPfF.js";import{_ as U}from"./AppLayout-BVLftzrV.js";import{_ as H}from"./ConfirmationModal-D_IAYCXc.js";import{_ as O}from"./SecondaryButton-lqUrONvz.js";import{_ as q}from"./DangerButton-CjfkhQTj.js";import{l as z}from"./lodash-BPZAoVvF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-BHoNVWH2.js";const G={class:"flex justify-between items-center"},I={class:"flex space-x-2"},J={class:"py-12"},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},P={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},Q={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},R={class:"flex items-center"},W={class:"ml-4"},X={class:"text-2xl font-bold text-gray-900"},Y={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},Z={class:"flex items-center"},tt={class:"ml-4"},et={class:"text-2xl font-bold text-yellow-600"},st={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},ot={class:"flex items-center"},rt={class:"ml-4"},lt={class:"text-2xl font-bold text-red-600"},it={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},nt={class:"flex items-center"},dt={class:"ml-4"},at={class:"text-2xl font-bold text-purple-600"},ct={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mb-6"},ut={class:"p-6"},xt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},mt=["value"],ft={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},pt={class:"p-6"},gt={class:"overflow-x-auto"},vt={class:"min-w-full divide-y divide-gray-200"},ht={class:"bg-gray-50"},bt={key:0,class:"ml-1"},kt={class:"bg-white divide-y divide-gray-200"},wt={class:"px-6 py-4 whitespace-nowrap"},yt={class:"flex items-center"},_t={class:"text-sm font-medium text-gray-900"},Ct={class:"text-sm text-gray-500"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},jt={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},Et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Mt={class:"flex items-center"},Bt={class:"ml-1 text-gray-500"},$t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Lt={class:"px-6 py-4 whitespace-nowrap"},Nt={key:0,class:"mt-1"},Vt={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"},At={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ft={class:"flex space-x-2"},Dt=["onClick"],Ut={key:0,class:"mt-6"},Ht={class:"flex justify-between items-center"},Ot={class:"text-sm text-gray-700"},qt={class:"flex space-x-1"},Xt={__name:"Index",props:{elements:Object,categories:Array,filters:Object,stats:Object},setup(l){const u=l,i=F({search:u.filters.search||"",category:u.filters.category||"",stock_status:u.filters.stock_status||""}),f=w(!1),p=w(null),k=w(!1),E=z.debounce(()=>{g()},500),g=()=>{y.get(route("elements.index"),{search:i.search,category:i.category,stock_status:i.stock_status,sort:u.filters.sort,direction:u.filters.direction},{preserveState:!0,replace:!0})},B=o=>{const e=u.filters.sort===o&&u.filters.direction==="asc"?"desc":"asc";y.get(route("elements.index"),{...i,sort:o,direction:e},{preserveState:!0,replace:!0})},$=()=>{i.search="",i.category="",i.stock_status="",g()},T=o=>o.current_stock<=0?"text-red-600":o.current_stock<=o.min_stock?"text-yellow-600":o.current_stock>=o.max_stock&&o.max_stock>0?"text-purple-600":"text-green-600",L=o=>o.current_stock<=0?"bg-red-100 text-red-800":o.current_stock<=o.min_stock?"bg-yellow-100 text-yellow-800":o.current_stock>=o.max_stock&&o.max_stock>0?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800",N=o=>o.current_stock<=0?"Agotado":o.current_stock<=o.min_stock?"Stock Bajo":o.current_stock>=o.max_stock&&o.max_stock>0?"Sobre Stock":"Normal",V=o=>{p.value=o,f.value=!0},A=()=>{p.value&&(k.value=!0,y.delete(route("elements.destroy",p.value.id),{onSuccess:()=>{f.value=!1,p.value=null},onFinish:()=>{k.value=!1}}))};return(o,e)=>(n(),v(U,{title:"Gestión de Elementos"},{header:d(()=>[t("div",G,[e[8]||(e[8]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Gestión de Elementos ",-1)),t("div",I,[o.$page.props.auth.user.permissions.includes("create elements")?(n(),v(x(h),{key:0,href:o.route("elements.create"),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"},{default:d(()=>e[7]||(e[7]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),c(" Nuevo Elemento ")])),_:1},8,["href"])):m("",!0)])])]),default:d(()=>[t("div",J,[t("div",K,[t("div",P,[t("div",Q,[t("div",R,[e[10]||(e[10]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])])],-1)),t("div",W,[e[9]||(e[9]=t("div",{class:"text-sm font-medium text-gray-500"},"Total Elementos",-1)),t("div",X,r(l.stats.total),1)])])]),t("div",Y,[t("div",Z,[e[12]||(e[12]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])])],-1)),t("div",tt,[e[11]||(e[11]=t("div",{class:"text-sm font-medium text-gray-500"},"Stock Bajo",-1)),t("div",et,r(l.stats.low_stock),1)])])]),t("div",st,[t("div",ot,[e[14]||(e[14]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])])],-1)),t("div",rt,[e[13]||(e[13]=t("div",{class:"text-sm font-medium text-gray-500"},"Agotados",-1)),t("div",lt,r(l.stats.out_of_stock),1)])])]),t("div",it,[t("div",nt,[e[16]||(e[16]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 12l3-3 3 3 4-4"})])])],-1)),t("div",dt,[e[15]||(e[15]=t("div",{class:"text-sm font-medium text-gray-500"},"Sobre Stock",-1)),t("div",at,r(l.stats.over_stock),1)])])])]),t("div",ct,[t("div",ut,[t("div",xt,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Buscar",-1)),_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.search=s),type:"text",placeholder:"Nombre, descripción o ubicación...",class:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",onInput:e[1]||(e[1]=(...s)=>x(E)&&x(E)(...s))},null,544),[[D,i.search]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Categoría",-1)),_(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>i.category=s),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:g},[e[18]||(e[18]=t("option",{value:""},"Todas las categorías",-1)),(n(!0),a(S,null,C(l.categories,s=>(n(),a("option",{key:s,value:s},r(s),9,mt))),128))],544),[[M,i.category]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Estado de Stock",-1)),_(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>i.stock_status=s),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:g},e[20]||(e[20]=[t("option",{value:""},"Todos los estados",-1),t("option",{value:"low"},"Stock Bajo",-1),t("option",{value:"out"},"Agotado",-1),t("option",{value:"over"},"Sobre Stock",-1)]),544),[[M,i.stock_status]])]),t("div",{class:"flex items-end"},[t("button",{onClick:$,class:"w-full bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"}," Limpiar Filtros ")])])])]),t("div",ft,[t("div",pt,[t("div",gt,[t("table",vt,[t("thead",ht,[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:e[4]||(e[4]=s=>B("name"))},[e[22]||(e[22]=c(" Nombre ")),l.filters.sort==="name"?(n(),a("span",bt,r(l.filters.direction==="asc"?"↑":"↓"),1)):m("",!0)]),e[23]||(e[23]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Categoría ",-1)),e[24]||(e[24]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Stock Actual ",-1)),e[25]||(e[25]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Min/Max ",-1)),e[26]||(e[26]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ubicación ",-1)),e[27]||(e[27]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado ",-1)),e[28]||(e[28]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Acciones ",-1))])]),t("tbody",kt,[(n(!0),a(S,null,C(l.elements.data,s=>(n(),a("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",wt,[t("div",yt,[t("div",null,[t("div",_t,r(s.name),1),t("div",Ct,r(s.description),1)])])]),t("td",St,[t("span",jt,r(s.category),1)]),t("td",Et,[t("div",Mt,[t("span",{class:j(["font-bold",T(s)])},r(s.current_stock),3),t("span",Bt,r(s.unit),1)])]),t("td",$t,r(s.min_stock)+" / "+r(s.max_stock),1),t("td",Tt,r(s.location||"-"),1),t("td",Lt,[t("span",{class:j([L(s),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},r(N(s)),3),s.stock_alerts&&s.stock_alerts.length>0?(n(),a("div",Nt,[t("span",Vt,r(s.stock_alerts.length)+" alerta(s) ",1)])):m("",!0)]),t("td",At,[t("div",Ft,[b(x(h),{href:o.route("elements.show",s.id),class:"text-blue-600 hover:text-blue-900"},{default:d(()=>e[29]||(e[29]=[c(" Ver ")])),_:2},1032,["href"]),o.$page.props.auth.user.permissions.includes("edit elements")?(n(),v(x(h),{key:0,href:o.route("elements.edit",s.id),class:"text-indigo-600 hover:text-indigo-900"},{default:d(()=>e[30]||(e[30]=[c(" Editar ")])),_:2},1032,["href"])):m("",!0),o.$page.props.auth.user.permissions.includes("delete elements")?(n(),a("button",{key:1,onClick:zt=>V(s),class:"text-red-600 hover:text-red-900"}," Eliminar ",8,Dt)):m("",!0)])])]))),128))])])]),l.elements.links?(n(),a("div",Ut,[t("div",Ht,[t("div",Ot," Mostrando "+r(l.elements.from)+" a "+r(l.elements.to)+" de "+r(l.elements.total)+" resultados ",1),t("div",qt,[(n(!0),a(S,null,C(l.elements.links,s=>(n(),v(x(h),{key:s.label,href:s.url,class:j(["px-3 py-2 text-sm rounded-md",s.active?"bg-blue-500 text-white":s.url?"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 cursor-not-allowed"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])])):m("",!0)])])])]),b(H,{show:f.value,onClose:e[6]||(e[6]=s=>f.value=!1)},{title:d(()=>e[31]||(e[31]=[c(" Eliminar Elemento ")])),content:d(()=>{var s;return[c(' ¿Estás seguro de que quieres eliminar el elemento "'+r((s=p.value)==null?void 0:s.name)+'"? Esta acción no se puede deshacer. ',1)]}),footer:d(()=>[b(O,{onClick:e[5]||(e[5]=s=>f.value=!1)},{default:d(()=>e[32]||(e[32]=[c(" Cancelar ")])),_:1}),b(q,{class:"ml-3",onClick:A,disabled:k.value},{default:d(()=>e[33]||(e[33]=[c(" Eliminar ")])),_:1},8,["disabled"])]),_:1},8,["show"])]),_:1}))}};export{Xt as default};
