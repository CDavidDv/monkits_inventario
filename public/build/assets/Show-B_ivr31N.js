import{r as k,T as S,h as G,c as P,w as u,o,a as t,t as d,u as i,i as B,f as y,e as r,b as a,n as E,d as n,z as J,F as z,g as N,j as D,k as V,l as _}from"./app-BvBaJJHQ.js";import{_ as Q}from"./AppLayout-DkYb2Hbh.js";import{C as R}from"./Container-CXfuoOaH.js";import{_ as $}from"./DialogModal-D-U7SdV0.js";import{_ as b}from"./InputLabel-CiuE-m5Q.js";import{_ as F}from"./TextInput-BTpakdA5.js";import{_ as w}from"./InputError-DMMaklqC.js";import{_ as L}from"./PrimaryButton-eJv-wGNu.js";import{_ as M}from"./SecondaryButton-DwpV3Vl-.js";import{S as T}from"./sweetalert2.esm.all-BGf-Fe8G.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-BhxCOV5u.js";const W={class:"flex justify-between items-center"},X={class:"font-semibold text-xl text-gray-800 leading-tight"},Y={class:"flex space-x-2"},Z={class:"space-y-6"},tt={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},et={class:"p-6"},st={class:"flex justify-between items-start mb-6"},ot={class:"grid grid-cols-1 gap-x-4 gap-y-4 sm:grid-cols-2 lg:grid-cols-3"},nt={class:"mt-1 text-sm text-gray-900"},dt={key:0},it={class:"mt-1 text-sm text-gray-900"},at={class:"mt-1 text-sm text-gray-900"},rt={class:"mt-1 text-sm text-gray-900"},lt={key:1},ut={class:"mt-1 text-sm text-gray-900"},ct={key:2},mt={class:"mt-1 text-sm text-gray-900"},pt={class:"mt-1 text-sm text-gray-900"},gt={class:"mt-1 text-sm text-gray-900"},xt={key:3},ft={class:"mt-1 text-sm text-gray-900"},yt={key:4},vt={class:"mt-1 text-sm text-gray-900"},ht={key:0,class:"mt-6"},bt={class:"mt-2"},wt={class:"flex justify-between text-sm text-gray-700 mb-1"},kt={class:"w-full bg-gray-200 rounded-full h-2"},_t={key:0,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Ct={class:"p-6"},qt={class:"overflow-x-auto"},St={class:"min-w-full divide-y divide-gray-200"},Pt={class:"bg-white divide-y divide-gray-200"},Bt={class:"px-6 py-4 whitespace-nowrap"},Et={class:"text-sm font-medium text-gray-900"},zt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Vt={class:"px-6 py-4 whitespace-nowrap"},$t={key:1,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Ft={class:"p-6"},Lt={class:"overflow-x-auto"},Mt={class:"min-w-full divide-y divide-gray-200"},Tt={class:"bg-white divide-y divide-gray-200"},At={class:"px-6 py-4 whitespace-nowrap"},Ut={class:"text-sm font-medium text-gray-900"},jt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},It={key:2,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Ht={class:"p-6"},Ot={class:"text-sm text-gray-700 whitespace-pre-wrap"},Kt={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Gt={class:"p-6"},Jt={class:"flex flex-wrap gap-3"},Qt=["disabled"],Rt={key:0},Wt={key:1},Xt=["disabled"],Yt={key:0},Zt={key:1},te=["disabled"],ee={key:0},se={key:1},oe={key:0,class:"mt-4 bg-red-50 border border-red-200 rounded-lg p-4"},ne={class:"space-y-4"},de={key:0},ie={key:1},ae={class:"space-y-4"},re={key:0},le={key:1},ke={__name:"Show",props:{production:Object,componentsStatus:Array},setup(s){const x=s,l=k(!1),v=k(!1),h=k(!1),g=S({quantity_produced:x.production.quantity_requested,notes:""}),f=S({quantity_produced:x.production.quantity_produced||0,notes:""}),C=G(()=>x.componentsStatus?x.componentsStatus.some(m=>!m.sufficient):!1),A=m=>({pending:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[m]||"bg-gray-100 text-gray-800",U=m=>({pending:"Pendiente",in_progress:"En Progreso",completed:"Completado",cancelled:"Cancelado"})[m]||m,j=()=>{l.value=!0,_.post(route("production.start",x.production.id),{},{onSuccess:()=>{l.value=!1},onError:()=>{l.value=!1}})},I=()=>{g.post(route("production.complete",x.production.id),{onSuccess:()=>{v.value=!1,g.reset()}})},H=()=>{f.post(route("production.update-progress",x.production.id),{onSuccess:()=>{h.value=!1}})},O=()=>{T.fire({title:"¿Estás seguro?",text:"Esta acción cancelará la orden de producción",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Sí, cancelar",cancelButtonText:"No"}).then(m=>{m.isConfirmed&&(l.value=!0,_.post(route("production.cancel",x.production.id),{},{onSuccess:()=>{l.value=!1},onError:()=>{l.value=!1}}))})},K=()=>{T.fire({title:"¿Estás seguro?",text:"Esta acción eliminará permanentemente la orden de producción",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(m=>{m.isConfirmed&&(l.value=!0,_.delete(route("production.destroy",x.production.id),{onSuccess:()=>{l.value=!1},onError:()=>{l.value=!1}}))})};return(m,e)=>(o(),P(Q,{title:"Orden de Producción: "+s.production.name},{header:u(()=>[t("div",W,[t("h2",X," Orden de Producción: "+d(s.production.name),1),t("div",Y,[s.production.status==="pending"?(o(),P(i(B),{key:0,href:m.route("production.edit",s.production.id),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"},{default:u(()=>e[10]||(e[10]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),y(" Editar ")])),_:1},8,["href"])):r("",!0),a(i(B),{href:m.route("production.index"),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"},{default:u(()=>e[11]||(e[11]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),y(" Volver ")])),_:1},8,["href"])])])]),default:u(()=>[a(R,null,{default:u(()=>{var c,q;return[t("div",Z,[t("div",tt,[t("div",et,[t("div",st,[e[12]||(e[12]=t("div",null,[t("h3",{class:"text-lg font-medium text-gray-900"},"Información General"),t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"},"Detalles de la orden de producción")],-1)),t("span",{class:E([A(s.production.status),"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium"])},d(U(s.production.status)),3)]),t("dl",ot,[t("div",null,[e[13]||(e[13]=t("dt",{class:"text-sm font-medium text-gray-500"},"Nombre",-1)),t("dd",nt,d(s.production.name),1)]),s.production.description?(o(),n("div",dt,[e[14]||(e[14]=t("dt",{class:"text-sm font-medium text-gray-500"},"Descripción",-1)),t("dd",it,d(s.production.description),1)])):r("",!0),t("div",null,[e[15]||(e[15]=t("dt",{class:"text-sm font-medium text-gray-500"},"Kit a Producir",-1)),t("dd",at,d(((c=s.production.kit)==null?void 0:c.name)||"N/A"),1)]),t("div",null,[e[16]||(e[16]=t("dt",{class:"text-sm font-medium text-gray-500"},"Cantidad Solicitada",-1)),t("dd",rt,d(s.production.quantity_requested),1)]),s.production.quantity_produced>0?(o(),n("div",lt,[e[17]||(e[17]=t("dt",{class:"text-sm font-medium text-gray-500"},"Cantidad Producida",-1)),t("dd",ut,d(s.production.quantity_produced),1)])):r("",!0),s.production.due_date?(o(),n("div",ct,[e[18]||(e[18]=t("dt",{class:"text-sm font-medium text-gray-500"},"Fecha Límite",-1)),t("dd",mt,d(new Date(s.production.due_date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)])):r("",!0),t("div",null,[e[19]||(e[19]=t("dt",{class:"text-sm font-medium text-gray-500"},"Creado por",-1)),t("dd",pt,d(((q=s.production.creator)==null?void 0:q.name)||"Usuario desconocido"),1)]),t("div",null,[e[20]||(e[20]=t("dt",{class:"text-sm font-medium text-gray-500"},"Fecha de Creación",-1)),t("dd",gt,d(new Date(s.production.created_at).toLocaleDateString("es-ES")),1)]),s.production.start_date?(o(),n("div",xt,[e[21]||(e[21]=t("dt",{class:"text-sm font-medium text-gray-500"},"Fecha de Inicio",-1)),t("dd",ft,d(new Date(s.production.start_date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)])):r("",!0),s.production.end_date?(o(),n("div",yt,[e[22]||(e[22]=t("dt",{class:"text-sm font-medium text-gray-500"},"Fecha de Finalización",-1)),t("dd",vt,d(new Date(s.production.end_date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)])):r("",!0)]),s.production.status==="in_progress"&&s.production.quantity_requested>0?(o(),n("div",ht,[e[23]||(e[23]=t("dt",{class:"text-sm font-medium text-gray-500"},"Progreso",-1)),t("div",bt,[t("div",wt,[t("span",null,d(s.production.quantity_produced)+" de "+d(s.production.quantity_requested)+" completados",1),t("span",null,d(Math.round(s.production.quantity_produced/s.production.quantity_requested*100))+"%",1)]),t("div",kt,[t("div",{class:"bg-blue-600 h-2 rounded-full",style:J({width:Math.round(s.production.quantity_produced/s.production.quantity_requested*100)+"%"})},null,4)])])])):r("",!0)])]),s.componentsStatus&&s.componentsStatus.length>0?(o(),n("div",_t,[t("div",Ct,[e[25]||(e[25]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Componentes Necesarios",-1)),t("div",qt,[t("table",St,[e[24]||(e[24]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Componente "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Por Kit "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Necesario "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Disponible "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado ")])],-1)),t("tbody",Pt,[(o(!0),n(z,null,N(s.componentsStatus,p=>(o(),n("tr",{key:p.component.id},[t("td",Bt,[t("div",Et,d(p.component.name),1)]),t("td",zt,d(p.needed_per_kit),1),t("td",Nt,d(p.total_needed),1),t("td",Dt,d(p.available),1),t("td",Vt,[t("span",{class:E([p.sufficient?"text-green-800 bg-green-100":"text-red-800 bg-red-100","inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},d(p.sufficient?"Suficiente":"Insuficiente"),3)])]))),128))])])])])])):r("",!0),s.production.components_used&&s.production.components_used.length>0?(o(),n("div",$t,[t("div",Ft,[e[27]||(e[27]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Componentes Utilizados",-1)),t("div",Lt,[t("table",Mt,[e[26]||(e[26]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Componente "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Cantidad Utilizada ")])],-1)),t("tbody",Tt,[(o(!0),n(z,null,N(s.production.components_used,p=>(o(),n("tr",{key:p.item_id},[t("td",At,[t("div",Ut,d(p.item_name),1)]),t("td",jt,d(p.quantity_used),1)]))),128))])])])])])):r("",!0),s.production.notes?(o(),n("div",It,[t("div",Ht,[e[28]||(e[28]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Notas",-1)),t("p",Ot,d(s.production.notes),1)])])):r("",!0),t("div",Kt,[t("div",Gt,[e[30]||(e[30]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Acciones",-1)),t("div",Jt,[s.production.status==="pending"?(o(),n("button",{key:0,onClick:j,disabled:l.value||C.value,class:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50"},[l.value?(o(),n("span",Rt,"Iniciando...")):(o(),n("span",Wt,"Iniciar Producción"))],8,Qt)):r("",!0),s.production.status==="in_progress"?(o(),n("button",{key:1,onClick:e[0]||(e[0]=p=>h.value=!0),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Actualizar Progreso ")):r("",!0),s.production.status==="in_progress"?(o(),n("button",{key:2,onClick:e[1]||(e[1]=p=>v.value=!0),class:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"}," Completar Producción ")):r("",!0),["pending","in_progress"].includes(s.production.status)?(o(),n("button",{key:3,onClick:O,disabled:l.value,class:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50"},[l.value?(o(),n("span",Yt,"Cancelando...")):(o(),n("span",Zt,"Cancelar Producción"))],8,Xt)):r("",!0),["pending","cancelled"].includes(s.production.status)?(o(),n("button",{key:4,onClick:K,disabled:l.value,class:"bg-red-600 hover:bg-red-800 text-white font-bold py-2 px-4 rounded disabled:opacity-50"},[l.value?(o(),n("span",ee,"Eliminando...")):(o(),n("span",se,"Eliminar"))],8,te)):r("",!0)]),C.value&&s.production.status==="pending"?(o(),n("div",oe,e[29]||(e[29]=[t("div",{class:"flex"},[t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])]),t("div",{class:"ml-3"},[t("h3",{class:"text-sm font-medium text-red-800"},"Stock Insuficiente"),t("div",{class:"mt-2 text-sm text-red-700"},[t("p",null,"No hay suficientes componentes en stock para iniciar esta producción.")])])],-1)]))):r("",!0)])])])]}),_:1}),a($,{show:v.value,onClose:e[5]||(e[5]=c=>v.value=!1)},{title:u(()=>e[31]||(e[31]=[y(" Completar Producción ")])),content:u(()=>[t("div",ne,[t("div",null,[a(b,{for:"quantity_produced",value:"Cantidad Producida *"}),a(F,{id:"quantity_produced",modelValue:i(g).quantity_produced,"onUpdate:modelValue":e[2]||(e[2]=c=>i(g).quantity_produced=c),modelModifiers:{number:!0},type:"number",min:1,max:s.production.quantity_requested,class:"mt-1 block w-full",required:""},null,8,["modelValue","max"]),a(w,{class:"mt-2",message:i(g).errors.quantity_produced},null,8,["message"])]),t("div",null,[a(b,{for:"completion_notes",value:"Notas de Finalización"}),D(t("textarea",{id:"completion_notes","onUpdate:modelValue":e[3]||(e[3]=c=>i(g).notes=c),rows:"3",class:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Notas sobre la finalización de la producción..."},null,512),[[V,i(g).notes]]),a(w,{class:"mt-2",message:i(g).errors.notes},null,8,["message"])])])]),footer:u(()=>[a(M,{onClick:e[4]||(e[4]=c=>v.value=!1)},{default:u(()=>e[32]||(e[32]=[y(" Cancelar ")])),_:1}),a(L,{class:"ml-3",onClick:I,disabled:i(g).processing},{default:u(()=>[i(g).processing?(o(),n("span",de,"Completando...")):(o(),n("span",ie,"Completar Producción"))]),_:1},8,["disabled"])]),_:1},8,["show"]),a($,{show:h.value,onClose:e[9]||(e[9]=c=>h.value=!1)},{title:u(()=>e[33]||(e[33]=[y(" Actualizar Progreso ")])),content:u(()=>[t("div",ae,[t("div",null,[a(b,{for:"progress_quantity",value:"Cantidad Producida Hasta Ahora *"}),a(F,{id:"progress_quantity",modelValue:i(f).quantity_produced,"onUpdate:modelValue":e[6]||(e[6]=c=>i(f).quantity_produced=c),modelModifiers:{number:!0},type:"number",min:0,max:s.production.quantity_requested,class:"mt-1 block w-full",required:""},null,8,["modelValue","max"]),a(w,{class:"mt-2",message:i(f).errors.quantity_produced},null,8,["message"])]),t("div",null,[a(b,{for:"progress_notes",value:"Notas de Progreso"}),D(t("textarea",{id:"progress_notes","onUpdate:modelValue":e[7]||(e[7]=c=>i(f).notes=c),rows:"3",class:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Notas sobre el progreso actual..."},null,512),[[V,i(f).notes]]),a(w,{class:"mt-2",message:i(f).errors.notes},null,8,["message"])])])]),footer:u(()=>[a(M,{onClick:e[8]||(e[8]=c=>h.value=!1)},{default:u(()=>e[34]||(e[34]=[y(" Cancelar ")])),_:1}),a(L,{class:"ml-3",onClick:H,disabled:i(f).processing},{default:u(()=>[i(f).processing?(o(),n("span",re,"Actualizando...")):(o(),n("span",le,"Actualizar Progreso"))]),_:1},8,["disabled"])]),_:1},8,["show"])]),_:1},8,["title"]))}};export{ke as default};
