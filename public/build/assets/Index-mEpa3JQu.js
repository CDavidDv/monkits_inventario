import{m as P,r as _,T as G,l as D,c as C,w as i,o as l,a as e,u as n,i as $,f as p,e as b,t as o,j as K,k as R,v as T,d as r,g as V,F as j,b as m,n as M}from"./app-BqIOlYv4.js";import{_ as J}from"./AppLayout-CMsQbeNk.js";import{_ as Q}from"./DialogModal-ChLEivwW.js";import{_ as W}from"./ConfirmationModal-C1nQQ4kF.js";import{_ as B}from"./InputLabel-CVdwMLDr.js";import{_ as F}from"./TextInput-CutBnAWr.js";import{_ as N}from"./InputError-vfZy364d.js";import{_ as X}from"./PrimaryButton-D1208OA8.js";import{_ as S}from"./SecondaryButton-BZf2RQZ7.js";import{_ as Y}from"./DangerButton-C8SFBGpF.js";import{l as Z}from"./lodash-icX_lX4Q.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-Dx0CTxBh.js";const ee={class:"flex justify-between items-center"},te={class:"flex space-x-2"},se={class:"py-12"},oe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},le={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},ie={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},ae={class:"flex items-center"},ne={class:"ml-4"},re={class:"text-2xl font-bold text-gray-900"},de={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},ue={class:"flex items-center"},me={class:"ml-4"},ce={class:"text-2xl font-bold text-green-600"},xe={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},pe={class:"flex items-center"},ve={class:"ml-4"},fe={class:"text-2xl font-bold text-purple-600"},be={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mb-6"},ge={class:"p-6"},ye={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},he=["value"],we={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},_e={class:"p-6"},ke={class:"overflow-x-auto"},Ce={class:"min-w-full divide-y divide-gray-200"},$e={class:"bg-gray-50"},Ve={key:0,class:"ml-1"},je={class:"bg-white divide-y divide-gray-200"},Me={class:"px-6 py-4 whitespace-nowrap"},Ee={class:"flex items-center"},De={class:"text-sm font-medium text-gray-900"},Ke={class:"text-sm text-gray-500"},qe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Te={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},Be={key:1,class:"text-gray-400"},Fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ne={class:"px-6 py-4 whitespace-nowrap"},Se={class:"flex items-center"},Ae={class:"flex-1 mr-3"},He={class:"text-sm font-medium"},Ue={class:"text-xs text-gray-500"},ze={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Le={class:"text-sm font-medium text-green-600"},Oe={class:"text-xs text-blue-600"},Ie={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Pe={class:"flex space-x-2"},Ge=["onClick"],Re=["onClick"],Je={key:0,class:"mt-6"},Qe={class:"flex justify-between items-center"},We={class:"text-sm text-gray-700"},Xe={class:"flex space-x-1"},Ye={class:"space-y-4"},Ze={class:"text-center p-4 bg-gray-50 rounded-lg"},et={class:"text-2xl font-bold text-green-600"},tt={key:0,class:"p-4 bg-blue-50 rounded-lg"},st={class:"space-y-2"},ft={__name:"Index",props:{kits:Object,categories:Array,filters:Object,stats:Object},setup(d){const f=d,u=P({search:f.filters.search||"",category:f.filters.category||"",availability:f.filters.availability||""}),g=_(!1),y=_(!1),v=_(null),h=_(null),E=_(!1),c=G({quantity:1,reason:""}),q=Z.debounce(()=>{k()},500),k=()=>{D.get(route("inventory-kits.index"),{search:u.search,category:u.category,availability:u.availability,sort:f.filters.sort,direction:f.filters.direction},{preserveState:!0,replace:!0})},A=a=>{const t=f.filters.sort===a&&f.filters.direction==="asc"?"desc":"asc";D.get(route("inventory-kits.index"),{...u,sort:a,direction:t},{preserveState:!0,replace:!0})},H=()=>{u.search="",u.category="",u.availability="",k()},U=a=>{v.value=a,c.quantity=1,c.reason="",g.value=!0},z=()=>{v.value&&c.post(route("inventory-kits.assemble",v.value.id),{onSuccess:()=>{g.value=!1,c.reset(),v.value=null}})},L=a=>{h.value=a,y.value=!0},O=()=>{h.value&&(E.value=!0,D.delete(route("inventory-kits.destroy",h.value.id),{onSuccess:()=>{y.value=!1,h.value=null},onFinish:()=>{E.value=!1}}))};return(a,t)=>(l(),C(J,{title:"Gestión de Kits"},{header:i(()=>[e("div",ee,[t[12]||(t[12]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Gestión de Kits de Inventario ",-1)),e("div",te,[a.$page.props.auth.user.permissions.includes("create kits")?(l(),C(n($),{key:0,href:a.route("inventory-kits.create"),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"},{default:i(()=>t[11]||(t[11]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),p(" Nuevo Kit ")])),_:1},8,["href"])):b("",!0)])])]),default:i(()=>[e("div",se,[e("div",oe,[e("div",le,[e("div",ie,[e("div",ae,[t[14]||(t[14]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])])],-1)),e("div",ne,[t[13]||(t[13]=e("div",{class:"text-sm font-medium text-gray-500"},"Total Kits",-1)),e("div",re,o(d.stats.total),1)])])]),e("div",de,[e("div",ue,[t[16]||(t[16]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",me,[t[15]||(t[15]=e("div",{class:"text-sm font-medium text-gray-500"},"Kits Disponibles",-1)),e("div",ce,o(d.stats.available),1)])])]),e("div",xe,[e("div",pe,[t[18]||(t[18]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})])])],-1)),e("div",ve,[t[17]||(t[17]=e("div",{class:"text-sm font-medium text-gray-500"},"Categorías",-1)),e("div",fe,o(d.stats.categories),1)])])])]),e("div",be,[e("div",ge,[e("div",ye,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Buscar",-1)),K(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.search=s),type:"text",placeholder:"Nombre o descripción...",class:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",onInput:t[1]||(t[1]=(...s)=>n(q)&&n(q)(...s))},null,544),[[R,u.search]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Categoría",-1)),K(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>u.category=s),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:k},[t[20]||(t[20]=e("option",{value:""},"Todas las categorías",-1)),(l(!0),r(j,null,V(d.categories,s=>(l(),r("option",{key:s,value:s},o(s),9,he))),128))],544),[[T,u.category]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Disponibilidad",-1)),K(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>u.availability=s),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:k},t[22]||(t[22]=[e("option",{value:""},"Todos los estados",-1),e("option",{value:"available"},"Disponibles",-1),e("option",{value:"unavailable"},"No Disponibles",-1)]),544),[[T,u.availability]])]),e("div",{class:"flex items-end"},[e("button",{onClick:H,class:"w-full bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"}," Limpiar Filtros ")])])])]),e("div",we,[e("div",_e,[e("div",ke,[e("table",Ce,[e("thead",$e,[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:t[4]||(t[4]=s=>A("name"))},[t[24]||(t[24]=p(" Nombre ")),d.filters.sort==="name"?(l(),r("span",Ve,o(d.filters.direction==="asc"?"↑":"↓"),1)):b("",!0)]),t[25]||(t[25]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Categoría ",-1)),t[26]||(t[26]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Componentes ",-1)),t[27]||(t[27]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Disponibilidad ",-1)),t[28]||(t[28]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Costo Total ",-1)),t[29]||(t[29]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Acciones ",-1))])]),e("tbody",je,[(l(!0),r(j,null,V(d.kits.data,s=>{var w,x;return l(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Me,[e("div",Ee,[e("div",null,[e("div",De,o(s.name),1),e("div",Ke,o(s.description),1)])])]),e("td",qe,[s.category?(l(),r("span",Te,o(s.category),1)):(l(),r("span",Be,"Sin categoría"))]),e("td",Fe,o(s.kit_components?s.kit_components.length:0)+" elementos ",1),e("td",Ne,[e("div",Se,[e("div",Ae,[e("div",He,[e("span",{class:M(s.can_be_assembled?"text-green-600":"text-red-600")},o(s.can_be_assembled?"Disponible":"No Disponible"),3)]),e("div",Ue," Máximo: "+o(s.max_assemblies)+" unidades ",1)]),e("div",null,[e("span",{class:M([s.can_be_assembled?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},o(s.can_be_assembled?"✓":"✗"),3)])])]),e("td",ze,[e("div",null,[e("div",Le," $"+o(((w=s.total_cost)==null?void 0:w.toFixed(2))||"0.00"),1),e("div",Oe," PV: $"+o(((x=s.total_selling_price)==null?void 0:x.toFixed(2))||"0.00"),1)])]),e("td",Ie,[e("div",Pe,[m(n($),{href:a.route("inventory-kits.show",s.id),class:"text-blue-600 hover:text-blue-900"},{default:i(()=>t[30]||(t[30]=[p(" Ver ")])),_:2},1032,["href"]),a.$page.props.auth.user.permissions.includes("edit kits")?(l(),C(n($),{key:0,href:a.route("inventory-kits.edit",s.id),class:"text-indigo-600 hover:text-indigo-900"},{default:i(()=>t[31]||(t[31]=[p(" Editar ")])),_:2},1032,["href"])):b("",!0),a.$page.props.auth.user.permissions.includes("assemble kits")&&s.can_be_assembled?(l(),r("button",{key:1,onClick:I=>U(s),class:"text-green-600 hover:text-green-900"}," Ensamblar ",8,Ge)):b("",!0),a.$page.props.auth.user.permissions.includes("delete kits")?(l(),r("button",{key:2,onClick:I=>L(s),class:"text-red-600 hover:text-red-900"}," Eliminar ",8,Re)):b("",!0)])])])}),128))])])]),d.kits.links?(l(),r("div",Je,[e("div",Qe,[e("div",We," Mostrando "+o(d.kits.from)+" a "+o(d.kits.to)+" de "+o(d.kits.total)+" resultados ",1),e("div",Xe,[(l(!0),r(j,null,V(d.kits.links,s=>(l(),C(n($),{key:s.label,href:s.url,class:M(["px-3 py-2 text-sm rounded-md",s.active?"bg-blue-500 text-white":s.url?"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 cursor-not-allowed"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])])):b("",!0)])])])]),m(Q,{show:g.value,onClose:t[8]||(t[8]=s=>g.value=!1)},{title:i(()=>{var s;return[p(" Ensamblar Kit - "+o((s=v.value)==null?void 0:s.name),1)]}),content:i(()=>{var s,w;return[e("div",Ye,[e("div",Ze,[t[32]||(t[32]=e("div",{class:"text-sm text-gray-500"},"Kits disponibles para ensamblar",-1)),e("div",et,o((s=v.value)==null?void 0:s.max_assemblies),1)]),e("div",null,[m(B,{for:"quantity",value:"Cantidad a Ensamblar"}),m(F,{id:"quantity",modelValue:n(c).quantity,"onUpdate:modelValue":t[5]||(t[5]=x=>n(c).quantity=x),type:"number",max:(w=v.value)==null?void 0:w.max_assemblies,min:"1",class:"mt-1 block w-full",placeholder:"1"},null,8,["modelValue","max"]),m(N,{class:"mt-2",message:n(c).errors.quantity},null,8,["message"])]),e("div",null,[m(B,{for:"reason",value:"Razón del Ensamblaje (Opcional)"}),m(F,{id:"reason",modelValue:n(c).reason,"onUpdate:modelValue":t[6]||(t[6]=x=>n(c).reason=x),type:"text",class:"mt-1 block w-full",placeholder:"Ej: Pedido especial, Producción programada"},null,8,["modelValue"]),m(N,{class:"mt-2",message:n(c).errors.reason},null,8,["message"])]),v.value?(l(),r("div",tt,[t[33]||(t[33]=e("h4",{class:"font-medium text-blue-900 mb-2"},"Componentes del Kit:",-1)),e("div",st,[(l(!0),r(j,null,V(v.value.kit_components,x=>(l(),r("div",{key:x.id,class:"flex justify-between text-sm"},[e("span",null,o(x.element.name),1),e("span",null,o(x.quantity)+" "+o(x.element.unit),1)]))),128))])])):b("",!0)])]}),footer:i(()=>[m(S,{onClick:t[7]||(t[7]=s=>g.value=!1)},{default:i(()=>t[34]||(t[34]=[p(" Cancelar ")])),_:1}),m(X,{class:M(["ml-3",{"opacity-25":n(c).processing}]),onClick:z,disabled:n(c).processing},{default:i(()=>t[35]||(t[35]=[p(" Ensamblar ")])),_:1},8,["class","disabled"])]),_:1},8,["show"]),m(W,{show:y.value,onClose:t[10]||(t[10]=s=>y.value=!1)},{title:i(()=>t[36]||(t[36]=[p(" Eliminar Kit ")])),content:i(()=>{var s;return[p(' ¿Estás seguro de que quieres eliminar el kit "'+o((s=h.value)==null?void 0:s.name)+'"? Esta acción no se puede deshacer. ',1)]}),footer:i(()=>[m(S,{onClick:t[9]||(t[9]=s=>y.value=!1)},{default:i(()=>t[37]||(t[37]=[p(" Cancelar ")])),_:1}),m(Y,{class:"ml-3",onClick:O,disabled:E.value},{default:i(()=>t[38]||(t[38]=[p(" Eliminar ")])),_:1},8,["disabled"])]),_:1},8,["show"])]),_:1}))}};export{ft as default};
