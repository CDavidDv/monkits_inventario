import{m as R,h as $,l as x,c as j,w as p,o as l,a as e,f as N,t as n,j as f,k as F,u as v,v as b,d as r,g as y,F as w,e as u,n as g,p as k,b as U,i as A}from"./app-Bbm6nPfF.js";import{_ as E}from"./AppLayout-BVLftzrV.js";import{l as O}from"./lodash-BPZAoVvF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"flex justify-between items-center"},G={class:"flex space-x-2"},J=["disabled"],K={class:"py-12"},P={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Q={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},W={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},X={class:"flex items-center"},Y={class:"ml-4"},Z={class:"text-2xl font-bold text-gray-900"},ee={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},te={class:"flex items-center"},se={class:"ml-4"},oe={class:"text-2xl font-bold text-red-600"},le={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},re={class:"flex items-center"},ne={class:"ml-4"},ie={class:"text-2xl font-bold text-orange-600"},de={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},ae={class:"flex items-center"},ue={class:"ml-4"},ce={class:"text-2xl font-bold text-green-600"},me={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mb-6"},xe={class:"p-6"},ge={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},fe=["value"],ve={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},he={class:"p-6"},pe={key:0,class:"text-center py-8 text-gray-500"},be={key:1,class:"space-y-3"},ye=["onClick"],we={class:"flex items-start justify-between"},ke={class:"flex items-start space-x-3 flex-1"},_e={key:0,"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},Me={key:1,"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},Ce={key:2,"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},je={key:3,"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"},Ae={class:"flex-1 min-w-0"},ze={class:"flex items-center space-x-2 mb-1"},Be={class:"text-sm font-medium text-gray-900 truncate"},Le={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},Se={class:"text-sm text-gray-600 mb-2"},Te={class:"flex items-center justify-between text-xs text-gray-500"},Ve={class:"flex items-center space-x-4"},Ie={key:0},De={class:"flex items-center space-x-2 ml-4"},He={key:0,class:"w-2 h-2 bg-blue-500 rounded-full"},Re={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},$e={class:"flex space-x-1"},Ne=["onClick"],Fe=["onClick"],Ue={key:2,class:"mt-6"},Ee={class:"flex justify-between items-center"},Oe={class:"text-sm text-gray-700"},qe={class:"flex space-x-1"},We={__name:"Index",props:{alerts:Object,categories:Array,filters:Object,stats:Object},setup(d){const c=d,i=R({search:c.filters.search||"",alert_type:c.filters.alert_type||"",status:c.filters.status||"",category:c.filters.category||""}),_=$(()=>c.alerts.data.filter(o=>!o.is_read).length),M=O.debounce(()=>{m()},500),m=()=>{x.get(route("stock-alerts.index"),{search:i.search,alert_type:i.alert_type,status:i.status,category:i.category},{preserveState:!0,replace:!0})},z=()=>{i.search="",i.alert_type="",i.status="",i.category="",m()},B=o=>{switch(o.alert_type){case"Agotado":return"border-red-200";case"Crítico":return"border-orange-200";case"Mínimo":return"border-yellow-200";case"Máximo":return"border-purple-200";default:return"border-gray-200"}},L=o=>{switch(o){case"Agotado":return"bg-red-100";case"Crítico":return"bg-orange-100";case"Mínimo":return"bg-yellow-100";case"Máximo":return"bg-purple-100";default:return"bg-gray-100"}},S=o=>{switch(o){case"Agotado":return"text-red-600";case"Crítico":return"text-orange-600";case"Mínimo":return"text-yellow-600";case"Máximo":return"text-purple-600";default:return"text-gray-600"}},T=o=>{switch(o){case"Agotado":return"bg-red-100 text-red-800";case"Crítico":return"bg-orange-100 text-orange-800";case"Mínimo":return"bg-yellow-100 text-yellow-800";case"Máximo":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},V=o=>{const t=new Date,s=new Date(o),a=Math.floor((t-s)/(1e3*60));if(a<1)return"Ahora";if(a<60)return`${a}m`;const h=Math.floor(a/60);return h<24?`${h}h`:`${Math.floor(h/24)}d`},I=o=>{o.is_read||C(o),x.visit(route("elements.show",o.element.id))},C=o=>{x.post(route("stock-alerts.mark-read",o.id),{},{preserveState:!0})},D=o=>{x.post(route("stock-alerts.resolve",o.id),{},{preserveState:!0})},H=()=>{x.post(route("stock-alerts.bulk-mark-read"),{},{preserveState:!0})};return(o,t)=>(l(),j(E,{title:"Alertas de Stock"},{header:p(()=>[e("div",q,[t[7]||(t[7]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Alertas de Stock ",-1)),e("div",G,[e("button",{onClick:H,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center",disabled:_.value===0},t[6]||(t[6]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),N(" Marcar Todas Leídas ")]),8,J)])])]),default:p(()=>[e("div",K,[e("div",P,[e("div",Q,[e("div",W,[e("div",X,[t[9]||(t[9]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5v-5zM9 7H4l5-5v5z"})])])],-1)),e("div",Y,[t[8]||(t[8]=e("div",{class:"text-sm font-medium text-gray-500"},"Total Alertas",-1)),e("div",Z,n(d.stats.total||0),1)])])]),e("div",ee,[e("div",te,[t[11]||(t[11]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])])],-1)),e("div",se,[t[10]||(t[10]=e("div",{class:"text-sm font-medium text-gray-500"},"Críticas",-1)),e("div",oe,n(d.stats.critical||0),1)])])]),e("div",le,[e("div",re,[t[13]||(t[13]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",ne,[t[12]||(t[12]=e("div",{class:"text-sm font-medium text-gray-500"},"Sin Leer",-1)),e("div",ie,n(_.value),1)])])]),e("div",de,[e("div",ae,[t[15]||(t[15]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",ue,[t[14]||(t[14]=e("div",{class:"text-sm font-medium text-gray-500"},"Resueltas",-1)),e("div",ce,n(d.stats.resolved||0),1)])])])]),e("div",me,[e("div",xe,[e("div",ge,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Buscar",-1)),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.search=s),type:"text",placeholder:"Nombre del elemento...",class:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",onInput:t[1]||(t[1]=(...s)=>v(M)&&v(M)(...s))},null,544),[[F,i.search]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tipo de Alerta",-1)),f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.alert_type=s),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:m},t[17]||(t[17]=[e("option",{value:""},"Todos los tipos",-1),e("option",{value:"Agotado"},"Agotado",-1),e("option",{value:"Crítico"},"Crítico",-1),e("option",{value:"Mínimo"},"Mínimo",-1),e("option",{value:"Máximo"},"Máximo",-1)]),544),[[b,i.alert_type]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Estado",-1)),f(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>i.status=s),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:m},t[19]||(t[19]=[e("option",{value:""},"Todos los estados",-1),e("option",{value:"unread"},"Sin Leer",-1),e("option",{value:"read"},"Leídas",-1),e("option",{value:"unresolved"},"Sin Resolver",-1),e("option",{value:"resolved"},"Resueltas",-1)]),544),[[b,i.status]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Categoría",-1)),f(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>i.category=s),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:m},[t[21]||(t[21]=e("option",{value:""},"Todas las categorías",-1)),(l(!0),r(w,null,y(d.categories,s=>(l(),r("option",{key:s,value:s},n(s),9,fe))),128))],544),[[b,i.category]])]),e("div",{class:"flex items-end"},[e("button",{onClick:z,class:"w-full bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"}," Limpiar Filtros ")])])])]),e("div",ve,[e("div",he,[d.alerts.data.length===0?(l(),r("div",pe,t[23]||(t[23]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("p",null,"No hay alertas que coincidan con los filtros",-1),e("p",{class:"text-sm"},"Intenta ajustar los criterios de búsqueda",-1)]))):(l(),r("div",be,[(l(!0),r(w,null,y(d.alerts.data,s=>(l(),r("div",{key:s.id,class:g(["border rounded-lg p-4 transition-all duration-200 hover:shadow-md cursor-pointer",[B(s),s.is_read?"bg-white":"bg-blue-50"]]),onClick:a=>I(s)},[e("div",we,[e("div",ke,[e("div",{class:g(["w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",L(s.alert_type)])},[(l(),r("svg",{class:g(["w-5 h-5",S(s.alert_type)]),fill:"currentColor",viewBox:"0 0 20 20"},[s.alert_type==="Agotado"?(l(),r("path",_e)):s.alert_type==="Crítico"?(l(),r("path",Me)):s.alert_type==="Mínimo"?(l(),r("path",Ce)):(l(),r("path",je))],2))],2),e("div",Ae,[e("div",ze,[e("h4",Be,n(s.element.name),1),e("span",{class:g(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",T(s.alert_type)])},n(s.alert_type),3),e("span",Le,n(s.element.category),1)]),e("p",Se,n(s.message),1),e("div",Te,[e("div",Ve,[e("span",null,"Stock actual: "+n(s.element.current_stock)+" "+n(s.element.unit),1),e("span",null,"Mínimo: "+n(s.element.min_stock),1),s.element.max_stock>0?(l(),r("span",Ie,"Máximo: "+n(s.element.max_stock),1)):u("",!0)]),e("span",null,n(V(s.date)),1)])])]),e("div",De,[s.is_read?u("",!0):(l(),r("div",He)),s.is_resolved?(l(),r("span",Re," Resuelta ")):u("",!0),e("div",$e,[s.is_read?u("",!0):(l(),r("button",{key:0,onClick:k(a=>C(s),["stop"]),class:"text-blue-600 hover:text-blue-800 p-1",title:"Marcar como leída"},t[24]||(t[24]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]),8,Ne)),s.is_resolved?u("",!0):(l(),r("button",{key:1,onClick:k(a=>D(s),["stop"]),class:"text-green-600 hover:text-green-800 p-1",title:"Marcar como resuelta"},t[25]||(t[25]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]),8,Fe)),U(v(A),{href:o.route("elements.show",s.element.id),class:"text-gray-600 hover:text-gray-800 p-1",title:"Ver elemento",onClick:t[5]||(t[5]=k(()=>{},["stop"]))},{default:p(()=>t[26]||(t[26]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])),_:2},1032,["href"])])])])],10,ye))),128))])),d.alerts.links?(l(),r("div",Ue,[e("div",Ee,[e("div",Oe," Mostrando "+n(d.alerts.from)+" a "+n(d.alerts.to)+" de "+n(d.alerts.total)+" alertas ",1),e("div",qe,[(l(!0),r(w,null,y(d.alerts.links,s=>(l(),j(v(A),{key:s.label,href:s.url,class:g(["px-3 py-2 text-sm rounded-md",s.active?"bg-blue-500 text-white":s.url?"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 cursor-not-allowed"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])])):u("",!0)])])])])]),_:1}))}};export{We as default};
