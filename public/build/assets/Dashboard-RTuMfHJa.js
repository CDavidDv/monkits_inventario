import{r as a,c as N,w as i,o as u,a as t,t as n,b as y,f as h,u as k,i as _,d as c,g as C,F as j,p as L,j as m,k as w,v as $,n as q,T as R}from"./app-BGSGR9N6.js";import{_ as F}from"./AppLayout-zJCsKXdi.js";import{_ as U}from"./Modal-B1_DHglY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"py-12"},E={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},I={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},P={class:"flex items-center"},O={class:"ml-4"},G={class:"text-2xl font-semibold text-gray-900"},K={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},Q={class:"flex items-center"},J={class:"ml-4"},W={class:"text-2xl font-semibold text-gray-900"},X={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},Y={class:"flex items-center"},Z={class:"ml-4"},tt={class:"text-2xl font-semibold text-gray-900"},et={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},st={class:"flex items-center"},ot={class:"ml-4"},nt={class:"text-2xl font-semibold text-gray-900"},rt={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6 mb-8"},lt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},dt={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6 mb-8"},at={class:"flex items-center justify-between mb-4"},it={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},ut={class:"overflow-x-auto"},ct={class:"min-w-full divide-y divide-gray-200"},mt={class:"bg-white divide-y divide-gray-200"},pt={class:"px-6 py-4 whitespace-nowrap"},xt={class:"flex items-center"},gt={class:"text-sm font-medium text-gray-900"},ft={class:"px-6 py-4 whitespace-nowrap"},vt={class:"text-sm text-gray-900"},bt={class:"px-6 py-4 whitespace-nowrap"},yt={class:"text-sm text-gray-900"},ht={class:"px-6 py-4 whitespace-nowrap"},wt={class:"text-sm text-gray-900"},kt={class:"px-6 py-4 whitespace-nowrap"},_t=["onClick"],Ct={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},jt={class:"flex items-center justify-between mb-4"},Mt={class:"overflow-x-auto"},St={class:"min-w-full divide-y divide-gray-200"},At={class:"bg-white divide-y divide-gray-200"},Vt={class:"px-6 py-4 whitespace-nowrap"},Bt={class:"text-sm text-gray-900"},Tt={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"text-sm font-medium text-gray-900"},Nt={class:"px-6 py-4 whitespace-nowrap"},Lt={class:"px-6 py-4 whitespace-nowrap"},$t={class:"text-sm text-gray-900"},qt={class:"px-6 py-4 whitespace-nowrap"},Rt={class:"text-sm text-gray-900"},Ft={class:"p-6"},Ut={class:"text-lg font-medium text-gray-900 mb-4"},zt={class:"mb-4"},Et={class:"mb-4"},Ht={class:"mb-4"},It=["value"],Pt={class:"mb-4"},Ot={class:"mb-4"},Gt={class:"flex justify-end space-x-3"},Kt={type:"submit",class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},Zt={__name:"Dashboard",props:{stats:Object,lowStockComponents:Array,recentMovements:Array},setup(l){const d=a(!1),p=a("add"),x=a({}),g=a(1),f=a(""),v=a(""),b=a(""),M={venta:"Venta",armado:"Armado de Kit",dañado:"Dañado/Defectuoso",ajuste:"Ajuste de Inventario",transferencia:"Transferencia",devolucion:"Devolución",perdida:"Pérdida",donacion:"Donación",mantenimiento:"Mantenimiento",otro:"Otro"},S=(o,e)=>{x.value=o,p.value=e,g.value=1,f.value="",v.value="",b.value="",d.value=!0},A=()=>{const o=R({component_id:x.value.id,quantity:g.value,concept:f.value,reference:v.value,notes:b.value});p.value==="add"?o.post(route("worker.add-stock"),{onSuccess:()=>{d.value=!1,o.reset()}}):o.post(route("worker.remove-stock"),{onSuccess:()=>{d.value=!1,o.reset()}})},V=o=>new Intl.NumberFormat("es-ES").format(o),B=o=>new Date(o).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),T=o=>({in:"bg-green-100 text-green-800",out:"bg-red-100 text-red-800",adjustment:"bg-yellow-100 text-yellow-800",adjustment_in:"bg-blue-100 text-blue-800",adjustment_out:"bg-orange-100 text-orange-800"})[o]||"bg-gray-100 text-gray-800",D=o=>({in:"Entrada",out:"Salida",adjustment:"Ajuste",adjustment_in:"Ajuste +",adjustment_out:"Ajuste -"})[o]||o;return(o,e)=>(u(),N(F,{title:"Panel de Trabajador"},{header:i(()=>e[8]||(e[8]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Panel de Trabajador ",-1)])),default:i(()=>[t("div",z,[t("div",E,[t("div",H,[t("div",I,[t("div",P,[e[10]||(e[10]=t("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),t("div",O,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Componentes",-1)),t("p",G,n(l.stats.total_components),1)])])]),t("div",K,[t("div",Q,[e[12]||(e[12]=t("div",{class:"p-3 rounded-full bg-red-100 text-red-600"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t("div",J,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-600"},"Stock Bajo",-1)),t("p",W,n(l.stats.low_stock_items),1)])])]),t("div",X,[t("div",Y,[e[14]||(e[14]=t("div",{class:"p-3 rounded-full bg-green-100 text-green-600"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1)),t("div",Z,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-600"},"Movimientos Hoy",-1)),t("p",tt,n(l.stats.movements_today),1)])])]),t("div",et,[t("div",st,[e[16]||(e[16]=t("div",{class:"p-3 rounded-full bg-purple-100 text-purple-600"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),t("div",ot,[e[15]||(e[15]=t("p",{class:"text-sm font-medium text-gray-600"},"Valor Total",-1)),t("p",nt,"$"+n(V(l.stats.total_value)),1)])])])]),t("div",rt,[e[20]||(e[20]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Acciones Rápidas",-1)),t("div",lt,[y(k(_),{href:o.route("worker.inventory"),class:"flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:i(()=>e[17]||(e[17]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1),h(" Gestionar Inventario ")])),_:1},8,["href"]),y(k(_),{href:o.route("worker.movements"),class:"flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},{default:i(()=>e[18]||(e[18]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),h(" Ver Movimientos ")])),_:1},8,["href"]),t("button",{onClick:e[0]||(e[0]=s=>d.value=!0),class:"flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500"},e[19]||(e[19]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),h(" Agregar Stock ")]))])]),t("div",dt,[t("div",at,[e[21]||(e[21]=t("h3",{class:"text-lg font-medium text-gray-900"},"Componentes con Stock Bajo",-1)),t("span",it,n(l.lowStockComponents.length)+" componentes ",1)]),t("div",ut,[t("table",ct,[e[22]||(e[22]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Componente"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Categoría"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Stock Actual"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Stock Mínimo"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones")])],-1)),t("tbody",mt,[(u(!0),c(j,null,C(l.lowStockComponents,s=>{var r;return u(),c("tr",{key:s.id},[t("td",pt,[t("div",xt,[t("div",gt,n(s.name),1)])]),t("td",ft,[t("div",vt,n(((r=s.category)==null?void 0:r.name)||"Sin categoría"),1)]),t("td",bt,[t("div",yt,n(s.current_quantity),1)]),t("td",ht,[t("div",wt,n(s.min_quantity),1)]),t("td",kt,[t("button",{onClick:Qt=>S(s,"add"),class:"text-blue-600 hover:text-blue-900 text-sm font-medium"}," Agregar Stock ",8,_t)])])}),128))])])])]),t("div",Ct,[t("div",jt,[e[24]||(e[24]=t("h3",{class:"text-lg font-medium text-gray-900"},"Mis Movimientos Recientes",-1)),y(k(_),{href:o.route("worker.movements"),class:"text-sm text-blue-600 hover:text-blue-500"},{default:i(()=>e[23]||(e[23]=[h(" Ver todos → ")])),_:1},8,["href"])]),t("div",Mt,[t("table",St,[e[25]||(e[25]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fecha"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Componente"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tipo"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cantidad"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Concepto")])],-1)),t("tbody",At,[(u(!0),c(j,null,C(l.recentMovements,s=>{var r;return u(),c("tr",{key:s.id},[t("td",Vt,[t("div",Bt,n(B(s.created_at)),1)]),t("td",Tt,[t("div",Dt,n((r=s.component)==null?void 0:r.name),1)]),t("td",Nt,[t("span",{class:q([T(s.type),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},n(D(s.type)),3)]),t("td",Lt,[t("div",$t,n(s.quantity),1)]),t("td",qt,[t("div",Rt,n(s.concept),1)])])}),128))])])])])])]),y(U,{show:d.value,onClose:e[7]||(e[7]=s=>d.value=!1)},{default:i(()=>[t("div",Ft,[t("h3",Ut,n(p.value==="add"?"Agregar":"Remover")+" Stock ",1),t("form",{onSubmit:L(A,["prevent"])},[t("div",zt,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Componente ",-1)),m(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>x.value.name=s),disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"},null,512),[[w,x.value.name]])]),t("div",Et,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Cantidad ",-1)),m(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=s=>g.value=s),min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},null,512),[[w,g.value]])]),t("div",Ht,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Concepto ",-1)),m(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>f.value=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},[e[28]||(e[28]=t("option",{value:""},"Seleccionar concepto",-1)),(u(),c(j,null,C(M,(s,r)=>t("option",{key:r,value:r},n(s),9,It)),64))],512),[[$,f.value]])]),t("div",Pt,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Referencia (opcional) ",-1)),m(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>v.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Factura, orden, etc."},null,512),[[w,v.value]])]),t("div",Ot,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Notas (opcional) ",-1)),m(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=s=>b.value=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Notas adicionales..."},null,512),[[w,b.value]])]),t("div",Gt,[t("button",{type:"button",onClick:e[6]||(e[6]=s=>d.value=!1),class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Cancelar "),t("button",Kt,n(p.value==="add"?"Agregar":"Remover")+" Stock ",1)])],32)])]),_:1},8,["show"])]),_:1}))}};export{Zt as default};
