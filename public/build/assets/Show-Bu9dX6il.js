import{c as D,w as x,o as r,a as e,b,f as y,t as l,d as n,e as a,F as v,g as f,n as B,l as R}from"./app-Bbm6nPfF.js";import{_ as I}from"./AppLayout-BVLftzrV.js";import{C as O}from"./Container-s7YzfQE3.js";import{_}from"./Badge-o4eobLzi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:""},V={class:"mb-6"},z={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},E={class:"flex items-center justify-between"},L={class:"text-2xl font-bold text-gray-900"},U={class:"text-sm text-gray-600 mt-1"},P={class:"flex items-center space-x-3"},T={class:"px-3 py-1 text-sm font-medium bg-gray-100 text-gray-800 rounded-full"},$={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},H={class:"lg:col-span-2"},q={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},K={class:"space-y-4"},J={class:"grid grid-cols-2 gap-4"},Z={class:"mt-1 text-sm font-medium text-gray-900"},G={class:"mt-1 text-sm text-gray-900"},Q={class:"mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded-lg"},W={class:"mt-2 flex items-center"},X={class:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm font-medium mr-3"},Y={class:"text-sm font-medium text-gray-900"},ee={key:0,class:"text-xs text-gray-500"},te={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},oe={key:0},le={class:"bg-red-50 border border-red-200 rounded-lg p-4"},re={class:"space-y-2"},ne={class:"font-medium text-red-800"},ie={class:"text-red-700 ml-2"},ae={key:1},de={class:"bg-green-50 border border-green-200 rounded-lg p-4"},ce={class:"space-y-2"},ge={class:"font-medium text-green-800"},me={class:"text-green-700 ml-2"},ue={key:0,class:"mt-6"},xe={class:"bg-gray-50 border border-gray-200 rounded-lg overflow-hidden"},be={class:"w-full"},ye={class:"divide-y divide-gray-200"},ve={class:"px-4 py-3 text-sm font-medium text-gray-900"},fe={class:"px-4 py-3 text-sm text-red-600"},he={class:"px-4 py-3 text-sm text-green-600"},pe={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},we={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},ke={class:"flex items-center"},_e={class:"text-sm font-medium text-blue-900"},Ae={class:"text-sm text-blue-700"},Ce={key:0,class:"text-sm text-blue-700"},Me={class:"lg:col-span-1"},je={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},Se={class:"space-y-4"},Ne={class:"mt-1 text-sm text-gray-900"},De={class:"mt-1 text-sm text-gray-900 font-mono bg-gray-100 px-2 py-1 rounded"},Be={class:"mt-1 text-xs text-gray-900 font-mono bg-gray-100 px-2 py-1 rounded break-all"},Re={class:"mt-1 text-xs text-gray-900 bg-gray-100 px-2 py-1 rounded break-words"},Ie={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Oe={class:"space-y-3"},Fe={class:"flex items-center justify-between"},Ve={class:"flex items-center justify-between"},ze={class:"text-sm font-medium text-gray-900"},Ee={class:"flex items-center justify-between"},He={__name:"Show",props:{log:Object},setup(s){const c=s,A=()=>{R.visit(route("system-logs.index"))},C=o=>new Date(o).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),M=o=>new Date(o).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"}),m=o=>({name:"Nombre",email:"Email",current_stock:"Stock Actual",min_stock:"Stock Mínimo",max_stock:"Stock Máximo",price:"Precio",description:"Descripción",status:"Estado",created_at:"Fecha de Creación",updated_at:"Fecha de Actualización"})[o]||o.charAt(0).toUpperCase()+o.slice(1).replace("_"," "),g=o=>o==null?"N/A":typeof o=="boolean"?o?"Sí":"No":typeof o=="object"?JSON.stringify(o,null,2):String(o),j=o=>({"App\\Models\\Item":"Item","App\\Models\\User":"Usuario","App\\Models\\Category":"Categoría","App\\Models\\Supplier":"Proveedor","App\\Models\\InventoryMovement":"Movimiento de Inventario"})[o]||o.split("\\").pop(),S=o=>({create:"green",update:"blue",delete:"red",login:"green",logout:"gray",view:"blue",export:"purple",import:"indigo",restore:"yellow",force_delete:"red"})[o]||"gray",h=o=>({create:{label:"Bajo",color:"green"},update:{label:"Medio",color:"yellow"},delete:{label:"Alto",color:"red"},force_delete:{label:"Crítico",color:"red"},login:{label:"Bajo",color:"green"},logout:{label:"Bajo",color:"green"},view:{label:"Muy Bajo",color:"gray"},export:{label:"Medio",color:"yellow"},import:{label:"Alto",color:"orange"},restore:{label:"Alto",color:"orange"}})[o]||{label:"Desconocido",color:"gray"},u=o=>({create:"Creación",update:"Modificación",delete:"Eliminación",force_delete:"Eliminación Permanente",login:"Autenticación",logout:"Autenticación",view:"Consulta",export:"Exportación",import:"Importación",restore:"Restauración"})[o]||"Otra",p=o=>["delete","force_delete","import","restore"].includes(o),N=()=>{const o=c.log.old_values?Object.keys(c.log.old_values):[],t=c.log.new_values?Object.keys(c.log.new_values):[];return[...new Set([...o,...t])]};return(o,t)=>(r(),D(I,{title:"Detalles del Registro de Auditoría"},{header:x(()=>t[0]||(t[0]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Detalles del Registro de Auditoría ",-1)])),default:x(()=>[e("div",F,[b(O,null,{default:x(()=>{var w,k;return[e("div",V,[e("button",{onClick:A,class:"inline-flex items-center text-blue-600 hover:text-blue-500 mb-4"},t[1]||(t[1]=[e("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),y(" Volver a Registros ")])),e("div",z,[e("div",E,[e("div",null,[e("h1",L,"Registro de Auditoría #"+l(s.log.id),1),e("p",U,l(C(s.log.created_at)),1)]),e("div",P,[b(_,{color:S(s.log.action),size:"lg",text:u(s.log.action)},null,8,["color","text"]),e("span",T,l(s.log.module||"Sistema"),1)])])])]),e("div",$,[e("div",H,[e("div",q,[t[6]||(t[6]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Información Principal",-1)),e("div",K,[e("div",J,[e("div",null,[t[2]||(t[2]=e("label",{class:"block text-sm font-medium text-gray-500"},"Acción",-1)),e("p",Z,l(u(s.log.action)),1)]),e("div",null,[t[3]||(t[3]=e("label",{class:"block text-sm font-medium text-gray-500"},"Módulo",-1)),e("p",G,l(s.log.module||"Sistema"),1)])]),e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-gray-500"},"Descripción",-1)),e("p",Q,l(s.log.description),1)]),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-500"},"Usuario Responsable",-1)),e("div",W,[e("div",X,l(s.log.user?s.log.user.name.charAt(0).toUpperCase():"S"),1),e("div",null,[e("p",Y,l(((w=s.log.user)==null?void 0:w.name)||"Sistema"),1),(k=s.log.user)!=null&&k.email?(r(),n("p",ee,l(s.log.user.email),1)):a("",!0)])])])])]),s.log.old_values||s.log.new_values?(r(),n("div",te,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Cambios Realizados",-1)),e("div",se,[s.log.old_values&&Object.keys(s.log.old_values).length>0?(r(),n("div",oe,[t[7]||(t[7]=e("h3",{class:"text-md font-medium text-gray-900 mb-3 flex items-center"},[e("svg",{class:"h-5 w-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})]),y(" Valores Anteriores ")],-1)),e("div",le,[e("div",re,[(r(!0),n(v,null,f(s.log.old_values,(i,d)=>(r(),n("div",{key:`old-${d}`,class:"text-sm"},[e("span",ne,l(m(d))+":",1),e("span",ie,l(g(i)),1)]))),128))])])])):a("",!0),s.log.new_values&&Object.keys(s.log.new_values).length>0?(r(),n("div",ae,[t[8]||(t[8]=e("h3",{class:"text-md font-medium text-gray-900 mb-3 flex items-center"},[e("svg",{class:"h-5 w-5 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),y(" Valores Nuevos ")],-1)),e("div",de,[e("div",ce,[(r(!0),n(v,null,f(s.log.new_values,(i,d)=>(r(),n("div",{key:`new-${d}`,class:"text-sm"},[e("span",ge,l(m(d))+":",1),e("span",me,l(g(i)),1)]))),128))])])])):a("",!0)]),s.log.old_values&&s.log.new_values?(r(),n("div",ue,[t[10]||(t[10]=e("h3",{class:"text-md font-medium text-gray-900 mb-3"},"Comparación de Cambios",-1)),e("div",xe,[e("table",be,[t[9]||(t[9]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Campo"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Antes"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Después")])],-1)),e("tbody",ye,[(r(!0),n(v,null,f(N(),i=>(r(),n("tr",{key:`compare-${i}`,class:"hover:bg-gray-50"},[e("td",ve,l(m(i)),1),e("td",fe,l(g(s.log.old_values[i])||"-"),1),e("td",he,l(g(s.log.new_values[i])||"-"),1)]))),128))])])])])):a("",!0)])):a("",!0),s.log.loggable?(r(),n("div",pe,[t[13]||(t[13]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Objeto Relacionado",-1)),e("div",we,[e("div",ke,[t[12]||(t[12]=e("svg",{class:"h-8 w-8 text-blue-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17v4a2 2 0 002 2h4M13 13h4a2 2 0 012 2v4a2 2 0 01-2 2H9a2 2 0 01-2-2v-4a2 2 0 012-2z"})],-1)),e("div",null,[e("p",_e,l(j(s.log.loggable_type)),1),e("p",Ae,"ID: "+l(s.log.loggable_id),1),s.log.loggable.name?(r(),n("p",Ce,l(s.log.loggable.name),1)):a("",!0)])])])])):a("",!0)]),e("div",Me,[e("div",je,[t[18]||(t[18]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Información Técnica",-1)),e("div",Se,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-500"},"Fecha y Hora",-1)),e("p",Ne,l(M(s.log.created_at)),1)]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-500"},"Dirección IP",-1)),e("p",De,l(s.log.ip_address||"N/A"),1)]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-500"},"ID de Sesión",-1)),e("p",Be,l(s.log.session_id||"N/A"),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-500"},"User Agent",-1)),e("p",Re,l(s.log.user_agent||"N/A"),1)])])]),e("div",Ie,[t[22]||(t[22]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Categorización",-1)),e("div",Oe,[e("div",Fe,[t[19]||(t[19]=e("span",{class:"text-sm text-gray-600"},"Nivel de Riesgo",-1)),b(_,{color:h(s.log.action).color,size:"sm",text:h(s.log.action).label},null,8,["color","text"])]),e("div",Ve,[t[20]||(t[20]=e("span",{class:"text-sm text-gray-600"},"Tipo de Operación",-1)),e("span",ze,l(u(s.log.action)),1)]),e("div",Ee,[t[21]||(t[21]=e("span",{class:"text-sm text-gray-600"},"Requiere Atención",-1)),e("span",{class:B([p(s.log.action)?"text-red-600":"text-green-600","text-sm font-medium"])},l(p(s.log.action)?"Sí":"No"),3)])])])])])]}),_:1})])]),_:1}))}};export{He as default};
