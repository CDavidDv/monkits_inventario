import{T as K,h as x,c as M,w as f,o as i,a as e,t as n,b as a,f as v,u as s,i as k,p as U,d as l,e as u,j as _,k as L,v as j,g as O,F as P}from"./app-BGSGR9N6.js";import{_ as z}from"./AppLayout-zJCsKXdi.js";import{C as F}from"./Container-8UzJuLum.js";import{_ as b}from"./InputLabel-DLNuKxC2.js";import{_ as h}from"./TextInput-BvlQmvMm.js";import{_ as g}from"./InputError-BL_jD_5_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"flex justify-between items-center"},T={class:"font-semibold text-xl text-gray-800 leading-tight"},$={class:"flex space-x-2"},G={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},R={class:"p-6"},H={class:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},J={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},Q={class:"text-yellow-900 ml-2"},W={class:"text-yellow-900 ml-2"},X={class:"space-y-6"},Y={key:0,class:"mt-1 text-sm text-orange-600"},Z={key:0,class:"mt-1 text-sm text-orange-600"},ee=["value"],te={key:0,class:"mt-1 text-sm text-orange-600"},oe={key:0,class:"bg-blue-50 p-4 rounded-lg"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},de={class:"text-blue-900 ml-2"},ie={class:"text-blue-900 ml-2"},ne={key:0,class:"mt-1 text-sm text-orange-600"},ae={key:0,class:"mt-1 text-sm text-orange-600"},le={key:0,class:"mt-1 text-sm text-orange-600"},re={key:1,class:"bg-orange-50 p-4 rounded-lg"},ue={class:"text-sm text-orange-600 space-y-1"},ce={key:0},me={key:1},pe={key:2},fe={key:3},be={key:4},ge={key:5},ye={key:2,class:"bg-red-50 border border-red-200 rounded-lg p-4"},xe={class:"flex items-center justify-end mt-6 space-x-3"},ve=["disabled"],ke={key:0},_e={key:1},Ne={__name:"Edit",props:{production:Object,kits:Array},setup(d){const c=d,t=K({name:c.production.name,description:c.production.description||"",kit_id:c.production.kit_id,quantity_requested:c.production.quantity_requested,due_date:y(c.production.due_date),notes:c.production.notes||""}),B=x(()=>{const m=new Date;return m.setDate(m.getDate()+1),m.toISOString().slice(0,16)}),p=x(()=>t.kit_id?c.kits.find(m=>m.id==t.kit_id):null),w=x(()=>t.name!==c.production.name||t.description!==(c.production.description||"")||t.kit_id!=c.production.kit_id||t.quantity_requested!==c.production.quantity_requested||t.due_date!==y(c.production.due_date)||t.notes!==(c.production.notes||"")),q=x(()=>(!p.value||t.quantity_requested<=0,!1));function y(m){return m?new Date(m).toISOString().slice(0,16):""}const E=()=>{t.quantity_requested<=0&&(t.quantity_requested=1)},I=()=>{t.put(route("production.update",c.production.id))};return(m,o)=>(i(),M(z,{title:"Editar Orden de Producción"},{header:f(()=>[e("div",A,[e("h2",T," Editar Orden de Producción: "+n(d.production.name),1),e("div",$,[a(s(k),{href:m.route("production.show",d.production.id),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"},{default:f(()=>o[6]||(o[6]=[v(" Ver Detalles ")])),_:1},8,["href"]),a(s(k),{href:m.route("production.index"),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"},{default:f(()=>o[7]||(o[7]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),v(" Volver ")])),_:1},8,["href"])])])]),default:f(()=>[a(F,null,{default:f(()=>{var C,V,D,S,N;return[e("div",G,[e("div",R,[e("div",H,[o[11]||(o[11]=e("h3",{class:"text-lg font-medium text-yellow-900 mb-2"},"Información Actual",-1)),e("div",J,[o[10]||(o[10]=e("div",null,[e("span",{class:"font-medium text-yellow-800"},"Estado:"),e("span",{class:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800"}," Pendiente ")],-1)),e("div",null,[o[8]||(o[8]=e("span",{class:"font-medium text-yellow-800"},"Creado:",-1)),e("span",Q,n(new Date(d.production.created_at).toLocaleDateString("es-ES")),1)]),e("div",null,[o[9]||(o[9]=e("span",{class:"font-medium text-yellow-800"},"Creado por:",-1)),e("span",W,n(((C=d.production.creator)==null?void 0:C.name)||"Usuario desconocido"),1)])])]),e("form",{onSubmit:U(I,["prevent"])},[e("div",X,[e("div",null,[a(b,{for:"name",value:"Nombre de la Orden *"}),a(h,{id:"name",modelValue:s(t).name,"onUpdate:modelValue":o[0]||(o[0]=r=>s(t).name=r),type:"text",class:"mt-1 block w-full",required:"",placeholder:"Ej: Producción de Kit Arduino Básico - Lote 001"},null,8,["modelValue"]),a(g,{class:"mt-2",message:s(t).errors.name},null,8,["message"]),s(t).name!==d.production.name?(i(),l("div",Y,' ⚠️ Cambio: "'+n(d.production.name)+'" → "'+n(s(t).name)+'" ',1)):u("",!0)]),e("div",null,[a(b,{for:"description",value:"Descripción"}),_(e("textarea",{id:"description","onUpdate:modelValue":o[1]||(o[1]=r=>s(t).description=r),rows:"3",class:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Describe los detalles de esta orden de producción..."},null,512),[[L,s(t).description]]),a(g,{class:"mt-2",message:s(t).errors.description},null,8,["message"]),s(t).description!==(d.production.description||"")?(i(),l("div",Z," ⚠️ Descripción modificada ")):u("",!0)]),e("div",null,[a(b,{for:"kit_id",value:"Kit a Producir *"}),_(e("select",{id:"kit_id","onUpdate:modelValue":o[2]||(o[2]=r=>s(t).kit_id=r),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:"",onChange:E},[o[12]||(o[12]=e("option",{value:""},"Seleccionar kit",-1)),(i(!0),l(P,null,O(d.kits,r=>(i(),l("option",{key:r.id,value:r.id},n(r.name)+" (Stock actual: "+n(r.current_stock)+") ",9,ee))),128))],544),[[j,s(t).kit_id]]),a(g,{class:"mt-2",message:s(t).errors.kit_id},null,8,["message"]),s(t).kit_id!=d.production.kit_id?(i(),l("div",te,' ⚠️ Kit cambiado: "'+n((V=d.production.kit)==null?void 0:V.name)+'" → "'+n((D=p.value)==null?void 0:D.name)+'" ',1)):u("",!0)]),p.value?(i(),l("div",oe,[o[15]||(o[15]=e("h4",{class:"text-lg font-medium text-blue-900 mb-2"},"Información del Kit",-1)),e("div",se,[e("div",null,[o[13]||(o[13]=e("span",{class:"font-medium text-blue-800"},"Nombre:",-1)),e("span",de,n(p.value.name),1)]),e("div",null,[o[14]||(o[14]=e("span",{class:"font-medium text-blue-800"},"Stock actual:",-1)),e("span",ie,n(p.value.current_stock)+" unidades",1)])])])):u("",!0),e("div",null,[a(b,{for:"quantity_requested",value:"Cantidad a Producir *"}),a(h,{id:"quantity_requested",modelValue:s(t).quantity_requested,"onUpdate:modelValue":o[3]||(o[3]=r=>s(t).quantity_requested=r),modelModifiers:{number:!0},type:"number",min:"1",class:"mt-1 block w-full",required:"",placeholder:"Cantidad de kits a producir"},null,8,["modelValue"]),a(g,{class:"mt-2",message:s(t).errors.quantity_requested},null,8,["message"]),s(t).quantity_requested!==d.production.quantity_requested?(i(),l("div",ne," ⚠️ Cantidad cambiada: "+n(d.production.quantity_requested)+" → "+n(s(t).quantity_requested),1)):u("",!0)]),e("div",null,[a(b,{for:"due_date",value:"Fecha Límite"}),a(h,{id:"due_date",modelValue:s(t).due_date,"onUpdate:modelValue":o[4]||(o[4]=r=>s(t).due_date=r),type:"datetime-local",class:"mt-1 block w-full",min:B.value},null,8,["modelValue","min"]),a(g,{class:"mt-2",message:s(t).errors.due_date},null,8,["message"]),s(t).due_date!==y(d.production.due_date)?(i(),l("div",ae," ⚠️ Fecha límite modificada ")):u("",!0)]),e("div",null,[a(b,{for:"notes",value:"Notas Adicionales"}),_(e("textarea",{id:"notes","onUpdate:modelValue":o[5]||(o[5]=r=>s(t).notes=r),rows:"3",class:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Instrucciones especiales, consideraciones técnicas, etc."},null,512),[[L,s(t).notes]]),a(g,{class:"mt-2",message:s(t).errors.notes},null,8,["message"]),s(t).notes!==(d.production.notes||"")?(i(),l("div",le," ⚠️ Notas modificadas ")):u("",!0)]),w.value?(i(),l("div",re,[o[16]||(o[16]=e("h4",{class:"text-sm font-medium text-orange-700 mb-2"},"Resumen de Cambios:",-1)),e("ul",ue,[s(t).name!==d.production.name?(i(),l("li",ce,' • Nombre: "'+n(d.production.name)+'" → "'+n(s(t).name)+'" ',1)):u("",!0),s(t).description!==(d.production.description||"")?(i(),l("li",me," • Descripción actualizada ")):u("",!0),s(t).kit_id!=d.production.kit_id?(i(),l("li",pe,' • Kit: "'+n((S=d.production.kit)==null?void 0:S.name)+'" → "'+n((N=p.value)==null?void 0:N.name)+'" ',1)):u("",!0),s(t).quantity_requested!==d.production.quantity_requested?(i(),l("li",fe," • Cantidad: "+n(d.production.quantity_requested)+" → "+n(s(t).quantity_requested),1)):u("",!0),s(t).due_date!==y(d.production.due_date)?(i(),l("li",be," • Fecha límite actualizada ")):u("",!0),s(t).notes!==(d.production.notes||"")?(i(),l("li",ge," • Notas actualizadas ")):u("",!0)])])):u("",!0),q.value?(i(),l("div",ye,o[17]||(o[17]=[e("div",{class:"flex"},[e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])]),e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-medium text-red-800"},"Stock Insuficiente"),e("div",{class:"mt-2 text-sm text-red-700"},[e("p",null,"No hay suficientes componentes en stock para completar esta producción con la nueva configuración.")])])],-1)]))):u("",!0)]),e("div",xe,[a(s(k),{href:m.route("production.show",d.production.id),class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded"},{default:f(()=>o[18]||(o[18]=[v(" Cancelar ")])),_:1},8,["href"]),e("button",{type:"submit",disabled:s(t).processing||!w.value||q.value,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50"},[s(t).processing?(i(),l("span",ke,"Guardando...")):(i(),l("span",_e,"Guardar Cambios"))],8,ve)])],32)])])]}),_:1})]),_:1}))}};export{Ne as default};
