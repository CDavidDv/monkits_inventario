import{r as K,T as q,c as v,w as u,o as r,a as e,b as i,u as s,f as y,d as l,F as w,g as _,p as U,j as p,k as f,t as c,e as m,n as A,i as j,v as D}from"./app-BvBaJJHQ.js";import{c as M,_ as z,P as S,X as B,E as P}from"./AppLayout-DkYb2Hbh.js";import{C as T}from"./Container-CXfuoOaH.js";import{_ as L}from"./Modal-BhxCOV5u.js";import{P as k}from"./plus-D7rMiKNg.js";import{S as O}from"./square-pen-BnsArjw-.js";import{T as I}from"./trash-2-DvTAU1f7.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=M("LoaderCircleIcon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=M("SaveIcon",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),G={class:"w-full h-full p-4 space-y-6"},H={class:"flex items-center justify-between"},X={key:0,class:"bg-white rounded-lg shadow-sm overflow-hidden"},J={class:"overflow-x-auto"},Q={class:"w-full"},R={class:"bg-white divide-y divide-gray-200"},W={class:"px-6 py-4 whitespace-nowrap"},Y={class:"text-sm font-medium text-gray-900"},Z={key:0,class:"text-sm text-gray-500"},ee={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},te={key:0,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs"},se={key:1,class:"text-gray-400"},oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},re={class:"px-6 py-4 whitespace-nowrap"},le={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ae={class:"flex items-center gap-2"},ne={key:1,class:"bg-white rounded-lg shadow-sm p-8"},ie={class:"text-center"},de={class:"p-6"},ce={class:"flex items-center justify-between mb-4"},ue={key:0,class:"text-red-600 text-sm mt-1"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},me={key:0,class:"text-red-600 text-sm mt-1"},ge={key:0,class:"text-red-600 text-sm mt-1"},be={class:"flex items-center justify-between mb-2"},xe={key:0,class:"text-red-600 text-sm mb-2"},ye={key:1,class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center"},fe={key:2,class:"space-y-3"},he={class:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end"},ve=["onUpdate:modelValue"],we=["value"],_e=["onUpdate:modelValue"],ke={class:"flex justify-end"},Ce=["onClick"],Ve={class:"flex justify-end gap-3 pt-4 border-t"},je=["disabled"],De={__name:"index",props:{kits:{type:Object,default:()=>({data:[]})},categories:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},stats:{type:Object,default:()=>({total:0,available:0})},elements:{type:Array,default:()=>[]},components:{type:Object,default:()=>({})}},setup(g){const h=K(!1),o=q({name:"",description:"",category:"",components:[]}),C=()=>{h.value=!0},b=()=>{h.value=!1,o.reset(),o.clearErrors()},V=()=>{o.components.push({element_id:"",quantity:1})},N=x=>{o.components.splice(x,1)},E=()=>{o.post(route("kits.store"),{onSuccess:()=>{b()},preserveScroll:!0})};return(x,t)=>(r(),v(z,{title:"Gestión de Kits"},{default:u(()=>[e("div",G,[i(T,null,{title:u(()=>t[3]||(t[3]=[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("p",{class:"text-gray-600 mt-2"},"Administra los kits de elementos del inventario")])],-1)])),default:u(()=>{var n;return[e("div",H,[t[5]||(t[5]=e("span",null,null,-1)),e("button",{onClick:C,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center"},[i(s(k),{class:"size-4 mr-2"}),t[4]||(t[4]=y(" Crear Kit "))])]),(n=g.kits)!=null&&n.data&&g.kits.data.length>0?(r(),l("div",X,[e("div",J,[e("table",Q,[t[6]||(t[6]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Categoría "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Componentes "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Disponibilidad "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Acciones ")])],-1)),e("tbody",R,[(r(!0),l(w,null,_(g.kits.data,a=>{var d;return r(),l("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",W,[e("div",null,[e("div",Y,c(a.name),1),a.description?(r(),l("div",Z,c(a.description),1)):m("",!0)])]),e("td",ee,[a.category?(r(),l("span",te,c(a.category),1)):(r(),l("span",se,"Sin categoría"))]),e("td",oe,c(((d=a.kit_components)==null?void 0:d.length)||0)+" componentes ",1),e("td",re,[e("span",{class:A([a.can_be_assembled?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 py-1 rounded-full text-xs font-medium"])},c(a.can_be_assembled?"Disponible":"No disponible"),3)]),e("td",le,[e("div",ae,[i(s(j),{href:x.route("kits.show",a.id),class:"text-blue-600 hover:text-blue-900 p-1",title:"Ver detalles"},{default:u(()=>[i(s(P),{class:"w-4 h-4"})]),_:2},1032,["href"]),i(s(j),{href:x.route("kits.edit",a.id),class:"text-indigo-600 hover:text-indigo-900 p-1",title:"Editar"},{default:u(()=>[i(s(O),{class:"w-4 h-4"})]),_:2},1032,["href"])])])])}),128))])])])])):(r(),l("div",ne,[e("div",ie,[i(s(S),{class:"w-16 h-16 text-gray-400 mb-4 mx-auto"}),t[8]||(t[8]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No hay kits disponibles",-1)),t[9]||(t[9]=e("p",{class:"text-gray-500 mb-4"},"Comienza creando tu primer kit.",-1)),e("button",{onClick:C,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors inline-flex items-center"},[i(s(k),{class:"w-4 h-4 mr-2"}),t[7]||(t[7]=y(" Crear primer kit "))])])]))]}),_:1})]),i(L,{show:h.value,onClose:b},{default:u(()=>[e("div",de,[e("div",ce,[t[10]||(t[10]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Crear Nuevo Kit",-1)),e("button",{onClick:b,class:"text-gray-400 hover:text-gray-600"},[i(s(B),{class:"w-5 h-5"})])]),e("form",{onSubmit:U(E,["prevent"]),class:"space-y-4"},[e("div",null,[t[11]||(t[11]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-1"}," Nombre del Kit * ",-1)),p(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=n=>s(o).name=n),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Kit de Mantenimiento Básico"},null,512),[[f,s(o).name]]),s(o).errors.name?(r(),l("div",ue,c(s(o).errors.name),1)):m("",!0)]),e("div",pe,[e("div",null,[t[12]||(t[12]=e("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-1"}," Categoría ",-1)),p(e("input",{id:"category","onUpdate:modelValue":t[1]||(t[1]=n=>s(o).category=n),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Mantenimiento"},null,512),[[f,s(o).category]]),s(o).errors.category?(r(),l("div",me,c(s(o).errors.category),1)):m("",!0)])]),e("div",null,[t[13]||(t[13]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-1"}," Descripción ",-1)),p(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=n=>s(o).description=n),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe el propósito del kit..."},null,512),[[f,s(o).description]]),s(o).errors.description?(r(),l("div",ge,c(s(o).errors.description),1)):m("",!0)]),e("div",null,[e("div",be,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700"}," Componentes del Kit * ",-1)),e("button",{type:"button",onClick:V,class:"text-blue-600 hover:text-blue-800 text-sm flex items-center"},[i(s(k),{class:"w-4 h-4 mr-1"}),t[14]||(t[14]=y(" Agregar "))])]),s(o).errors.components?(r(),l("div",xe,c(s(o).errors.components),1)):m("",!0),s(o).components.length===0?(r(),l("div",ye,[i(s(S),{class:"w-12 h-12 text-gray-400 mx-auto mb-2"}),t[16]||(t[16]=e("p",{class:"text-gray-500 text-sm"},"No hay componentes agregados",-1)),e("button",{type:"button",onClick:V,class:"mt-2 text-blue-600 hover:text-blue-800 text-sm"}," Agregar primer componente ")])):(r(),l("div",fe,[(r(!0),l(w,null,_(s(o).components,(n,a)=>(r(),l("div",{key:a,class:"border border-gray-200 rounded-lg p-3"},[e("div",he,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Elemento * ",-1)),p(e("select",{"onUpdate:modelValue":d=>n.element_id=d,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[t[17]||(t[17]=e("option",{value:""},"Seleccionar elemento",-1)),(r(!0),l(w,null,_(g.elements,d=>(r(),l("option",{key:d.id,value:d.id},c(d.name)+" (Stock: "+c(d.current_stock)+") ",9,we))),128))],8,ve),[[D,n.element_id]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Cantidad * ",-1)),p(e("input",{"onUpdate:modelValue":d=>n.quantity=d,type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,_e),[[f,n.quantity,void 0,{number:!0}]])]),e("div",ke,[e("button",{type:"button",onClick:d=>N(a),class:"text-red-600 hover:text-red-800 p-2",title:"Eliminar componente"},[i(s(I),{class:"w-4 h-4"})],8,Ce)])])]))),128))]))]),e("div",Ve,[e("button",{type:"button",onClick:b,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"}," Cancelar "),e("button",{type:"submit",disabled:s(o).processing||s(o).components.length===0,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-2 rounded-lg transition-colors flex items-center"},[s(o).processing?(r(),v(s($),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):(r(),v(s(F),{key:1,class:"w-4 h-4 mr-2"})),y(" "+c(s(o).processing?"Guardando...":"Crear Kit"),1)],8,je)])],32)])]),_:1},8,["show"])]),_:1}))}};export{De as default};
