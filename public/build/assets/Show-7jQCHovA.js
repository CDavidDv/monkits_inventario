import{r as y,h as I,c as O,w as i,o as a,a as e,t as o,b as d,f as c,u as x,i as m,n as w,d as n,e as U,j as G,v as J,F as K,g as Q,l as R}from"./app-Bbm6nPfF.js";import{_ as W}from"./AppLayout-BVLftzrV.js";import{_ as X}from"./ConfirmationModal-D_IAYCXc.js";import{_ as Y}from"./SecondaryButton-lqUrONvz.js";import{_ as Z}from"./DangerButton-CjfkhQTj.js";import{C as P}from"./Container-s7YzfQE3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-BHoNVWH2.js";const ee={class:"flex justify-between items-center"},te={class:"font-semibold text-xl text-gray-800 leading-tight"},se={class:"flex space-x-2"},oe={class:""},re={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},le={class:"lg:col-span-2 bg-white overflow-hidden shadow-xl sm:rounded-lg"},ie={class:"p-6"},ae={class:"flex items-center justify-between mb-4"},ne={class:"flex items-center mb-6"},de={class:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-gray-700 font-bold text-2xl mr-4"},ce={class:"text-xl font-bold text-gray-900"},ue={class:"text-gray-500"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xe={class:"mt-1 text-sm text-gray-900"},me=["href"],ge={key:1,class:"text-gray-400"},fe={class:"mt-1 text-sm text-gray-900"},ve=["href"],he={key:1,class:"text-gray-400"},ye={class:"mt-1"},_e={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},be={class:"mt-1 text-sm text-gray-900"},we={class:"md:col-span-2"},ke={class:"mt-1 text-sm text-gray-900"},Ce={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Ee={class:"p-6"},Se={class:"space-y-4"},$e={class:"text-center p-4 bg-blue-50 rounded-lg"},Ae={class:"text-3xl font-bold text-blue-600"},Fe={class:"grid grid-cols-2 gap-4 text-sm"},Me={class:"text-center p-3 bg-green-50 rounded-lg"},Ne={class:"text-lg font-bold text-green-600"},je={class:"text-center p-3 bg-purple-50 rounded-lg"},Ve={class:"text-lg font-bold text-purple-600"},Be={class:"text-center p-3 bg-yellow-50 rounded-lg"},De={class:"text-lg font-bold text-yellow-600"},Le={class:"pt-4 border-t space-y-2"},Te={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mb-6"},ze={class:"p-6"},qe={class:"flex justify-between items-center mb-4"},He={class:"flex space-x-2"},Ie={key:0,class:"text-center py-8 text-gray-500"},Oe={key:1,class:"overflow-x-auto"},Ue={class:"min-w-full divide-y divide-gray-200"},Ge={class:"bg-white divide-y divide-gray-200"},Je={class:"px-6 py-4 whitespace-nowrap"},Ke={class:"flex items-center"},Qe={class:"text-sm font-medium text-gray-900"},Re={class:"text-sm text-gray-500"},We={class:"px-6 py-4 whitespace-nowrap"},Xe={class:"text-sm text-gray-900"},Ye={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ze={class:"font-medium text-green-600"},Pe={class:"text-xs text-gray-500"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},tt={class:"font-medium text-blue-600"},st={class:"text-xs text-gray-500"},ot={class:"px-6 py-4 whitespace-nowrap"},rt={key:0,class:"text-sm"},lt={class:"text-xs text-gray-500"},it={key:1,class:"text-sm text-gray-400"},at={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},nt={key:0,class:"font-medium text-purple-600"},dt={key:1,class:"text-gray-400"},ct={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ut={class:"flex space-x-2"},pt=["onClick"],wt={__name:"Show",props:{supplier:Object,stats:Object},setup(l){const u=l,_=y("name"),g=y(!1),f=y(null),b=y(!1),k=I(()=>u.supplier.element_prices?[...u.supplier.element_prices].sort((s,t)=>{switch(_.value){case"name":return s.element.name.localeCompare(t.element.name);case"category":return s.element.category.localeCompare(t.element.category);case"purchase_price":return(t.purchase_price||0)-(s.purchase_price||0);case"selling_price":return(t.selling_price||0)-(s.selling_price||0);case"margin":return h(t)-h(s);default:return 0}}):[]),N=()=>u.supplier.element_prices&&u.supplier.element_prices.length>0?"Activo":"Inactivo",j=()=>u.supplier.element_prices&&u.supplier.element_prices.length>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",V=s=>s.current_stock<=0?"Agotado":s.current_stock<=s.min_stock?"Stock Bajo":"Normal",B=s=>s.current_stock<=0?"text-red-600":s.current_stock<=s.min_stock?"text-yellow-600":"text-green-600",h=s=>!s.purchase_price||!s.selling_price?0:(s.selling_price-s.purchase_price)/s.purchase_price*100,D=s=>s>=30?"text-green-600":s>=15?"text-blue-600":s>=5?"text-yellow-600":"text-red-600",L=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),T=()=>{},z=()=>{u.supplier.email&&(window.location.href=`mailto:${u.supplier.email}?subject=Consulta de inventario`)},q=s=>{f.value=s,g.value=!0},H=()=>{f.value&&(b.value=!0,R.delete(route("element-prices.destroy",f.value.id),{onSuccess:()=>{g.value=!1,f.value=null},onFinish:()=>{b.value=!1}}))};return(s,t)=>(a(),O(W,{title:"Detalles del Proveedor"},{header:i(()=>[e("div",ee,[e("h2",te,o(l.supplier.name),1),e("div",se,[d(x(m),{href:s.route("suppliers.edit",l.supplier.id),class:"bg-blue-500 hover:bg-blue-700 text-gray-700 font-bold py-2 px-4 rounded inline-flex items-center"},{default:i(()=>t[3]||(t[3]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),c(" Editar ")])),_:1},8,["href"]),d(x(m),{href:s.route("suppliers.index"),class:"text-blue-600 hover:text-blue-800"},{default:i(()=>t[4]||(t[4]=[c(" ← Volver a la lista ")])),_:1},8,["href"])])])]),default:i(()=>[d(P,{class:""},{default:i(()=>{var p,v,C,E,S,$,A;return[e("div",oe,[e("div",re,[e("div",le,[e("div",ie,[e("div",ae,[t[5]||(t[5]=e("h3",{class:"text-lg font-medium text-gray-900"},"Información del Proveedor",-1)),e("span",{class:w(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",j()])},o(N()),3)]),e("div",ne,[e("div",de,o(l.supplier.name.charAt(0).toUpperCase()),1),e("div",null,[e("h4",ce,o(l.supplier.name),1),e("p",ue,o(l.supplier.contact||"Sin contacto asignado"),1)])]),e("div",pe,[e("div",null,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500"},"Email",-1)),e("dd",xe,[l.supplier.email?(a(),n("a",{key:0,href:`mailto:${l.supplier.email}`,class:"text-blue-600 hover:text-blue-800"},o(l.supplier.email),9,me)):(a(),n("span",ge,"No especificado"))])]),e("div",null,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500"},"Teléfono",-1)),e("dd",fe,[l.supplier.phone?(a(),n("a",{key:0,href:`tel:${l.supplier.phone}`,class:"text-blue-600 hover:text-blue-800"},o(l.supplier.phone),9,ve)):(a(),n("span",he,"No especificado"))])]),e("div",null,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500"},"País",-1)),e("dd",ye,[e("span",_e,o(l.supplier.country),1)])]),e("div",null,[t[9]||(t[9]=e("dt",{class:"text-sm font-medium text-gray-500"},"Fechas",-1)),e("dd",be," Creado: "+o(L(l.supplier.created_at)),1)]),e("div",we,[t[10]||(t[10]=e("dt",{class:"text-sm font-medium text-gray-500"},"Dirección",-1)),e("dd",ke,o(l.supplier.address),1)])])])]),e("div",Ce,[e("div",Ee,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Estadísticas",-1)),e("div",Se,[e("div",$e,[e("div",Ae,o((p=l.stats)==null?void 0:p.total_elements),1),t[11]||(t[11]=e("div",{class:"text-sm text-blue-700"},"Elementos Suministrados",-1))]),e("div",Fe,[e("div",Me,[e("div",Ne," $"+o(((C=(v=l.stats)==null?void 0:v.average_purchase_price)==null?void 0:C.toFixed(2))||"0.00"),1),t[12]||(t[12]=e("div",{class:"text-green-700"},"Precio Prom. Compra",-1))]),e("div",je,[e("div",Ve," $"+o(((S=(E=l.stats)==null?void 0:E.average_selling_price)==null?void 0:S.toFixed(2))||"0.00"),1),t[13]||(t[13]=e("div",{class:"text-purple-700"},"Precio Prom. Venta",-1))])]),e("div",Be,[e("div",De," $"+o(((A=($=l.stats)==null?void 0:$.total_inventory_value)==null?void 0:A.toFixed(2))||"0.00"),1),t[14]||(t[14]=e("div",{class:"text-yellow-700"},"Valor Total Inventario",-1))]),e("div",Le,[d(x(m),{href:s.route("element-prices.create",{supplier_id:l.supplier.id}),class:"w-full bg-green-500 hover:bg-green-700 text-gray-700 font-bold py-2 px-4 rounded text-center block"},{default:i(()=>t[15]||(t[15]=[c(" Agregar Precios ")])),_:1},8,["href"]),l.supplier.email?(a(),n("button",{key:0,onClick:z,class:"w-full bg-blue-500 hover:bg-blue-700 text-gray-700 font-bold py-2 px-4 rounded"}," Enviar Email ")):U("",!0)])])])])]),e("div",Te,[e("div",ze,[e("div",qe,[t[19]||(t[19]=e("h3",{class:"text-lg font-medium text-gray-900"},"Elementos y Precios",-1)),e("div",He,[G(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>_.value=r),onChange:T,class:"text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},t[17]||(t[17]=[e("option",{value:"name"},"Nombre",-1),e("option",{value:"category"},"Categoría",-1),e("option",{value:"purchase_price"},"Precio Compra",-1),e("option",{value:"selling_price"},"Precio Venta",-1),e("option",{value:"margin"},"Margen",-1)]),544),[[J,_.value]]),d(x(m),{href:s.route("element-prices.create",{supplier_id:l.supplier.id}),class:"bg-green-500 hover:bg-green-700 text-gray-700 font-bold py-2 px-4 rounded text-sm"},{default:i(()=>t[18]||(t[18]=[c(" Agregar Precio ")])),_:1},8,["href"])])]),k.value.length===0?(a(),n("div",Ie,t[20]||(t[20]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1),e("p",null,"Este proveedor aún no tiene elementos con precios asignados",-1),e("p",{class:"text-sm"},"Agrega precios para elementos específicos para empezar",-1)]))):(a(),n("div",Oe,[e("table",Ue,[t[22]||(t[22]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Elemento "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Stock Actual "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Precio Compra "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Precio Venta "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Margen "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Valor Stock "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Acciones ")])],-1)),e("tbody",Ge,[(a(!0),n(K,null,Q(k.value,r=>{var F,M;return a(),n("tr",{key:r.id,class:"hover:bg-gray-50"},[e("td",Je,[e("div",Ke,[e("div",null,[e("div",Qe,[d(x(m),{href:s.route("elements.show",r.element.id),class:"text-blue-600 hover:text-blue-800"},{default:i(()=>[c(o(r.element.name),1)]),_:2},1032,["href"])]),e("div",Re,o(r.element.category),1)])])]),e("td",We,[e("div",Xe,o(r.element.current_stock)+" "+o(r.element.unit),1),e("div",{class:w(["text-sm",B(r.element)])},o(V(r.element)),3)]),e("td",Ye,[e("div",Ze," $"+o(((F=r.purchase_price)==null?void 0:F.toFixed(2))||"N/A"),1),e("div",Pe,o(r.currency),1)]),e("td",et,[e("div",tt," $"+o(((M=r.selling_price)==null?void 0:M.toFixed(2))||"N/A"),1),e("div",st,o(r.currency),1)]),e("td",ot,[r.purchase_price&&r.selling_price?(a(),n("div",rt,[e("div",{class:w(["font-medium",D(h(r))])},o(h(r).toFixed(1))+"% ",3),e("div",lt," $"+o((r.selling_price-r.purchase_price).toFixed(2)),1)])):(a(),n("div",it,"N/A"))]),e("td",at,[r.purchase_price?(a(),n("div",nt," $"+o((r.element.current_stock*r.purchase_price).toFixed(2)),1)):(a(),n("div",dt,"N/A"))]),e("td",ct,[e("div",ut,[d(x(m),{href:s.route("element-prices.edit",r.id),class:"text-indigo-600 hover:text-indigo-900"},{default:i(()=>t[21]||(t[21]=[c(" Editar ")])),_:2},1032,["href"]),e("button",{onClick:xt=>q(r),class:"text-red-600 hover:text-red-900"}," Eliminar ",8,pt)])])])}),128))])])]))])]),t[23]||(t[23]=e("div",{class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},[e("div",{class:"p-6"},[e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Historial de Comunicaciones"),e("div",{class:"text-center py-8 text-gray-500"},[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.13 8.13 0 01-2.939-.547l-3.061 1.020a1 1 0 01-1.267-1.267l1.020-3.061A8.13 8.13 0 013 12a8 8 0 018-8 8 8 0 018 8z"})]),e("p",null,"No hay comunicaciones registradas"),e("p",{class:"text-sm"},"Las comunicaciones futuras aparecerán aquí")])])],-1))])]}),_:1}),d(X,{show:g.value,onClose:t[2]||(t[2]=p=>g.value=!1)},{title:i(()=>t[24]||(t[24]=[c(" Eliminar Precio ")])),content:i(()=>{var p,v;return[c(' ¿Estás seguro de que quieres eliminar el precio de "'+o((v=(p=f.value)==null?void 0:p.element)==null?void 0:v.name)+'" para este proveedor? Esta acción no se puede deshacer. ',1)]}),footer:i(()=>[d(Y,{onClick:t[1]||(t[1]=p=>g.value=!1)},{default:i(()=>t[25]||(t[25]=[c(" Cancelar ")])),_:1}),d(Z,{class:"ml-3",onClick:H,disabled:b.value},{default:i(()=>t[26]||(t[26]=[c(" Eliminar ")])),_:1},8,["disabled"])]),_:1},8,["show"])]),_:1}))}};export{wt as default};
