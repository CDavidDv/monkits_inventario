import{_ as L}from"./AppLayout-CCrStt77.js";import{C as P}from"./Container-DRjv08aA.js";import{r as p,q as T,c as K,w as b,o as m,a as t,b as $,t as s,z as u,d as _,g as S,F as I,e as M,l as q,n as O}from"./app-DwDI59q_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"pb-8 space-y-8"},X={class:"rounded-xl"},G={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},J={class:"bg-white rounded-lg p-4 shadow-lg border-l-4 border-red-500"},Q={class:"flex items-center justify-between"},U={class:"text-2xl font-bold text-red-600"},W={class:"bg-white rounded-lg p-4 shadow-lg border-l-4 border-yellow-500"},Y={class:"flex items-center justify-between"},Z={class:"text-2xl font-bold text-yellow-600"},tt={class:"bg-white rounded-lg p-4 shadow-lg border-l-4 border-green-500"},et={class:"flex items-center justify-between"},st={class:"text-2xl font-bold text-green-600"},ot={class:"bg-white rounded-lg p-4 shadow-lg border-l-4 border-blue-500"},lt={class:"flex items-center justify-between"},nt={class:"text-2xl font-bold text-blue-600"},rt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},it={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1"},at={class:"flex items-center justify-between mb-4"},dt={class:"flex items-center"},ct={class:"ml-4"},mt={class:"text-3xl font-bold text-gray-900"},ut={class:"text-right"},_t={class:"text-sm text-red-600 font-medium capitalize"},xt={class:"text-sm text-green-600 font-medium capitalize"},ft={class:"text-sm text-blue-600 font-medium capitalize"},gt={class:"w-full bg-gray-200 rounded-full h-2 overflow-hidden"},vt={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1"},ht={class:"flex items-center justify-between mb-4"},pt={class:"flex items-center"},bt={class:"ml-4"},kt={class:"text-3xl font-bold text-gray-900"},yt={class:"text-right"},wt={class:"text-sm text-red-600 font-medium capitalize"},jt={class:"text-sm text-green-600 font-medium capitalize"},St={class:"text-sm text-blue-600 font-medium capitalize"},It={class:"w-full bg-gray-200 rounded-full h-2 overflow-hidden"},Mt={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1"},Ct={class:"flex items-center justify-between mb-4"},Ft={class:"flex items-center"},Vt={class:"ml-4"},zt={class:"text-3xl font-bold text-gray-900"},Bt={class:"text-right"},Et={class:"text-sm text-red-600 font-medium capitalize"},Nt={class:"text-sm text-green-600 font-medium capitalize"},At={class:"text-sm text-blue-600 font-medium capitalize"},Dt={class:"w-full bg-gray-200 rounded-full h-2 overflow-hidden"},Ht={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Lt={class:"bg-white rounded-xl shadow-lg p-6"},Pt={class:"flex items-center justify-center"},Tt={class:"relative w-48 h-48"},Kt={class:"w-48 h-48 transform -rotate-90",viewBox:"0 0 100 100"},$t=["stroke-dasharray"],qt=["stroke-dasharray","stroke-dashoffset"],Ot=["stroke-dasharray","stroke-dashoffset"],Rt={class:"absolute inset-0 flex items-center justify-center"},Xt={class:"text-center"},Gt={class:"text-2xl font-bold text-gray-900"},Jt={class:"mt-6 space-y-2"},Qt={class:"flex items-center justify-between"},Ut={class:"text-sm font-medium"},Wt={class:"flex items-center justify-between"},Yt={class:"text-sm font-medium"},Zt={class:"flex items-center justify-between"},te={class:"text-sm font-medium"},ee={class:"bg-white rounded-xl shadow-lg p-6"},se={class:"space-y-4"},oe={class:"flex items-center justify-between"},le={class:"flex items-center"},ne={class:"w-32 bg-gray-200 rounded-full h-2 mr-3"},re={class:"text-sm font-medium w-8"},ie={class:"flex items-center justify-between"},ae={class:"flex items-center"},de={class:"w-32 bg-gray-200 rounded-full h-2 mr-3"},ce={class:"text-sm font-medium w-8"},me={class:"flex items-center justify-between"},ue={class:"flex items-center"},_e={class:"w-32 bg-gray-200 rounded-full h-2 mr-3"},xe={class:"text-sm font-medium w-8"},fe={class:"flex items-center justify-between"},ge={class:"flex items-center"},ve={class:"w-32 bg-gray-200 rounded-full h-2 mr-3"},he={class:"text-sm font-medium w-8"},pe={class:"bg-white rounded-xl shadow-lg p-6"},be={class:"text-center"},ke={class:"text-4xl font-bold text-green-600 mb-2"},ye={class:"space-y-3"},we={class:"flex justify-between items-center p-3 bg-green-50 rounded-lg"},je={class:"text-sm font-medium text-green-600"},Se={class:"flex justify-between items-center p-3 bg-purple-50 rounded-lg"},Ie={class:"text-sm font-medium text-purple-600"},Me={class:"flex justify-between items-center p-3 bg-blue-50 rounded-lg"},Ce={class:"text-sm font-medium text-blue-600"},Fe={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Ve={class:"bg-white rounded-xl shadow-lg p-6"},ze={class:"flex items-center justify-between mb-6"},Be={class:"space-y-4"},Ee={class:"flex items-center justify-between"},Ne={class:"font-medium text-gray-900"},Ae={class:"text-sm text-gray-600"},De={class:"flex items-center space-x-4 mt-2"},He={class:"text-sm text-red-600"},Le={class:"text-sm text-gray-500"},Pe={class:"text-right"},Te={class:"text-xs px-2 py-1 bg-red-100 text-red-800 rounded-full border border-red-300"},Ke={key:0,class:"text-center py-8 text-gray-500"},$e={class:"bg-white rounded-xl shadow-lg p-6"},qe={class:"flex items-center justify-between mb-6"},Oe={class:"space-y-4"},Re={class:"flex items-center space-x-4"},Xe={class:"font-medium text-gray-900"},Ge={class:"text-sm text-gray-600"},Je={class:"text-xs text-gray-500"},Qe={class:"text-right"},Ue={key:0,class:"text-center py-8 text-gray-500"},es={__name:"index",props:{message:String,stats:Object,categoryDistribution:Array,topValueComponents:Array,overStockItems:Array,lowStockItems:Array,elementItems:Array,kitItems:Array,componentItems:Array,recentMovements:Array},setup(C){const i=C,n=p(i.stats||{total_items:0,total_components:0,total_elements:0,total_kits:0,low_stock_elements:0,over_stock_elements:0,low_stock_kits:0,over_stock_kits:0,low_stock_components:0,over_stock_components:0,total_categories:0,total_value:0}),F=p(!1),v=p(i.recentMovements||[]),k=o=>{q.visit(o)},V=o=>new Date(o).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),x=o=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(o),d=o=>{let e=0;const r=l=>{const a=parseFloat(l.current_stock),c=parseFloat(l.min_stock),j=parseFloat(l.max_stock);return a<c?"bajo_stock":a===c?"en_minimo":a>j?"sobre_stock":"normal"};return i.elementItems&&(e+=i.elementItems.filter(l=>r(l)===o).length),i.kitItems&&(e+=i.kitItems.filter(l=>r(l)===o).length),i.componentItems&&(e+=i.componentItems.filter(l=>r(l)===o).length),e},z=()=>{const o=n.value.total_elements||0,e=d("normal");return o>0?Math.round(e/o*100):0},B=()=>{const o=n.value.total_kits||0,e=d("normal");return console.log("Kit Stock Percentage:",{total:o,normal:e}),o>0?Math.round(e/o*100):0},E=()=>{const o=n.value.total_components||0,e=d("normal");return o>0?Math.round(e/o*100):0},f=()=>(n.value.total_elements||0)+(n.value.total_kits||0)+(n.value.total_components||0),h=o=>{const e=f();if(e===0)return"0 251.2";let r=0;switch(o){case"elements":r=n.value.total_elements||0;break;case"kits":r=n.value.total_kits||0;break;case"components":r=n.value.total_components||0;break}const l=r/e*100,a=2*Math.PI*40;return`${l/100*a} ${a}`},y=o=>{const e=f();if(e===0)return 0;let r=0;const l=2*Math.PI*40;if(o==="kits")r=(n.value.total_elements||0)/e*100/100*l;else if(o==="components"){const a=n.value.total_elements||0,c=n.value.total_kits||0;r=(a+c)/e*100/100*l}return-r},g=o=>{const e=f();if(e===0)return 0;const r=d(o);return Math.round(r/e*100)},N=()=>i.elementItems?i.elementItems.reduce((o,e)=>o+parseFloat(e.current_stock)*parseFloat(e.purchase_cost||0),0):0,A=()=>i.kitItems?i.kitItems.reduce((o,e)=>o+parseFloat(e.current_stock)*parseFloat(e.purchase_cost||0),0):0,D=()=>i.componentItems?i.componentItems.reduce((o,e)=>o+parseFloat(e.current_stock)*parseFloat(e.purchase_cost||0),0):0,w=()=>[...i.elementItems||[],...i.kitItems||[],...i.componentItems||[]].filter(e=>{const r=parseFloat(e.current_stock),l=parseFloat(e.min_stock);return r<=l}).slice(0,5),H=o=>{const e=parseFloat(o.current_stock),r=parseFloat(o.min_stock),l=parseFloat(o.max_stock);return e<r?"Bajo Stock":e===r?"En el Mínimo":e>l?"Sobre Stock":"Normal"};return T(()=>{F.value=!1}),(o,e)=>(m(),K(L,{title:"Dashboard"},{header:b(()=>e[2]||(e[2]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Sistema de Inventario ",-1)])),default:b(()=>[$(P,null,{default:b(()=>{var r;return[t("div",R,[t("div",X,[t("div",G,[t("div",J,[t("div",Q,[t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm font-medium text-gray-600"},"Bajo Stock",-1)),t("p",U,s(n.value.low_stock_elements+n.value.low_stock_kits+n.value.low_stock_components),1)]),e[4]||(e[4]=t("div",{class:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center"},[t("div",{class:"w-6 h-6 bg-red-500 rounded-full"})],-1))])]),t("div",W,[t("div",Y,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-gray-600"},"En el Mínimo",-1)),t("p",Z,s(d("en_minimo")),1)]),e[6]||(e[6]=t("div",{class:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center"},[t("div",{class:"w-6 h-6 bg-yellow-500 rounded-full"})],-1))])]),t("div",tt,[t("div",et,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-600"},"Stock Normal",-1)),t("p",st,s(d("normal")),1)]),e[8]||(e[8]=t("div",{class:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"},[t("div",{class:"w-6 h-6 bg-green-500 rounded-full"})],-1))])]),t("div",ot,[t("div",lt,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-600"},"Sobre Stock",-1)),t("p",nt,s(d("sobre_stock")),1)]),e[10]||(e[10]=t("div",{class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},[t("div",{class:"w-6 h-6 bg-blue-500 rounded-full"})],-1))])])])]),t("div",rt,[t("div",it,[t("div",at,[t("div",dt,[e[12]||(e[12]=t("div",{class:"p-3 bg-green-100 rounded-full"},[t("svg",{class:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),t("div",ct,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-600"},"Elementos",-1)),t("p",mt,s(n.value.total_elements||0),1)])]),t("div",ut,[t("div",_t,s(n.value.low_stock_elements||0)+" bajo stock",1),t("div",xt,s(n.value.normal_stock_elements||0)+" stock normal",1),t("div",ft,s(n.value.over_stock_elements||0)+" sobre stock",1)])]),t("div",gt,[t("div",{class:"bg-green-500 h-2 rounded-full",style:u({width:z()+"%"})},null,4)])]),t("div",vt,[t("div",ht,[t("div",pt,[e[14]||(e[14]=t("div",{class:"p-3 bg-blue-100 rounded-full"},[t("svg",{class:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})])],-1)),t("div",bt,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-600"},"Componentes",-1)),t("p",kt,s(n.value.total_components||0),1)])]),t("div",yt,[t("div",wt,s(n.value.low_stock_components||0)+" bajo stock",1),t("div",jt,s(n.value.normal_stock_components||0)+" stock normal",1),t("div",St,s(n.value.over_stock_components||0)+" sobre stock",1)])]),t("div",It,[t("div",{class:"bg-blue-500 h-2 rounded-full",style:u({width:E()+"%"})},null,4)])]),t("div",Mt,[t("div",Ct,[t("div",Ft,[e[16]||(e[16]=t("div",{class:"p-3 bg-purple-100 rounded-full"},[t("svg",{class:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])],-1)),t("div",Vt,[e[15]||(e[15]=t("p",{class:"text-sm font-medium text-gray-600"},"Kits",-1)),t("p",zt,s(n.value.total_kits||0),1)])]),t("div",Bt,[t("div",Et,s(n.value.low_stock_kits||0)+" bajo stock",1),t("div",Nt,s(n.value.normal_stock_kits||0)+" stock normal",1),t("div",At,s(n.value.over_stock_kits||0)+" sobre stock",1)])]),t("div",Dt,[t("div",{class:"bg-purple-500 h-2 rounded-full",style:u({width:B()+"%"})},null,4)])])]),t("div",Ht,[t("div",Lt,[e[22]||(e[22]=t("h3",{class:"text-xl font-semibold text-gray-900 mb-6"},"📊 Distribución por Tipo",-1)),t("div",Pt,[t("div",Tt,[(m(),_("svg",Kt,[e[17]||(e[17]=t("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e5e7eb","stroke-width":"8"},null,-1)),t("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#10b981","stroke-width":"8","stroke-dasharray":h("elements"),"stroke-dashoffset":"0"},null,8,$t),t("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#8b5cf6","stroke-width":"8","stroke-dasharray":h("kits"),"stroke-dashoffset":y("kits")},null,8,qt),t("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#3b82f6","stroke-width":"8","stroke-dasharray":h("components"),"stroke-dashoffset":y("components")},null,8,Ot)])),t("div",Rt,[t("div",Xt,[t("div",Gt,s(f()),1),e[18]||(e[18]=t("div",{class:"text-sm text-gray-600"},"Total Items",-1))])])])]),t("div",Jt,[t("div",Qt,[e[19]||(e[19]=t("div",{class:"flex items-center"},[t("div",{class:"w-4 h-4 bg-green-500 rounded-full mr-2"}),t("span",{class:"text-sm text-gray-600"},"Elementos")],-1)),t("span",Ut,s(n.value.total_elements||0),1)]),t("div",Wt,[e[20]||(e[20]=t("div",{class:"flex items-center"},[t("div",{class:"w-4 h-4 bg-purple-500 rounded-full mr-2"}),t("span",{class:"text-sm text-gray-600"},"Kits")],-1)),t("span",Yt,s(n.value.total_kits||0),1)]),t("div",Zt,[e[21]||(e[21]=t("div",{class:"flex items-center"},[t("div",{class:"w-4 h-4 bg-blue-500 rounded-full mr-2"}),t("span",{class:"text-sm text-gray-600"},"Componentes")],-1)),t("span",te,s(n.value.total_components||0),1)])])]),t("div",ee,[e[27]||(e[27]=t("h3",{class:"text-xl font-semibold text-gray-900 mb-6"},"📈 Estados de Stock",-1)),t("div",se,[t("div",oe,[e[23]||(e[23]=t("div",{class:"flex items-center"},[t("div",{class:"w-4 h-4 bg-red-500 rounded-full mr-3"}),t("span",{class:"text-sm text-gray-600"},"Bajo Stock")],-1)),t("div",le,[t("div",ne,[t("div",{class:"bg-red-500 h-2 rounded-full",style:u({width:g("bajo_stock")+"%"})},null,4)]),t("span",re,s(d("bajo_stock")),1)])]),t("div",ie,[e[24]||(e[24]=t("div",{class:"flex items-center"},[t("div",{class:"w-4 h-4 bg-yellow-500 rounded-full mr-3"}),t("span",{class:"text-sm text-gray-600"},"En el Mínimo")],-1)),t("div",ae,[t("div",de,[t("div",{class:"bg-yellow-500 h-2 rounded-full",style:u({width:g("en_minimo")+"%"})},null,4)]),t("span",ce,s(d("en_minimo")),1)])]),t("div",me,[e[25]||(e[25]=t("div",{class:"flex items-center"},[t("div",{class:"w-4 h-4 bg-green-500 rounded-full mr-3"}),t("span",{class:"text-sm text-gray-600"},"Stock Normal")],-1)),t("div",ue,[t("div",_e,[t("div",{class:"bg-green-500 h-2 rounded-full",style:u({width:g("normal")+"%"})},null,4)]),t("span",xe,s(d("normal")),1)])]),t("div",fe,[e[26]||(e[26]=t("div",{class:"flex items-center"},[t("div",{class:"w-4 h-4 bg-blue-500 rounded-full mr-3"}),t("span",{class:"text-sm text-gray-600"},"Sobre Stock")],-1)),t("div",ge,[t("div",ve,[t("div",{class:"bg-blue-500 h-2 rounded-full",style:u({width:g("sobre_stock")+"%"})},null,4)]),t("span",he,s(d("sobre_stock")),1)])])])]),t("div",pe,[e[32]||(e[32]=t("h3",{class:"text-xl font-semibold text-gray-900 mb-6"},"💰 Valor del Inventario",-1)),t("div",be,[t("div",ke,s(x(n.value.total_value||0)),1),e[31]||(e[31]=t("div",{class:"text-sm text-gray-600 mb-6"},"Valor Total",-1)),t("div",ye,[t("div",we,[e[28]||(e[28]=t("span",{class:"text-sm text-gray-600"},"Elementos",-1)),t("span",je,s(x(N())),1)]),t("div",Se,[e[29]||(e[29]=t("span",{class:"text-sm text-gray-600"},"Kits",-1)),t("span",Ie,s(x(A())),1)]),t("div",Me,[e[30]||(e[30]=t("span",{class:"text-sm text-gray-600"},"Componentes",-1)),t("span",Ce,s(x(D())),1)])])])])]),t("div",Fe,[t("div",Ve,[t("div",ze,[e[33]||(e[33]=t("h3",{class:"text-xl font-semibold text-gray-900"},"⚠️ Stock Bajo - Acción Requerida",-1)),t("button",{onClick:e[0]||(e[0]=l=>k("/inventario")),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Ver Todos → ")]),t("div",Be,[(m(!0),_(I,null,S(w(),l=>(m(),_("div",{key:l.id,class:"border-l-4 border-red-500 pl-4 py-3 rounded-r-lg bg-red-50"},[t("div",Ee,[t("div",null,[t("h4",Ne,s(l.name),1),t("p",Ae,s(l.categoryName||"Sin categoría"),1),t("div",De,[t("span",He," Stock: "+s(l.current_stock),1),t("span",Le," Mín: "+s(l.min_stock),1)])]),t("div",Pe,[t("span",Te,s(H(l)),1)])])]))),128)),w().length===0?(m(),_("div",Ke," ✅ No hay items con stock bajo ")):M("",!0)])]),t("div",$e,[t("div",qe,[e[34]||(e[34]=t("h3",{class:"text-xl font-semibold text-gray-900"},"Movimientos Recientes",-1)),t("button",{onClick:e[1]||(e[1]=l=>k("/inventory-movements")),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Ver Historial Completo → ")]),t("div",Oe,[(m(!0),_(I,null,S(v.value,l=>{var a,c;return m(),_("div",{key:l.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[t("div",Re,[e[35]||(e[35]=t("div",{class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})])],-1)),t("div",null,[t("h4",Xe,s((a=l.component)==null?void 0:a.name),1),t("p",Ge,s(l.type)+" - "+s(l.quantity)+" unidades ",1),t("p",Je,s((c=l.user)==null?void 0:c.name)+" • "+s(V(l.created_at)),1)])]),t("div",Qe,[t("span",{class:O(["text-sm font-medium",l.type==="entrada"?"text-green-600":"text-red-600"])},s(l.type==="entrada"?"+":"-")+s(l.quantity),3)])])}),128)),!v.value||((r=v.value)==null?void 0:r.length)===0?(m(),_("div",Ue," No hay movimientos recientes ")):M("",!0)])])])])]}),_:1})]),_:1}))}};export{es as default};
