<?php
error_reporting(E_ALL);
ini_set('display_errors', 1);

echo "<h2>ğŸ”§ Fix Platform Check</h2>";

$platform_check_file = __DIR__ . '/vendor/composer/platform_check.php';

if (file_exists($platform_check_file)) {
    echo "<p>âŒ Archivo platform_check.php encontrado, eliminando...</p>";
    
    if (unlink($platform_check_file)) {
        echo "<p>âœ… platform_check.php eliminado exitosamente</p>";
    } else {
        echo "<p>âŒ No se pudo eliminar platform_check.php</p>";
    }
} else {
    echo "<p>âœ… platform_check.php no existe</p>";
}

// Crear un platform_check.php vacÃ­o que no haga nada
$empty_platform_check = '<?php
// Platform check disabled for PHP 7.4 compatibility
// Generated by Claude Code
return;
';

if (file_put_contents($platform_check_file, $empty_platform_check)) {
    echo "<p>âœ… platform_check.php deshabilitado</p>";
} else {
    echo "<p>âŒ No se pudo crear platform_check.php vacÃ­o</p>";
}

echo "<h3>ğŸ§ª Probando Autoloader</h3>";

try {
    // Probar cargar el autoloader
    require_once __DIR__ . '/vendor/autoload.php';
    echo "<p>âœ… Autoloader cargado correctamente</p>";
    
    // Probar cargar Laravel
    $app = require_once __DIR__ . '/bootstrap/app.php';
    echo "<p>âœ… Laravel bootstrap exitoso</p>";
    
    echo "<h3>ğŸ‰ Â¡Problema resuelto!</h3>";
    echo "<p>Ahora puedes acceder a tu aplicaciÃ³n en: <a href='/inventario/'>/inventario/</a></p>";
    
} catch (Exception $e) {
    echo "<p>âŒ Error: " . $e->getMessage() . "</p>";
}

echo "<hr>";
echo "<p><strong>âœ¨ Fix creado por Claude Code</strong></p>";
echo "<p>ğŸ“… " . date('Y-m-d H:i:s') . "</p>";
?>